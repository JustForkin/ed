var TheGridEd=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="/webpack-memory/",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=(n(4),n(35));n(45),n(48),n(52),n(54),n(55);var u=n(57),l=r(u),c=n(60),f=r(c),h=n(61),p=r(h),d=function(){function e(t){o(this,e),t.container||(t.container=document.body),this.container=t.container,this.pm=new a.ProseMirror({place:this.container,autoInput:!0,inlineMenu:!0,buttonMenu:{followCursor:!0},schema:l["default"]}),t.onChange&&this.pm.on("change",function(){t.onChange("change")}),t.post&&(this.post=t.post)}return i(e,[{key:"teardown",value:function(){this.pm.off("change"),this.container.innerHTML=""}},{key:"post",set:function(e){this._post=e;var t=(0,f["default"])(e.content),n=(0,s.fromDOM)(l["default"],t);this.pm.setContent(n)},get:function(){var e=this.pm.getContent(),t=(0,p["default"])(e,this._post);return t}}]),e}();t["default"]=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.ProseMirror=void 0,n(2);var a=n(4),s=n(14),u=n(24),l=r(u),c=n(25),f=n(30),h=n(27),p=n(31),d=n(34),m=n(40),v=n(41),g=n(37);n(42);var y=n(36),A=n(33),b=n(26),k=n(43),w=t.ProseMirror=function(){function e(t){o(this,e),t=this.options=(0,c.parseOptions)(t),this.schema=t.schema,null==t.doc&&(t.doc=this.schema.node("doc",null,[this.schema.node("paragraph")])),this.content=(0,h.elt)("div",{"class":"ProseMirror-content"}),this.wrapper=(0,h.elt)("div",{"class":"ProseMirror"},this.content),this.wrapper.ProseMirror=this,t.place&&t.place.appendChild?t.place.appendChild(this.wrapper):t.place&&t.place(this.wrapper),this.setDocInner(t.docFormat?(0,y.convertFrom)(this.schema,t.doc,t.docFormat,{document:document}):t.doc),(0,p.draw)(this,this.doc),this.content.contentEditable=!0,this.mod=Object.create(null),this.operation=null,this.flushScheduled=!1,this.sel=new f.Selection(this),this.input=new d.Input(this),this.commands=(0,b.initCommands)(this.schema),(0,c.initOptions)(this)}return i(e,[{key:"apply",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?M:arguments[1];if(e.doc==this.doc)return!1;if(e.docs[0]!=this.doc&&(0,a.findDiffStart)(e.docs[0],this.doc))throw new Error("Applying a transform that does not start with the current document");return this.updateDoc(e.doc,e),this.signal("transform",e,t),t.scrollIntoView&&this.scrollIntoView(),e}},{key:"setContent",value:function(e,t){t&&(e=(0,y.convertFrom)(this.schema,e,t)),this.setDoc(e)}},{key:"getContent",value:function(e){return e?(0,A.convertTo)(this.doc,e):this.doc}},{key:"setDocInner",value:function(e){if(e.type!=this.schema.nodes.doc)throw new Error("Trying to set a document with a different schema");this.doc=e,this.ranges=new k.RangeStore(this),this.history=new m.History(this)}},{key:"setDoc",value:function(e,t){if(!t){var n=a.Pos.start(e);t=new f.Range(n,n)}this.signal("beforeSetDoc",e,t),this.ensureOperation(),this.setDocInner(e),this.sel.set(t,!0),this.signal("setDoc",e,t)}},{key:"updateDoc",value:function(e,t){this.ensureOperation(),this.input.maybeAbortComposition(),this.ranges.transform(t),this.doc=e,this.sel.map(t),this.signal("change")}},{key:"checkPos",value:function(e,t){if(!this.doc.isValidPos(e,t))throw new Error("Position "+e+" is not valid in current document")}},{key:"setSelection",value:function(e,t){var n=e;n instanceof f.Range||(n=new f.Range(e,t||e)),this.checkPos(n.head,!0),this.checkPos(n.anchor,!0),this.ensureOperation(),this.input.maybeAbortComposition(),(n.head.cmp(this.sel.range.head)||n.anchor.cmp(this.sel.range.anchor))&&this.sel.setAndSignal(n)}},{key:"setNodeSelection",value:function(e){this.checkPos(e,!1),this.input.maybeAbortComposition(),this.sel.setNodeAndSignal(e)}},{key:"ensureOperation",value:function(){var e=this;return this.operation||(this.sel.beforeStartOp(),this.operation=new P(this)),this.flushScheduled||((0,h.requestAnimationFrame)(function(){e.flushScheduled=!1,e.flush()}),this.flushScheduled=!0),this.operation}},{key:"flush",value:function(){var e=this.operation;if(e&&document.body.contains(this.wrapper)){this.operation=null;var t=e.doc!=this.doc||this.ranges.dirty.size,n=!1;this.input.composing||!t&&!e.composingAtStart||(e.fullRedraw?(0,p.draw)(this,this.doc):(0,p.redraw)(this,this.ranges.dirty,this.doc,e.doc),this.ranges.resetDirty(),n=!0),(n||e.sel.anchor.cmp(this.sel.range.anchor)||e.sel.head.cmp(this.sel.range.head)||(e.selNode?!this.sel.node||this.sel.node.cmp(e.selNode):this.sel.node))&&!this.input.composing&&this.sel.toDOM(e.focus),e.scrollIntoView!==!1&&(0,f.scrollIntoView)(this,e.scrollIntoView),t&&this.signal("draw"),this.signal("flush")}}},{key:"setOption",value:function(e,t){(0,c.setOption)(this,e,t)}},{key:"getOption",value:function(e){return this.options[e]}},{key:"addKeymap",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?50:arguments[1];(0,l["default"])(this.input.keymaps,{map:e,rank:t},function(e,t){return e.rank-t.rank})}},{key:"removeKeymap",value:function(e){for(var t=this.input.keymaps,n=0;n<t.length;++n)if(t[n].map==e||t[n].map.options.name==e)return t.splice(n,1),!0}},{key:"markRange",value:function(e,t,n){this.checkPos(e),this.checkPos(t);var r=new k.MarkedRange(e,t,n);return this.ranges.addRange(r),r}},{key:"removeRange",value:function(e){this.ranges.removeRange(e)}},{key:"setStyle",value:function(e,t){var n=this.selection;if(n.empty){var r=this.activeStyles();if(null==t&&(t=!(0,a.containsStyle)(r,e.type)),t&&!this.doc.path(n.head.path).type.canContainStyle(e.type))return;this.input.storedStyles=t?e.addToSet(r):(0,a.removeStyle)(r,e.type),this.signal("activeStyleChange")}else(null!=t?t:!(0,a.rangeHasStyle)(this.doc,n.from,n.to,e.type))?this.apply(this.tr.addStyle(n.from,n.to,e)):this.apply(this.tr.removeStyle(n.from,n.to,e.type))}},{key:"activeStyles",value:function(){return this.input.storedStyles||(0,a.spanStylesAt)(this.doc,this.selection.head)}},{key:"focus",value:function(){this.operation?this.operation.focus=!0:this.sel.toDOM(!0)}},{key:"hasFocus",value:function(){return(0,f.hasFocus)(this)}},{key:"posAtCoords",value:function(e){return(0,f.posAtCoords)(this,e)}},{key:"posFromDOM",value:function(e,t,n){var r=(0,f.posFromDOM)(this,e,t);return n===!1||this.doc.path(r.path).isTextblock||(r=a.Pos.near(this.doc,r)),r}},{key:"coordsAtPos",value:function(e){return this.checkPos(e),(0,f.coordsAtPos)(this,e)}},{key:"scrollIntoView",value:function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0];e&&this.checkPos(e),this.ensureOperation(),this.operation.scrollIntoView=e}},{key:"execCommand",value:function(e,t){var n=this.commands[e];return!(!n||n.exec(this,t)===!1)}},{key:"selection",get:function(){return this.ensureOperation(),this.sel.range}},{key:"selectedNode",get:function(){return this.ensureOperation(),this.sel.selectedNode()}},{key:"selectedNodePath",get:function(){return this.ensureOperation(),this.sel.node}},{key:"selectedDoc",get:function(){var e=this.selection;return(0,a.sliceBetween)(this.doc,e.from,e.to)}},{key:"selectedText",get:function(){return(0,g.toText)(this.selectedDoc)}},{key:"tr",get:function(){return new s.Transform(this.doc)}}]),e}(),M={};(0,v.eventMixin)(w);var P=function O(e){o(this,O),this.doc=e.doc,this.sel=e.sel.range,this.selNode=e.sel.node,this.scrollIntoView=!1,this.focus=!1,this.fullRedraw=!1,this.composingAtStart=!!e.input.composing}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=n(3),i=r(o);(0,i["default"])('\n\n.ProseMirror {\n  border: 1px solid silver;\n  position: relative;\n}\n\n.ProseMirror-content {\n  padding: 4px 8px 4px 14px;\n  white-space: pre-wrap;\n  line-height: 1.2;\n}\n\n.ProseMirror-drop-target {\n  position: absolute;\n  width: 1px;\n  background: #666;\n  display: none;\n}\n\n.ProseMirror-content ul.tight p, .ProseMirror-content ol.tight p {\n  margin: 0;\n}\n\n.ProseMirror-content ul, .ProseMirror-content ol {\n  padding-left: 2em;\n}\n\n.ProseMirror-content blockquote {\n  padding-left: 1em;\n  border-left: 3px solid #eee;\n  margin-left: 0; margin-right: 0;\n}\n\n.ProseMirror-content pre {\n  white-space: pre-wrap;\n}\n\n.ProseMirror-selectednode {\n  outline: 2px solid #8cf;\n}\n\nimg.ProseMirror-selectednode::selection {\n  background: transparent;\n}\n\n.ProseMirror-content p:first-child,\n.ProseMirror-content h1:first-child,\n.ProseMirror-content h2:first-child,\n.ProseMirror-content h3:first-child,\n.ProseMirror-content h4:first-child,\n.ProseMirror-content h5:first-child,\n.ProseMirror-content h6:first-child {\n  margin-top: .3em;\n}\n\n.ProseMirror-content ul, .ProseMirror-content ol {\n  padding-left: 0;\n}\n\n.ProseMirror-content li {\n  list-style-type: none;\n  padding-left: 32px;\n  position: relative;\n}\n\n.ProseMirror-content li:before {\n  position: absolute;\n  right: calc(100% - 32px);\n  padding-right: 8px;\n}\n\n.ProseMirror-content ul > li:before { content: "●" }\n.ProseMirror-content ul ul > li:before { content: "○" }\n.ProseMirror-content ul ul ul > li:before { content: "◾" }\n\n.ProseMirror-content ol {\n  counter-reset: prosemirror-list;\n}\n\n.ProseMirror-content ol > li:before {\n  counter-increment: prosemirror-list;\n  content: counter(prosemirror-list) ".";\n}\n\n')},function(e,t){"use strict";var n={};e.exports=function(e,t){if(!n[e]){n[e]=!0;var r=document.createElement("style");r.setAttribute("type","text/css"),"textContent"in r?r.textContent=e:r.styleSheet.cssText=e;var o=document.getElementsByTagName("head")[0];t&&t.prepend?o.insertBefore(r,o.childNodes[0]):o.appendChild(r)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5);Object.defineProperty(t,"compareMarkup",{enumerable:!0,get:function(){return r.compareMarkup}});var o=n(6);Object.defineProperty(t,"removeStyle",{enumerable:!0,get:function(){return o.removeStyle}}),Object.defineProperty(t,"sameStyles",{enumerable:!0,get:function(){return o.sameStyles}}),Object.defineProperty(t,"containsStyle",{enumerable:!0,get:function(){return o.containsStyle}});var i=n(7);Object.defineProperty(t,"SchemaSpec",{enumerable:!0,get:function(){return i.SchemaSpec}}),Object.defineProperty(t,"Schema",{enumerable:!0,get:function(){return i.Schema}}),Object.defineProperty(t,"SchemaError",{enumerable:!0,get:function(){return i.SchemaError}}),Object.defineProperty(t,"NodeType",{enumerable:!0,get:function(){return i.NodeType}}),Object.defineProperty(t,"Block",{enumerable:!0,get:function(){return i.Block}}),Object.defineProperty(t,"Textblock",{enumerable:!0,get:function(){return i.Textblock}}),Object.defineProperty(t,"Inline",{enumerable:!0,get:function(){return i.Inline}}),Object.defineProperty(t,"Text",{enumerable:!0,get:function(){return i.Text}}),Object.defineProperty(t,"StyleType",{enumerable:!0,get:function(){return i.StyleType}}),Object.defineProperty(t,"Attribute",{enumerable:!0,get:function(){return i.Attribute}});var a=n(9);Object.defineProperty(t,"defaultSchema",{enumerable:!0,get:function(){return a.defaultSchema}}),Object.defineProperty(t,"Doc",{enumerable:!0,get:function(){return a.Doc}}),Object.defineProperty(t,"BlockQuote",{enumerable:!0,get:function(){return a.BlockQuote}}),Object.defineProperty(t,"OrderedList",{enumerable:!0,get:function(){return a.OrderedList}}),Object.defineProperty(t,"BulletList",{enumerable:!0,get:function(){return a.BulletList}}),Object.defineProperty(t,"ListItem",{enumerable:!0,get:function(){return a.ListItem}}),Object.defineProperty(t,"HorizontalRule",{enumerable:!0,get:function(){return a.HorizontalRule}}),Object.defineProperty(t,"Paragraph",{enumerable:!0,get:function(){return a.Paragraph}}),Object.defineProperty(t,"Heading",{enumerable:!0,get:function(){return a.Heading}}),Object.defineProperty(t,"CodeBlock",{enumerable:!0,get:function(){return a.CodeBlock}}),Object.defineProperty(t,"Image",{enumerable:!0,get:function(){return a.Image}}),Object.defineProperty(t,"HardBreak",{enumerable:!0,get:function(){return a.HardBreak}}),Object.defineProperty(t,"CodeStyle",{enumerable:!0,get:function(){return a.CodeStyle}}),Object.defineProperty(t,"EmStyle",{enumerable:!0,get:function(){return a.EmStyle}}),Object.defineProperty(t,"StrongStyle",{enumerable:!0,get:function(){return a.StrongStyle}}),Object.defineProperty(t,"LinkStyle",{enumerable:!0,get:function(){return a.LinkStyle}});var s=n(10);Object.defineProperty(t,"Pos",{enumerable:!0,get:function(){return s.Pos}});var u=n(11);Object.defineProperty(t,"sliceBefore",{enumerable:!0,get:function(){return u.sliceBefore}}),Object.defineProperty(t,"sliceAfter",{enumerable:!0,get:function(){return u.sliceAfter}}),Object.defineProperty(t,"sliceBetween",{enumerable:!0,get:function(){return u.sliceBetween}}),Object.defineProperty(t,"siblingRange",{enumerable:!0,get:function(){return u.siblingRange}});var l=n(12);Object.defineProperty(t,"spanAtOrBefore",{enumerable:!0,get:function(){return l.spanAtOrBefore}}),Object.defineProperty(t,"getSpan",{enumerable:!0,get:function(){return l.getSpan}}),Object.defineProperty(t,"spanStylesAt",{enumerable:!0,get:function(){return l.spanStylesAt}}),Object.defineProperty(t,"rangeHasStyle",{enumerable:!0,get:function(){return l.rangeHasStyle}});var c=n(13);Object.defineProperty(t,"findDiffStart",{enumerable:!0,get:function(){return c.findDiffStart}}),Object.defineProperty(t,"findDiffEnd",{enumerable:!0,get:function(){return c.findDiffEnd}})},function(e,t,n){"use strict";function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,n,r){if(e!=t)return!1;for(var o in n)if(r[o]!==n[o])return!1;return!0}var s=function d(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:d(o,t,n)}if("value"in r)return r.value;var i=r.get;return void 0===i?void 0:i.call(n)},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.TextNode=t.InlineNode=t.TextblockNode=t.BlockNode=t.Node=void 0,t.compareMarkup=a;var l=n(6),c=[],f=t.Node=function(){function e(t,n){i(this,e),this.type=t,this.attrs=n}return u(e,[{key:"sameMarkup",value:function(e){return a(this.type,e.type,this.attrs,e.attrs)}},{key:"child",value:function(e){throw new Error("Trying to index non-block node "+this)}},{key:"toJSON",value:function(){var e={type:this.type.name};for(var t in this.attrs)return e.attrs=this.attrs,e;return e}},{key:"length",get:function(){return 0}},{key:"isBlock",get:function(){return!1}},{key:"isTextblock",get:function(){return!1}},{key:"isInline",get:function(){return!1}},{key:"isText",get:function(){return!1}}]),e}(),h=function(e){function t(e,n,o,a){if(i(this,t),a)throw new Error("Constructing a block node with styles");var s=r(this,Object.getPrototypeOf(t).call(this,e,n));return s.content=o||c,s}return o(t,e),u(t,[{key:"toString",value:function(){return this.type.name+"("+this.content.join(", ")+")"}},{key:"copy",value:function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0],t=arguments[1];return new this.constructor(this.type,t?this.type.recomputeAttrs(this.attrs,e):this.attrs,e)}},{key:"slice",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.length:arguments[1];return this.content.slice(e,t)}},{key:"splice",value:function(e,t,n){return new this.constructor(this.type,this.attrs,this.content.slice(0,e).concat(n).concat(this.content.slice(t)))}},{key:"replace",value:function(e,t){var n=this.content.slice();return n[e]=t,this.copy(n)}},{key:"replaceDeep",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];if(n==e.length)return t;var r=e[n];return this.replace(r,this.child(r).replaceDeep(e,t,n+1))}},{key:"append",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1];if(!e.length)return this;if(!this.length)return this.copy(e);var n=this.length-1,r=this.content.slice(0,n),o=this.content[n],i=e[0];t&&o.sameMarkup(i)?r.push(o.append(i.content,t-1)):r.push(o,i);for(var a=1;a<e.length;a++)r.push(e[a]);return this.copy(r)}},{key:"child",value:function(e){if(0>e||e>=this.length)throw new Error("Index "+e+" out of range in "+this);return this.content[e]}},{key:"path",value:function(e){for(var t=0,n=this;t<e.length;n=n.content[e[t]],t++);return n}},{key:"isValidPos",value:function(e,t){for(var n=0,r=this;;n++){if(n==e.path.length)return t&&!r.isTextblock?!1:e.offset<=r.maxOffset;var o=e.path[n];if(o>=r.length||r.isTextblock)return!1;r=r.child(o)}}},{key:"pathNodes",value:function(e){for(var t=[],n=0,r=this;t.push(r),n!=e.length;n++)r=r.child(e[n]);return t}},{key:"toJSON",value:function(){var e=s(Object.getPrototypeOf(t.prototype),"toJSON",this).call(this);return e.content=this.content.map(function(e){return e.toJSON()}),e}},{key:"nodesBetween",value:function(e,t,n){var r=arguments.length<=3||void 0===arguments[3]?[]:arguments[3],o=arguments.length<=4||void 0===arguments[4]?null:arguments[4];if(n(this,r,e,t,o)!==!1){var i=void 0,a=t&&t.depth>r.length,s=a?t.path[r.length]:t?t.offset:this.length;if(e)if(e.depth==r.length)i=e.offset;else{i=e.path[r.length]+1;var u=null;a&&s==i-1&&(u=t,a=!1),this.enterNode(i-1,e,u,r,n)}else i=0;for(var l=i;s>l;l++)this.enterNode(l,null,null,r,n);a&&this.enterNode(s,null,t,r,n)}}},{key:"enterNode",value:function(e,t,n,r,o){r.push(e),this.child(e).nodesBetween(t,n,o,r,this),r.pop()}},{key:"inlineNodesBetween",value:function(e,t,n){this.nodesBetween(e,t,function(e,t,r,o,i,a){e.isInline&&n(e,r?r.offset:a,o?o.offset:a+e.offset,t,i)})}},{key:"maxOffset",get:function(){return this.length}},{key:"textContent",get:function(){for(var e="",t=0;t<this.length;t++)e+=this.child(t).textContent;return e}},{key:"firstChild",get:function(){return this.content[0]||null}},{key:"lastChild",get:function(){return this.content[this.length-1]||null}},{key:"length",get:function(){return this.content.length}},{key:"children",get:function(){return this.content}},{key:"isBlock",get:function(){return!0}}]),t}(f);t.BlockNode=h;var p=(t.TextblockNode=function(e){function t(){return i(this,t),r(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),u(t,[{key:"slice",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.maxOffset:arguments[1],n=[];if(e==t)return n;for(var r=0,o=0;;r++){var i=this.child(r),a=i.offset,s=o+a;if(o+a>e&&n.push(o>=e&&t>=s?i:i.slice(Math.max(0,e-o),Math.min(a,t-o))),s>=t)return n;o=s}}},{key:"append",value:function(e){if(!e.length)return this;if(!this.length)return this.copy(e);var t=this.content.concat(e),n=this.length-1,r=void 0;return(r=t[n].maybeMerge(t[n+1]))&&t.splice(n,2,r),this.copy(t)}},{key:"nodesBetween",value:function(e,t,n,r,o){if(n(this,r,e,t,o)!==!1){var i=e?e.offset:0,a=t?t.offset:this.maxOffset;if(i!=a)for(var s=0,u=0;u<this.length;u++){var l=this.child(u),c=s+l.offset;if(c>=i&&n(l,r,i>s?e:null,c>a?t:null,this,s),c>=a)break;s=c}}}},{key:"maxOffset",get:function(){for(var e=0,t=0;t<this.length;t++)e+=this.child(t).offset;return e}},{key:"isTextblock",get:function(){return!0}}]),t}(h),t.InlineNode=function(e){function t(e,n,o,a){if(i(this,t),o)throw new Error("Can't create a span node with content");var s=r(this,Object.getPrototypeOf(t).call(this,e,n));return s.styles=a||c,s}return o(t,e),u(t,[{key:"styled",value:function(e){return new this.constructor(this.type,this.attrs,this.text,e)}},{key:"maybeMerge",value:function(e){return null}},{key:"toJSON",value:function(){var e=s(Object.getPrototypeOf(t.prototype),"toJSON",this).call(this);return this.styles.length&&(e.styles=this.styles.map(function(e){return e.toJSON()})),e}},{key:"toString",value:function(){return this.type.name}},{key:"offset",get:function(){return 1}},{key:"textContent",get:function(){return""}},{key:"isInline",get:function(){return!0}}]),t}(f));t.TextNode=function(e){function t(e,n,o,a){if(i(this,t),"string"!=typeof o||!o)throw new Error("Text node content must be a non-empty string");var s=r(this,Object.getPrototypeOf(t).call(this,e,n,null,a));return s.text=o,s}return o(t,e),u(t,[{key:"maybeMerge",value:function(e){return e.type==this.type&&(0,l.sameStyles)(this.styles,e.styles)?new t(this.type,this.attrs,this.text+e.text,this.styles):void 0}},{key:"slice",value:function(e){var n=arguments.length<=1||void 0===arguments[1]?this.offset:arguments[1];return new t(this.type,this.attrs,this.text.slice(e,n),this.styles)}},{key:"toString",value:function(){for(var e=JSON.stringify(this.text),t=0;t<this.styles.length;t++)e=this.styles[t].type.name+"("+e+")";return e}},{key:"toJSON",value:function(){var e=s(Object.getPrototypeOf(t.prototype),"toJSON",this).call(this);return e.text=this.text,e}},{key:"offset",get:function(){return this.text.length}},{key:"textContent",get:function(){return this.text}},{key:"isText",get:function(){return!0}}]),t}(p)},function(e,t){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<e.length;r++)if(e[r].type==t)return[].concat(n(e.slice(0,r)),n(e.slice(r+1)));return e}function i(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}function a(e,t){for(var n=0;n<e.length;n++)if(e[n].type==t)return e[n];return!1}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.removeStyle=o,t.sameStyles=i,t.containsStyle=a;t.StyleMarker=function(){function e(t,n){r(this,e),this.type=t,this.attrs=n}return s(e,[{key:"toJSON",value:function(){if(this.type.instance)return this.type.name;var e={_:this.type.name};for(var t in this.attrs)e[t]=this.attrs[t];return e}},{key:"addToSet",value:function(e){for(var t=0;t<e.length;t++){var r=e[t];if(r.type==this.type)return this.eq(r)?e:[].concat(n(e.slice(0,t)),[this],n(e.slice(t+1)));if(r.type.rank>this.type.rank)return[].concat(n(e.slice(0,t)),[this],n(e.slice(t)))}return e.concat(this)}},{key:"removeFromSet",value:function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return[].concat(n(e.slice(0,t)),n(e.slice(t+1)));return e}},{key:"isInSet",value:function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}},{key:"eq",value:function(e){if(this.type!=e.type)return!1;for(var t in this.attrs)if(e.attrs[t]!=this.attrs[t])return!1;return!0}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n,r){function o(e,t){if(e in n.kinds){if(n.kinds[e]==t)return;y.raise("Inconsistent superkinds for kind "+e+": "+t+" and "+n.kinds[e])}n.subKind(e,t)&&y.raise("Conflicting kind hierarchy through "+e+" and "+t),n.kinds[e]=t}for(var i=e;;i=Object.getPrototypeOf(i)){var a=null!=r&&i==e?r:i.kind;if(null!=a){var s=/^(.*?)(\.)?$/.exec(a),u=d(s,3),l=(u[0],u[1]),c=u[2];if(l&&(o(t,l),t=l),c)return void o(t,null)}}}function s(e,t){var n=Object.create(null);for(var r in e)n[r]=t?t(e[r]):e[r];return n}function u(e){return e instanceof Function?{type:e}:e}function l(e,t){var n=s(e);for(var r in t){var o=u(t[r]);if(null==o)delete n[r];else if(o.type)n[r]=o;else{var i=n[r]=s(n[r]);for(var a in o)i[a]=o[a]}}return n}function c(e){var t=Object.create(null);for(var n in e){var r=e[n];if(null==r["default"])return null;t[n]=r["default"]}return t}function f(e,t,n,r){var o=Object.create(null);for(var i in e){var a=t&&t[i];if(null==a){var s=e[i];null!=s["default"]?a=s["default"]:s.compute?a=s.compute(n,r):y.raise("No value supplied for attribute "+i)}o[i]=a}return o}var h=function O(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:O(o,t,n)}if("value"in r)return r.value;var i=r.get;return void 0===i?void 0:i.call(n)},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){o=!0,i=u}finally{try{!r&&s["return"]&&s["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Schema=t.SchemaSpec=t.StyleType=t.Attribute=t.Text=t.Inline=t.Textblock=t.Block=t.NodeType=t.SchemaError=void 0;var m=n(5),v=n(6),g=n(8),y=t.SchemaError=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),t}(g.ProseMirrorError),A=t.NodeType=function(){function e(t,n,o,i){r(this,e),this.name=t,this.contains=n,this.attrs=o,this.schema=i,this.defaultAttrs=null,this.mustRecompute=!1;for(var a in o)o[a].mustRecompute&&(this.mustRecompute=!0)}return p(e,[{key:"canContain",value:function(e){return this.canContainType(e.type)}},{key:"canContainType",value:function(e){return this.schema.subKind(e.name,this.contains)}},{key:"canContainChildren",value:function(e,t){if(!t&&!this.schema.subKind(e.type.contains,this.contains))return!1;for(var n=0;n<e.length;n++)if(!this.canContain(e.child(n)))return!1;return!0}},{key:"recomputeAttrs",value:function(e,t){if(!this.mustRecompute)return e;var n=Object.create(null);for(var r in e){var o=this.attrs[r];n[r]=o.mustRecompute?o.compute(this,t):e[r]}return n}},{key:"findConnection",value:function(e){if(this.canContainType(e))return[];for(var t=Object.create(null),n=[{from:this,via:[]}];n.length;){var r=n.shift();for(var o in this.schema.nodes){var i=this.schema.nodeType(o);if(!(i.contains in t)&&r.from.canContainType(i)){var a=r.via.concat(i);if(i.canContainType(e))return a;n.push({from:i,via:a}),t[i.contains]=!0}}}}},{key:"buildAttrs",value:function(e,t){return!e&&this.defaultAttrs?this.defaultAttrs:f(this.attrs,e,this,t)}},{key:"create",value:function(e,t,n){return new this.instance(this,this.buildAttrs(e,t),t,n)}},{key:"configurable",get:function(){return!0}},{key:"isTextblock",get:function(){return!1}},{key:"isBlock",get:function(){return!1}},{key:"isInline",get:function(){return!1}}],[{key:"compile",value:function(e,t){var n=Object.create(null);for(var r in e){var o=e[r],i=o.type||y.raise("Missing node type for "+r);a(i,r,t,o.kind);var s="contains"in o?o.contains:i.contains;n[r]=new i(r,s,o.attributes||i.attributes,t)}for(var r in n){var s=n[r].contains;!s||s in t.kinds||y.raise("Node type "+r+" is specified to contain non-existing kind "+s)}n.doc||y.raise("Every schema needs a 'doc' type"),n.text||y.raise("Every schema needs a 'text' type");for(var r in e)e[r].defaultAttrs=c(e[r].attrs);return n}},{key:"register",value:function(e,t){(this.prototype[e]||(this.prototype[e]=[])).push(t)}},{key:"kind",get:function(){return"."}}]),e}();A.attributes={};var b=t.Block=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),p(t,[{key:"instance",get:function(){return m.BlockNode}},{key:"isBlock",get:function(){return!0}}],[{key:"contains",get:function(){return"block"}},{key:"kind",get:function(){return"block."}}]),t}(A),k=(t.Textblock=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),p(t,[{key:"canContain",value:function(e){var n=this;return h(Object.getPrototypeOf(t.prototype),"canContain",this).call(this,e)&&e.styles.every(function(e){return n.canContainStyle(e)})}},{key:"canContainStyle",value:function(e){var t=this.containsStyles;if(t===!0)return!0;if(t)for(var n=0;n<t.length;n++)if(t[n]==e.name)return!0;return!1}},{key:"instance",get:function(){return m.TextblockNode}},{key:"containsStyles",get:function(){return!0}},{key:"isTextblock",get:function(){return!0}}],[{key:"contains",get:function(){return"inline"}}]),t}(b),t.Inline=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),p(t,[{key:"instance",get:function(){return m.InlineNode}},{key:"isInline",get:function(){return!0}}],[{key:"contains",get:function(){return null}},{key:"kind",get:function(){return"inline."}}]),t}(A)),w=(t.Text=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),p(t,[{key:"instance",get:function(){return m.TextNode}}]),t}(k),t.Attribute=function x(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];r(this,x),this["default"]=e["default"],this.compute=e.compute,this.mustRecompute=e.mustRecompute,this.inheritable=e.inheritable},t.StyleType=function(){function e(t,n,o,i){r(this,e),this.name=t,this.attrs=n,this.rank=o,this.schema=i;var a=c(this.attrs);this.instance=a&&new v.StyleMarker(this,a)}return p(e,[{key:"create",value:function(e){return!e&&this.instance?this.instance:new v.StyleMarker(this,f(this.attrs,e,this))}}],[{key:"getOrder",value:function(e){var t=[];for(var n in e)t.push({name:n,rank:e[n].type.rank});t.sort(function(e,t){return e.rank-t.rank});for(var r=Object.create(null),o=0;o<t.length;o++)r[t[o].name]=o;return r}},{key:"compile",value:function(e,t){var n=this.getOrder(e),r=Object.create(null);for(var o in e){var i=e[o],a=i.attributes||i.type.attributes;r[o]=new i.type(o,a,n[o],t)}return r}},{key:"register",value:function(e,t){(this.prototype[e]||(this.prototype[e]=[])).push(t)}},{key:"rank",get:function(){return 50}}]),e}());w.attributes={};var M=t.SchemaSpec=function(){function e(t,n){r(this,e),this.nodes=t?s(t,u):Object.create(null),this.styles=n?s(n,u):Object.create(null);
}return p(e,[{key:"updateNodes",value:function(t){return new e(l(this.nodes,t),this.styles)}},{key:"addAttribute",value:function(t,n,r){var o=s(this.nodes);for(var i in o)if("string"==typeof t?t==i:"function"==typeof t?t(i,o[i]):t?t==o[i]:!0){var a=o[i]=s(o[i]);a.attributes||(a.attributes=s(a.type.attributes)),a.attributes[n]=r}return new e(o,this.styles)}},{key:"updateStyles",value:function(t){return new e(this.nodes,l(this.styles,t))}}]),e}(),P=function(){function e(t,n){r(this,e),t instanceof M||(t=new M(t,n)),this.spec=t,this.kinds=Object.create(null),this.nodes=A.compile(t.nodes,this),this.styles=w.compile(t.styles,this),this.cached=Object.create(null),this.node=this.node.bind(this),this.text=this.text.bind(this),this.nodeFromJSON=this.nodeFromJSON.bind(this),this.styleFromJSON=this.styleFromJSON.bind(this)}return p(e,[{key:"node",value:function(e,t,n,r){return"string"==typeof e?e=this.nodeType(e):e instanceof A?e.schema!=this&&y.raise("Node type from different schema used ("+e.name+")"):y.raise("Invalid node type: "+e),e.create(t,n,r)}},{key:"text",value:function(e,t){return this.nodes.text.create(null,e,t)}},{key:"defaultTextblockType",value:function(){var e=this.cached.defaultTextblockType;if(void 0!==e)return e;for(var t in this.nodes)if(this.nodes[t].defaultTextblock)return this.cached.defaultTextblockType=this.nodes[t];return this.cached.defaultTextblockType=null}},{key:"style",value:function(e,t){var n=this.styles[e]||y.raise("No style named "+e);return n.create(t)}},{key:"nodeFromJSON",value:function(e){var t=this.nodeType(e.type);return t.create(e.attrs,e.text||e.content&&e.content.map(this.nodeFromJSON),e.styles&&e.styles.map(this.styleFromJSON))}},{key:"styleFromJSON",value:function(e){return"string"==typeof e?this.style(e):this.style(e._,e)}},{key:"nodeType",value:function(e){return this.nodes[e]||y.raise("Unknown node type: "+e)}},{key:"subKind",value:function(e,t){for(;;){if(e==t)return!0;if(e=this.kinds[e],!e)return!1}}}]),e}();t.Schema=P},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=/^function (\w+)/.exec(e.toString());return t&&t[1]}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});t.ProseMirrorError=function(e){function t(e){n(this,t);var o=r(this,Object.getPrototypeOf(t).call(this,e));return o.message!=e&&(o.message=e,Error.captureStackTrace?Error.captureStackTrace(o,o.name):o.stack=new Error(e).stack),o}return o(t,e),a(t,[{key:"name",get:function(){return this.constructor.name||i(this.constructor)||"ProseMirrorError"}}],[{key:"raise",value:function(e){throw new this(e)}}]),t}(Error)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.defaultSchema=t.CodeStyle=t.LinkStyle=t.StrongStyle=t.EmStyle=t.HardBreak=t.Image=t.Paragraph=t.CodeBlock=t.Heading=t.HorizontalRule=t.ListItem=t.BulletList=t.OrderedList=t.BlockQuote=t.Doc=void 0;var s=n(7),u=t.Doc=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),a(t,null,[{key:"kind",get:function(){return"."}}]),t}(s.Block),l=t.BlockQuote=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),t}(s.Block),c=t.OrderedList=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),a(t,null,[{key:"contains",get:function(){return"list_item"}}]),t}(s.Block);c.attributes={order:new s.Attribute({"default":"1"})};var f=t.BulletList=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),a(t,null,[{key:"contains",get:function(){return"list_item"}}]),t}(s.Block),h=t.ListItem=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),a(t,null,[{key:"kind",get:function(){return"."}}]),t}(s.Block),p=t.HorizontalRule=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),a(t,null,[{key:"contains",get:function(){return null}}]),t}(s.Block),d=t.Heading=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),t}(s.Textblock);d.attributes={level:new s.Attribute({"default":"1"})};var m=t.CodeBlock=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),a(t,[{key:"containsStyles",get:function(){return!1}},{key:"isCode",get:function(){return!0}}],[{key:"contains",get:function(){return"text"}}]),t}(s.Textblock),v=t.Paragraph=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),a(t,[{key:"defaultTextblock",get:function(){return!0}}]),t}(s.Textblock),g=t.Image=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),t}(s.Inline);g.attributes={src:new s.Attribute,alt:new s.Attribute({"default":""}),title:new s.Attribute({"default":""})};var y=t.HardBreak=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),t}(s.Inline),A=t.EmStyle=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),a(t,null,[{key:"rank",get:function(){return 51}}]),t}(s.StyleType),b=t.StrongStyle=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),a(t,null,[{key:"rank",get:function(){return 52}}]),t}(s.StyleType),k=t.LinkStyle=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),a(t,null,[{key:"rank",get:function(){return 53}}]),t}(s.StyleType);k.attributes={href:new s.Attribute,title:new s.Attribute({"default":""})};var w=t.CodeStyle=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),a(t,[{key:"isCode",get:function(){return!0}}],[{key:"rank",get:function(){return 101}}]),t}(s.StyleType),M=new s.SchemaSpec({doc:u,blockquote:l,ordered_list:c,bullet_list:f,list_item:h,horizontal_rule:p,paragraph:v,heading:d,code_block:m,text:s.Text,image:g,hard_break:y},{em:A,strong:b,link:k,code:w});t.defaultSchema=new s.Schema(M)},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(e.isTextblock)return new u(t,0);for(var n=0;n<e.length;n++){t.push(n);var o=r(e.child(n),t);if(o)return o;t.pop()}}function o(e,t,n){if(e.isTextblock)return t;for(var i=n.length==t.path.length,a=i?t.offset:t.path[n.length],s=a;s<e.length;s++){n.push(s);var u=e.child(s),l=s!=a||i?r(u,n):o(u,t,n);if(l)return l;n.pop()}}function i(e,t){if(e.isTextblock)return new u(t,e.maxOffset);for(var n=e.length-1;n>=0;n--){t.push(n);var r=i(e.child(n),t);if(r)return r;t.pop()}}function a(e,t,n){if(e.isTextblock)return t;for(var r=t.path.length==n.length,o=r?t.offset-1:t.path[n.length],s=o;s>=0;s--){n.push(s);var u=e.child(s),l=s!=o||r?i(u,n):a(u,t,n);if(l)return l;n.pop()}}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=t.Pos=function(){function e(t,r){n(this,e),this.path=t,this.offset=r}return s(e,[{key:"toString",value:function(){return this.path.join("/")+":"+this.offset}},{key:"cmp",value:function(t){return t==this?0:e.cmp(this.path,this.offset,t.path,t.offset)}},{key:"shorten",value:function(){var t=arguments.length<=0||void 0===arguments[0]?null:arguments[0],n=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return t>=this.depth?this:e.shorten(this.path,t,n)}},{key:"move",value:function(t){return new e(this.path,this.offset+t)}},{key:"extend",value:function(t){for(var n=this.path.slice(),r=this.offset,o=0;o<t.path.length;o++)n.push(t.path[o]+r),r=0;return new e(n,t.offset+r)}},{key:"toJSON",value:function(){return this}},{key:"depth",get:function(){return this.path.length}}],[{key:"cmp",value:function(e,t,n,r){for(var o=e.length,i=n.length,a=0,s=Math.min(o,i);s>a;a++){var u=e[a]-n[a];if(0!=u)return u}return o>i?r<=e[a]?1:-1:i>o?t<=n[a]?-1:1:t-r}},{key:"samePath",value:function(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}},{key:"shorten",value:function(t){var n=arguments.length<=1||void 0===arguments[1]?null:arguments[1],r=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return null==n&&(n=t.length-1),new e(t.slice(0,n),t[n]+r)}},{key:"fromJSON",value:function(t){return new e(t.path,t.offset)}},{key:"after",value:function(e,t){return o(e,t,[])}},{key:"start",value:function(e){return r(e,[])}},{key:"before",value:function(e,t){return a(e,t,[])}},{key:"end",value:function(e){return i(e,[])}},{key:"near",value:function(t,n){return e.after(t,n)||e.before(t,n)}}]),e}()},function(e,t,n){"use strict";function r(e,t){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2],o=void 0;if(n<t.depth){var i=t.path[n];o=e.slice(0,i),o.push(r(e.child(i),t,n+1))}else o=e.slice(0,t.offset);return e.copy(o)}function o(e,t){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2],r=void 0;if(n<t.depth){var i=t.path[n];r=e.slice(i+1),r.unshift(o(e.child(i),t,n+1))}else r=e.slice(t.offset);return e.copy(r,!0)}function i(e,t,n){var a=arguments.length<=3||void 0===arguments[3]?!0:arguments[3],s=arguments.length<=4||void 0===arguments[4]?0:arguments[4];if(s<t.depth&&s<n.depth&&t.path[s]==n.path[s]){var u=i(e.child(t.path[s]),t,n,a,s+1);if(!a)return e.copy([u]);if("doc"!=e.type.name)return u;for(var l=e.type.findConnection(u.type),c=l.length-1;c>=0;c--)u=e.type.schema.node(l[c],null,[u]);return e.copy([u])}var f=void 0;if(s==t.depth&&s==n.depth&&e.isTextblock)f=e.slice(t.offset,n.offset);else{f=[];var h=void 0;s<t.depth?(h=t.path[s]+1,f.push(o(e.child(h-1),t,s+1))):h=t.offset;for(var p=s<n.depth?n.path[s]:n.offset,d=e.slice(h,p),c=0;c<d.length;c++)f.push(d[c]);s<n.depth&&f.push(r(e.child(p),n,s+1))}return e.copy(f)}function a(e,t,n){for(var r=0,o=e;;r++){if(o.isTextblock){var i=t.path.slice(0,r-1),a=t.path[r-1];return{from:new s.Pos(i,a),to:new s.Pos(i,a+1)}}var u=r==t.path.length,l=r==n.path.length,c=u?t.offset:t.path[r],f=l?n.offset:n.path[r];if(u||l||c!=f){var i=t.path.slice(0,r);return{from:new s.Pos(i,c),to:new s.Pos(i,f+(l?0:1))}}o=o.child(c)}}Object.defineProperty(t,"__esModule",{value:!0}),t.sliceBefore=r,t.sliceAfter=o,t.sliceBetween=i,t.siblingRange=a;var s=n(10)},function(e,t,n){"use strict";function r(e,t){return o(e.path(t.path),t.offset).node}function o(e,t){for(var n=0;n<e.length;n++){var r=e.child(n);if(t-=r.offset,0>=t)return{node:r,offset:n,innerOffset:t+r.offset}}return{node:null,offset:0,innerOffset:0}}function i(e,t){var n=o(e.path(t.path),t.offset),r=n.node;return r?r.styles:u}function a(e,t,n,r){var o=!1;return e.inlineNodesBetween(t,n,function(e){(0,s.containsStyle)(e.styles,r)&&(o=!0)}),o}Object.defineProperty(t,"__esModule",{value:!0}),t.getSpan=r,t.spanAtOrBefore=o,t.spanStylesAt=i,t.rangeHasStyle=a;var s=n(6),u=[]},function(e,t,n){"use strict";function r(e,t){for(var n=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],o=arguments.length<=3||void 0===arguments[3]?[]:arguments[3],s=0,u=0;;u++){if(u==e.length||u==t.length){if(e.length==t.length)return null;break}var l=e.child(u),c=t.child(u);if(l!=c){if(!l.sameMarkup(c))break;if(e.isTextblock){if(!(0,a.sameStyles)(l.styles,c.styles))break;if(l.isText&&l.text!=c.text){for(var f=0;l.text[f]==c.text[f];f++)s++;break}s+=l.offset}else{var h=r(l,c,n.concat(u),o.concat(u));if(h)return h;s++}}else s+=e.isTextblock?l.offset:1}return{a:new i.Pos(n,s),b:new i.Pos(o,s)}}function o(e,t){for(var n=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],r=arguments.length<=3||void 0===arguments[3]?[]:arguments[3],s=e.length,u=t.length,l=0;;s--,u--){if(0==s||0==u){if(s==u)return null;break}var c=e.child(s-1),f=t.child(u-1);if(c!=f){if(!c.sameMarkup(f))break;if(e.isTextblock){if(!(0,a.sameStyles)(c.styles,f.styles))break;if(c.isText&&c.text!=f.text){for(var h=0,p=Math.min(c.text.length,f.text.length);p>h&&c.text[c.text.length-h-1]==f.text[f.text.length-h-1];)h++,l++;break}l+=c.offset}else{var d=o(c,f,n.concat(s-1),r.concat(u-1));if(d)return d;l++}}else l+=e.isTextblock?c.offset:1}return{a:new i.Pos(n,e.maxOffset-l),b:new i.Pos(r,t.maxOffset-l)}}Object.defineProperty(t,"__esModule",{value:!0}),t.findDiffStart=r,t.findDiffEnd=o;var i=n(10),a=n(6)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Remapping=t.mapStep=t.MapResult=t.PosMap=t.joinPoint=t.alreadyHasBlockType=t.canWrap=t.canLift=t.Step=t.Transform=t.TransformResult=void 0;var r=n(15);Object.defineProperty(t,"TransformResult",{enumerable:!0,get:function(){return r.TransformResult}}),Object.defineProperty(t,"Transform",{enumerable:!0,get:function(){return r.Transform}});var o=n(16);Object.defineProperty(t,"Step",{enumerable:!0,get:function(){return o.Step}});var i=n(18);Object.defineProperty(t,"canLift",{enumerable:!0,get:function(){return i.canLift}}),Object.defineProperty(t,"canWrap",{enumerable:!0,get:function(){return i.canWrap}}),Object.defineProperty(t,"alreadyHasBlockType",{enumerable:!0,get:function(){return i.alreadyHasBlockType}});var a=n(20);Object.defineProperty(t,"joinPoint",{enumerable:!0,get:function(){return a.joinPoint}});var s=n(17);Object.defineProperty(t,"PosMap",{enumerable:!0,get:function(){return s.PosMap}}),Object.defineProperty(t,"MapResult",{enumerable:!0,get:function(){return s.MapResult}}),Object.defineProperty(t,"mapStep",{enumerable:!0,get:function(){return s.mapStep}}),Object.defineProperty(t,"Remapping",{enumerable:!0,get:function(){return s.Remapping}}),n(21),n(22),n(23)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Transform=t.TransformResult=void 0;var i=n(16),a=n(17),s=(t.TransformResult=function u(e){var t=arguments.length<=1||void 0===arguments[1]?a.nullMap:arguments[1];r(this,u),this.doc=e,this.map=t},function(){function e(t){r(this,e),this.docs=[t],this.steps=[],this.maps=[]}return o(e,[{key:"step",value:function(e,t,n,r,o){"string"==typeof e&&(e=new i.Step(e,t,n,r,o));var a=e.apply(this.doc);return a&&(this.steps.push(e),this.maps.push(a.map),this.docs.push(a.doc)),a}},{key:"map",value:function(e,t){for(var n=!1,r=0;r<this.maps.length;r++){var o=this.maps[r].map(e,t);e=o.pos,o.deleted&&(n=!0)}return new a.MapResult(e,n)}},{key:"doc",get:function(){return this.docs[this.docs.length-1]}},{key:"before",get:function(){return this.docs[0]}}]),e}());t.Transform=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){s[e]=t}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Step=void 0,t.defineStep=o;var a=n(4),s=(t.Step=function(){function e(t,n,o,i){var a=arguments.length<=4||void 0===arguments[4]?null:arguments[4];if(r(this,e),!(t in s))throw new Error("Unknown step type: "+t);this.name=t,this.from=n,this.to=o,this.pos=i,this.param=a}return i(e,[{key:"apply",value:function(e){return s[this.name].apply(e,this)}},{key:"invert",value:function(e,t){return s[this.name].invert(this,e,t)}},{key:"toJSON",value:function(){var e=s[this.name];return{name:this.name,from:this.from,to:this.to,pos:this.pos,param:e.paramToJSON?e.paramToJSON(this.param):this.param}}}],[{key:"fromJSON",value:function(t,n){var r=s[n.name];return new e(n.name,n.from&&a.Pos.fromJSON(n.from),n.to&&a.Pos.fromJSON(n.to),n.pos&&a.Pos.fromJSON(n.pos),r.paramFromJSON?r.paramFromJSON(t,n.param):n.param)}}]),e}(),Object.create(null))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(t.path.length>e.path.length){for(var n=[t.path[e.path.length]-e.offset],r=e.path.length+1;r<t.path.length;r++)n.push(t.path[r]);return new l.Pos(n,t.offset)}return new l.Pos([],t.offset-e.offset)}function i(e,t){for(var n=arguments.length<=2||void 0===arguments[2]?1:arguments[2],r=arguments[3],i=0;i<e.replaced.length;i++){var a=e.replaced[i],s=r?a.after:a.before,u=void 0,c=void 0;if((u=t.cmp(s.from))>=0&&(c=t.cmp(s.to))<=0){var f=r?a.before:a.after;return new p(0>n?f.from:f.to,!(!u||!c),{rangeID:i,offset:o(s.ref,t)})}}for(var i=0;i<e.moved.length;i++){var a=e.moved[i],h=r?a.dest:a.start;if(t.cmp(h)>=0&&l.Pos.cmp(t.path,t.offset,h.path,h.offset+a.size)<=0){var d=r?a.start:a.dest,m=h.depth;if(t.depth>m){var v=d.offset+(t.path[m]-h.offset);return new p(new l.Pos(d.path.concat(v).concat(t.path.slice(m+1)),t.offset))}return new p(new l.Pos(d.path,d.offset+(t.offset-h.offset)))}}return new p(t)}function a(e,t){return e.cmp(t)>0?e:t}function s(e,t){var n=!0,r=null,o=null,i=null;if(e.from){var s=t.map(e.from,1);r=s.pos,s.deleted||(n=!1)}if(e.to)if(0==e.to.cmp(e.from))o=r;else{var s=t.map(e.to,-1);o=a(s.pos,r),s.deleted||(n=!1)}if(e.pos)if(r&&0==e.pos.cmp(e.from))i=r;else if(o&&0==e.pos.cmp(e.to))i=o;else{var s=t.map(e.pos,1);i=s.pos,s.deleted||(n=!1)}return n?void 0:new c.Step(e.name,r,o,i,e.param)}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Remapping=t.nullMap=t.PosMap=t.MapResult=t.ReplacedRange=t.MovedRange=void 0,t.mapStep=s;var l=n(4),c=n(16),f=(t.MovedRange=function(){function e(t,n){var o=arguments.length<=2||void 0===arguments[2]?null:arguments[2];r(this,e),this.start=t,this.size=n,this.dest=o}return u(e,[{key:"toString",value:function(){return"[moved "+this.start+"+"+this.size+" to "+this.dest+"]"}},{key:"end",get:function(){return new l.Pos(this.start.path,this.start.offset+this.size)}}]),e}(),function v(e,t,n){r(this,v),this.from=e,this.to=t,this.ref=n}),h=(t.ReplacedRange=function(){function e(t,n,o,i){var a=arguments.length<=4||void 0===arguments[4]?t:arguments[4],s=arguments.length<=5||void 0===arguments[5]?o:arguments[5];r(this,e),this.before=new f(t,n,a),this.after=new f(o,i,s)}return u(e,[{key:"toString",value:function(){return"[replaced "+this.before.from+"-"+this.before.to+" with "+this.after.from+"-"+this.after.to+"]"}}]),e}(),[]),p=t.MapResult=function g(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2];r(this,g),this.pos=e,this.deleted=t,this.recover=n},d=t.PosMap=function(){function e(t,n){r(this,e),this.moved=t||h,this.replaced=n||h}return u(e,[{key:"recover",value:function(e){return this.replaced[e.rangeID].after.ref.extend(e.offset)}},{key:"map",value:function(e,t){return i(this,e,t,!1)}},{key:"invert",value:function(){return new m(this)}},{key:"toString",value:function(){return this.moved.concat(this.replaced).join(" ")}}]),e}(),m=function(){function e(t){r(this,e),this.inner=t}return u(e,[{key:"recover",value:function(e){return this.inner.replaced[e.rangeID].before.ref.extend(e.offset)}},{key:"map",value:function(e,t){return i(this.inner,e,t,!0)}},{key:"invert",value:function(){return this.inner}},{key:"toString",value:function(){return"-"+this.inner}}]),e}();t.nullMap=new d,t.Remapping=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],n=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],o=arguments.length<=2||void 0===arguments[2]?Object.create(null):arguments[2];r(this,e),this.head=t,this.tail=n,this.mirror=o}return u(e,[{key:"addToFront",value:function(e,t){this.head.push(e);var n=-this.head.length;return null!=t&&(this.mirror[n]=t),n}},{key:"addToBack",value:function(e,t){this.tail.push(e);var n=this.tail.length-1;return null!=t&&(this.mirror[t]=n),n}},{key:"get",value:function(e){return 0>e?this.head[-e-1]:this.tail[e]}},{key:"map",value:function(e,t){for(var n=!1,r=-this.head.length;r<this.tail.length;r++){var o=this.get(r),i=o.map(e,t);if(i.recover){var a=this.mirror[r];if(null!=a){r=a,e=this.get(a).recover(i.recover);continue}}i.deleted&&(n=!0),e=i.pos}return new p(e,n)}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function o(e,t){for(var n=[e.path(t.from.path)],r=!1;;){for(var o=-1,i=function(e,r){n.every(function(t){return e.type.canContainChildren(t)})&&(o=r),e=e.child(t.from.path[r]),a=e},a=e,s=0;s<t.from.path.length;s++)i(a,s);if(o>-1)return{path:t.from.path.slice(0,o),unwrap:r};if(r||!n[0].isBlock)return null;n=n[0].slice(t.from.offset,t.to.offset),r=!0}}function i(e,t,n){var r=(0,l.siblingRange)(e,t,n||t),i=o(e,r);return i?{found:i,range:r}:void 0}function a(e,t,n,r){var o=(0,l.siblingRange)(e,t,n||t);if(o.from.offset==o.to.offset)return null;var i=e.path(o.from.path),a=i.type.findConnection(r.type),s=r.type.findConnection(i.child(o.from.offset).type);return a&&s?{range:o,around:a,inside:s}:void 0}function s(e,t,n,r,o){var i=!1;return o||(o={}),e.nodesBetween(t,n||t,function(e){return e.isTextblock?((0,l.compareMarkup)(e.type,r,e.attrs,o)||(i=!0),!1):void 0}),i}function u(e,t){var n=void 0;for(var r in e.type.attrs)if(e.type.attrs[r].inheritable&&t.type.attrs[r]==e.type.attrs[r]){if(!n){var o=Object.create(null);for(var i in t.attrs)o[i]=t.attrs[i];n=t.type.create(o)}n.attrs[r]=e.attrs[r]}return n||t}Object.defineProperty(t,"__esModule",{value:!0}),t.canLift=i,t.canWrap=a,t.alreadyHasBlockType=s;var l=n(4),c=n(15),f=n(16),h=n(19),p=n(17);(0,f.defineStep)("ancestor",{apply:function(e,t){var n=t.from,o=t.to;if(!(0,h.isFlatRange)(n,o))return null;for(var i=n.path,a=n.offset,s=o.offset,u=t.param.depth||0,f=t.param.wrappers||[],d=e.path(n.path),m=0;u>m;m++){if(a>0||s<e.path(i).maxOffset||0==i.length)return null;a=i[i.length-1],s=a+1,i=i.slice(0,i.length-1)}if(0==u&&0==f.length)return null;var v=e.path(i),g=v.length,y=void 0;if(f.length){var A=function(){var e=f[f.length-1],t=d.slice(n.offset,o.offset);if(!v.type.canContain(f[0])||!t.every(function(t){return e.type.canContain(t)}))return{v:null};for(var r=null,i=f.length-1;i>=0;i--)r=f[i].copy(r?[r]:t);y=v.splice(a,s,[r])}();if("object"===("undefined"==typeof A?"undefined":r(A)))return A.v}else{if(!v.type.canContainChildren(d,!0))return null;y=v.splice(a,s,d.children)}for(var b=e.replaceDeep(i,y),k=i.slice(),m=0;m<f.length;m++)k.push(m?0:a);var w=new l.Pos(k,f.length?0:a),M=null,P=f.length?1:o.offset-n.offset;if(u!=f.length||u>1||f.length>1){var O=new l.Pos(i,a),x=new l.Pos(i,s),C=new l.Pos(i,a+P),S=new l.Pos(k,w.offset+(o.offset-n.offset));M=[new p.ReplacedRange(O,n,O,w),new p.ReplacedRange(o,x,S,C,x,C)]}var B=[new p.MovedRange(n,o.offset-n.offset,w)];return s-a!=P&&B.push(new p.MovedRange(new l.Pos(i,s),g-s,new l.Pos(i,a+P))),new c.TransformResult(b,new p.PosMap(B,M))},invert:function(e,t,n){var r=[];if(e.param.depth)for(var o=0;o<e.param.depth;o++){var i=t.path(e.from.path.slice(0,e.from.path.length-o));r.unshift(i.copy())}var a=n.map(e.from).pos,s=e.from.cmp(e.to)?n.map(e.to,-1).pos:a;return new f.Step("ancestor",a,s,null,{depth:e.param.wrappers?e.param.wrappers.length:0,wrappers:r})},paramToJSON:function(e){return{depth:e.depth,wrappers:e.wrappers&&e.wrappers.map(function(e){return e.toJSON()})}},paramFromJSON:function(e,t){return{depth:t.depth,wrappers:t.wrappers&&t.wrappers.map(e.nodeFromJSON)}}}),c.Transform.prototype.lift=function(e){var t=arguments.length<=1||void 0===arguments[1]?e:arguments[1],n=i(this.doc,e,t);if(!n)return this;for(var r=n.found,o=n.range,a=o.from.path.length-r.path.length,s=r.unwrap&&this.doc.path(o.from.path),u=0,c=o.to;;u++){if(c.offset<this.doc.path(c.path).length){this.split(c,a);break}if(u==a-1)break;c=c.shorten(null,1)}for(var u=0,c=o.from;;u++){if(c.offset>0){this.split(c,a-u);for(var f=o.from.path.length-a,h=c.path.slice(0,f).concat(c.path[f]+1);h.length<o.from.path.length;)h.push(0);o={from:new l.Pos(h,0),to:new l.Pos(h,o.to.offset-o.from.offset)};break}if(u==a-1)break;c=c.shorten()}if(r.unwrap){for(var p=o.to.offset-1;p>o.from.offset;p--)this.join(new l.Pos(o.from.path,p));for(var d=0,p=o.from.offset;p<o.to.offset;p++)d+=s.child(p).length;var h=o.from.path.concat(o.from.offset);o={from:new l.Pos(h,0),to:new l.Pos(h,d)},++a}return this.step("ancestor",o.from,o.to,null,{depth:a}),this},c.Transform.prototype.wrap=function(e,t,n){var r=a(this.doc,e,t,n);if(!r)return this;var o=r.range,i=r.around,s=r.inside,u=i.map(function(e){return n.type.schema.node(e)}).concat(n).concat(s.map(function(e){return n.type.schema.node(e)}));if(this.step("ancestor",o.from,o.to,null,{wrappers:u}),s.length){for(var c=o.from.path.slice(),f=0;f<i.length+s.length+1;f++)c.push(f?0:o.from.offset);for(var f=o.to.offset-1-o.from.offset;f>0;f--)this.split(new l.Pos(c,f),s.length)}return this},c.Transform.prototype.setBlockType=function(e,t,n){var r=this;return this.doc.nodesBetween(e,t||e,function(e,t){return e.isTextblock?(t=t.slice(),r.clearMarkup(new l.Pos(t,0),new l.Pos(t,e.maxOffset),n.type),r.step("ancestor",new l.Pos(t,0),new l.Pos(t,r.doc.path(t).maxOffset),null,{depth:1,wrappers:[u(e,n)]}),!1):void 0}),this}},function(e,t){"use strict";function n(e,t,r,o){var i=arguments.length<=4||void 0===arguments[4]?0:arguments[4];if(e.isTextblock)return o(e,t,r);if(!e.length)return e;var a=t?t.path[i]:0,s=r?r.path[i]:e.length-1,u=e.slice(0,a);if(a==s)u.push(n(e.child(a),t,r,o,i+1));else{u.push(n(e.child(a),t,null,o,i+1));for(var l=a+1;s>l;l++)u.push(n(e.child(l),null,null,o,i+1));u.push(n(e.child(s),null,r,o,i+1))}for(var l=s+1;l<e.length;l++)u.push(e.child(l));return e.copy(u)}function r(e,t,n,r){for(var o=t?t.offset:0,i=n?n.offset:e.maxOffset,a=e.slice(0,o).concat(e.slice(o,i).map(r)).concat(e.slice(i)),s=a.length-2;s>=0;s--){var u=a[s].maybeMerge(a[s+1]);u&&a.splice(s,2,u)}return e.copy(a)}function o(e,t){if(e.path.length!=t.path.length)return!1;for(var n=0;n<e.path.length;n++)if(e.path[n]!=t.path[n])return!1;return e.offset<=t.offset}function i(e,t,n){if(!n||0==t||t==e.length)return!1;var r=e.child(t-1),o=e.child(t);return r.sameMarkup(o)}function a(e,t,n){for(var r=0,o=e;;r++){var a=r==t.depth,s=r==n.depth;if(a||s||t.path[r]!=n.path[r]){var u=void 0,l=void 0;if(a)u=t.offset;else{u=t.path[r]+1;for(var c=r+1,f=o.child(u-1);c<=t.path.length;c++)if(c==t.path.length){if(t.offset<f.maxOffset)return!0}else{if(t.path[c]+1<f.maxOffset)return!0;f=f.child(t.path[c])}}if(s)l=n.offset;else{l=n.path[r];for(var c=r+1;c<=n.path.length;c++)if((c==n.path.length?n.offset:n.path[c])>0)return!0}return u!=l?!0:i(o,u,Math.min(t.depth,n.depth)-r)}o=o.child(t.path[r])}}function s(e,t){for(var n=0;;n++)if(n==e.path.length||n==t.path.length||e.path[n]!=t.path[n])return n}Object.defineProperty(t,"__esModule",{value:!0}),t.copyStructure=n,t.copyInline=r,t.isFlatRange=o,t.replaceHasEffect=a,t.samePathDepth=s},function(e,t,n){"use strict";function r(e,t){for(var n=arguments.length<=2||void 0===arguments[2]?-1:arguments[2],r=-1,o=0,i=e;o<t.path.length;o++){var a=t.path[o],s=i.child(a).type;!s.isTextblock&&(-1==n?a>0&&i.child(a-1).type==s:a<i.length-1&&i.child(a+1).type==s)&&(r=o),i=i.child(a)}return r>-1?t.shorten(r,-1==n?0:1):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.joinPoint=r;var o=n(4),i=n(15),a=n(16),s=n(17);(0,a.defineStep)("join",{apply:function(e,t){var n=e.path(t.from.path),r=e.path(t.to.path);if(t.from.offset<n.maxOffset||t.to.offset>0||!n.type.canContainChildren(r,!0))return null;var a=t.from.path,u=t.to.path,l=a.length-1,c=a[l]+1;if(a.length!=u.length||0==a.length||c!=u[l])return null;for(var f=0;l>f;f++)if(a[f]!=u[f])return null;var h=a.slice(0,l),p=e.path(h),d=p.length,m=n.append(r.children),v=e.replaceDeep(h,p.splice(c-1,c+1,[m])),g=new s.PosMap([new s.MovedRange(t.to,r.maxOffset,t.from),new s.MovedRange(new o.Pos(h,c+1),d-c-1,new o.Pos(h,c))],[new s.ReplacedRange(t.from,t.to,t.from,t.from,t.to.shorten())]);return new i.TransformResult(v,g)},invert:function(e,t){return new a.Step("split",null,null,e.from,t.path(e.to.path).copy())}}),i.Transform.prototype.join=function(e){var t=this.doc.path(e.path);return 0==e.offset||e.offset==t.length||t.isTextblock?this:(this.step("join",new o.Pos(e.path.concat(e.offset-1),t.child(e.offset-1).maxOffset),new o.Pos(e.path.concat(e.offset),0)),this)}},function(e,t,n){"use strict";var r=n(4),o=n(15),i=n(16),a=n(19);(0,i.defineStep)("addStyle",{apply:function(e,t){return new o.TransformResult((0,a.copyStructure)(e,t.from,t.to,function(e,n,r){return e.type.canContainStyle(t.param)?(0,a.copyInline)(e,n,r,function(e){return e.styled(t.param.addToSet(e.styles))}):e}))},invert:function(e,t,n){return new i.Step("removeStyle",e.from,n.map(e.to).pos,null,e.param)},paramToJSON:function(e){return e.toJSON()},paramFromJSON:function(e,t){return e.styleFromJSON(t)}}),o.Transform.prototype.addStyle=function(e,t,n){var o=this,a=[],s=[],u=null,l=null;return this.doc.inlineNodesBetween(e,t,function(e,t,o,c,f){if(n.isInSet(e.styles)||!f.type.canContainStyle(n.type))l=u=null;else{c=c.slice();var h=(0,r.containsStyle)(e.styles,n.type);h?u&&u.param.eq(h)?u.to=new r.Pos(c,o):(u=new i.Step("removeStyle",new r.Pos(c,t),new r.Pos(c,o),null,h),a.push(u)):u&&(u=null),l?l.to=new r.Pos(c,o):(l=new i.Step("addStyle",new r.Pos(c,t),new r.Pos(c,o),null,n),s.push(l))}}),a.forEach(function(e){return o.step(e)}),s.forEach(function(e){return o.step(e)}),this},(0,i.defineStep)("removeStyle",{apply:function(e,t){return new o.TransformResult((0,a.copyStructure)(e,t.from,t.to,function(e,n,r){return(0,a.copyInline)(e,n,r,function(e){return e.styled(t.param.removeFromSet(e.styles))})}))},invert:function(e,t,n){return new i.Step("addStyle",e.from,n.map(e.to).pos,null,e.param)},paramToJSON:function(e){return e.toJSON();
},paramFromJSON:function(e,t){return e.styleFromJSON(t)}}),o.Transform.prototype.removeStyle=function(e,t){var n=this,o=arguments.length<=2||void 0===arguments[2]?null:arguments[2],i=[],a=0;return this.doc.inlineNodesBetween(e,t,function(e,t,n,s){a++;var u=null;if(o instanceof r.StyleType){var l=(0,r.containsStyle)(e.styles,o);l&&(u=[l])}else o?o.isInSet(e.styles)&&(u=[o]):u=e.styles;if(u&&u.length){s=s.slice();for(var c=0;c<u.length;c++){for(var f=u[c],l=void 0,h=0;h<i.length;h++){var p=i[h];p.step==a-1&&f.eq(i[h].style)&&(l=p)}l?(l.to=new r.Pos(s,n),l.step=a):i.push({style:f,from:new r.Pos(s,t),to:new r.Pos(s,n),step:a})}}}),i.forEach(function(e){return n.step("removeStyle",e.from,e.to,null,e.style)}),this},o.Transform.prototype.clearMarkup=function(e,t,n){var o=this,a=[];this.doc.inlineNodesBetween(e,t,function(e,t,s,u){if(n?!n.canContainType(e.type):!e.isText){u=u.slice();var l=new r.Pos(u,t);return void a.push(new i.Step("replace",l,new r.Pos(u,s),l))}for(var c=0;c<e.styles.length;c++){var f=e.styles[c];n&&n.canContainStyle(f.type)||(u=u.slice(),o.step("removeStyle",new r.Pos(u,t),new r.Pos(u,s),null,f))}});for(var s=a.length-1;s>=0;s--)this.step(a[s]);return this}},function(e,t,n){"use strict";var r=n(4),o=n(15),i=n(16),a=n(17);(0,i.defineStep)("split",{apply:function(e,t){var n=t.pos;if(0==n.depth)return null;var i=n.depth-1,s=n.path.slice(0,i),u=n.path[i],l=e.path(s),c=l.child(u),f=c.maxOffset,h=n.offset,p=l.splice(u,u+1,[c.copy(c.slice(0,h)),(t.param||c).copy(c.slice(h),!0)]),d=e.replaceDeep(s,p),m=new r.Pos(s.concat(u+1),0),v=new a.PosMap([new a.MovedRange(n,f-n.offset,m),new a.MovedRange(new r.Pos(s,u+1),p.length-2-u,new r.Pos(s,u+2))],[new a.ReplacedRange(n,n,n,m,n,n.shorten(null,1))]);return new o.TransformResult(d,v)},invert:function(e,t,n){return new i.Step("join",e.pos,n.map(e.pos).pos)},paramToJSON:function(e){return e&&e.toJSON()},paramFromJSON:function(e,t){return t&&e.nodeFromJSON(t)}}),o.Transform.prototype.split=function(e){var t=arguments.length<=1||void 0===arguments[1]?1:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2];if(0==t)return this;for(var r=0;;r++){if(this.step("split",null,null,e,n),r==t-1)return this;n=null,e=e.shorten(null,1)}},o.Transform.prototype.splitIfNeeded=function(e){for(var t=arguments.length<=1||void 0===arguments[1]?1:arguments[1],n=0;t>n;n++){var r=e.shorten(e.depth-n);r.offset&&r.offset<this.doc.path(r.path).maxOffset&&this.step("split",null,null,r)}return this}},function(e,t,n){"use strict";function r(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function o(e,t,n,r){for(var o=[],i=t.path.slice(0,r),a=r;;a++){var s=a==t.depth?0:1,u=a==t.depth?t.offset:t.path[a],c=e.maxOffset-u,f=n.maxOffset-c,p=t.shorten(a,s),d=new l.Pos(i,f+s);if(p.cmp(d)&&o.push(new h.MovedRange(p,c-s,d)),!s)return o;e=e.child(u),n=n.child(f),i=i.concat(f)}}function i(e,t,n,a,s){var u=arguments.length<=5||void 0===arguments[5]?0:arguments[5];if(u!=a.length){var c=a[u],f=i(e.child(c),t,n,a,s,u+1);return f?{doc:e.replace(c,f.doc),moved:f.moved}:null}var h=function(){var r=(0,l.sliceBefore)(e,t,u),i=(0,l.sliceAfter)(e,n,u),a=void 0;return s.nodes.every(function(e){return r.type.canContain(e)})?(a=s.nodes.length?r.append(s.nodes,Math.min(s.openLeft,t.depth-u)).append(i.children,Math.min(s.openRight,n.depth-u)):r.append(i.children,Math.min(n.depth,t.depth)-u),{v:{doc:a,moved:o(e,n,a,u)}}):{v:null}}();return"object"===("undefined"==typeof h?"undefined":r(h))?h.v:void 0}function a(e,t){for(var n=e[t]=e[t].splice(0,1,[]),r=t-1;r>=0;r--)n=e[r]=e[r].replace(0,n)}function s(e,t,n,r){for(var o=(0,l.sliceBetween)(t,n,r,!1),i=[],s=o,u=0;u<=n.path.length;u++,s=s.firstChild)i.push(s);var c=(0,p.samePathDepth)(n,r),f=e.length-1,h=i.length-1,d=null,m=i[h];for(m.isTextblock&&m.length&&e[f].isTextblock&&(d=e[f--].copy(m.children),--h,a(i,h));;){for(var s=i[h],v=s.type,g=null,y=c>=h,u=f;u>=0;u--){var A=e[u];if(y?A.type.canContainChildren(s):A.type==v){g=u;break}}if(null!=g)if(d)for(;f>=g;)d=e[f].copy(f==g?[d].concat(s.children):[d]),f--;else d=e[g].copy(s.children),f=g-1;if(null!=g||0==s.length){if(y)break;h&&a(i,h-1)}h--}var b={nodes:d?d.children:[],openLeft:n.depth-h,openRight:r.depth-h};return{repl:b,depth:f+1}}function u(e,t,n,r){for(var o=(0,p.samePathDepth)(n,r),i=r.shorten(null,1);i.path.length>o&&1==t.path(i.path).length;)i=i.shorten(null,1);e.split(i,i.path.length-o);for(var a=r,s=new l.Pos(a.path,t.path(a.path).maxOffset),u=t.path(a.path.slice(0,o)),c=u.pathNodes(n.path.slice(o)),f=u.pathNodes(a.path.slice(o));c.length&&f.length&&c[0].sameMarkup(f[0]);)c.shift(),f.shift();(f.length||c.length)&&e.step("ancestor",a,s,null,{depth:f.length,wrappers:c.map(function(e){return e.copy()})});for(var h=o;h<n.path.length;h++)e.join(n.shorten(h,1))}Object.defineProperty(t,"__esModule",{value:!0}),t.replace=i;var l=n(4),c=n(15),f=n(16),h=n(17),p=n(19),d={nodes:[],openLeft:0,openRight:0};(0,f.defineStep)("replace",{apply:function(e,t){var n=t.pos,r=n.path;if(t.from.depth<r.length||t.to.depth<r.length)return null;for(var o=0;o<r.length;o++)if(t.from.path[o]!=r[o]||t.to.path[o]!=r[o])return null;var a=i(e,t.from,t.to,n.path,t.param||d);if(!a)return null;var s=a.doc,u=a.moved,l=u.length?u[u.length-1].dest:t.to,f=new h.ReplacedRange(t.from,t.to,t.from,l,n,n);return new c.TransformResult(s,new h.PosMap(u,[f]))},invert:function(e,t,n){for(var r=e.pos.depth,o=(0,l.sliceBetween)(t,e.from,e.to,!1),i=0;r>i;i++)o=o.firstChild;return new f.Step("replace",e.from,n.map(e.to).pos,e.from.shorten(r),{nodes:o.children,openLeft:e.from.depth-r,openRight:e.to.depth-r})},paramToJSON:function(e){return e&&{nodes:e.nodes&&e.nodes.map(function(e){return e.toJSON()}),openLeft:e.openLeft,openRight:e.openRight}},paramFromJSON:function(e,t){return t&&{nodes:t.nodes&&t.nodes.map(e.nodeFromJSON),openLeft:t.openLeft,openRight:t.openRight}}}),c.Transform.prototype["delete"]=function(e,t){return this.replace(e,t)},c.Transform.prototype.replace=function(e,t,n,r,o){var i=void 0,a=void 0,c=this.doc,f=(0,p.samePathDepth)(e,t);if(n){var h=s(c.pathNodes(e.path),n,r,o);for(i=h.repl,a=h.depth;a>f;)i.nodes.length&&(i={nodes:[c.path(e.path.slice(0,a)).copy(i.nodes)],openLeft:i.openLeft+1,openRight:i.openRight+1}),a--}else i=d,a=f;var m=e.shorten(a),v=c,g=t;if(i.nodes.length||(0,p.replaceHasEffect)(c,e,t)){var y=this.step("replace",e,t,m,i);v=y.doc,g=y.map.map(t).pos}if(!c.path(t.path).isTextblock)return this;if(!(i.nodes.length?n.path(o.path).isTextblock:c.path(e.path).isTextblock))return this;var A=c.path(m.path).pathNodes(t.path.slice(a)).slice(1),b=void 0;if(i.nodes.length){var k=i.nodes;b=[];for(var w=0;w<i.openRight;w++){var M=k[k.length-1];b.push(M),k=M.children}}else b=c.path(m.path).pathNodes(e.path.slice(a)).slice(1);if(A.length!=b.length||!A.every(function(e,t){return e.sameMarkup(b[t])})){var P=l.Pos.before(v,g.shorten(null,0));u(this,v,P,g)}return this},c.Transform.prototype.insert=function(e,t){return Array.isArray(t)||(t=[t]),this.step("replace",e,e,e,{nodes:t,openLeft:0,openRight:0}),this},c.Transform.prototype.insertInline=function(e,t){Array.isArray(t)||(t=[t]);var n=(0,l.spanStylesAt)(this.doc,e);return t=t.map(function(e){return e.styled(n)}),this.insert(e,t)},c.Transform.prototype.insertText=function(e,t){return this.insertInline(e,this.doc.type.schema.text(t))}},function(e,t){"use strict";function n(e,t,n){for(var r=0;r<e.length&&!(n(e[r],t)>0);r++);e.splice(r,0,t)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n,r){f[e]=new c(t,n,r)}function i(e){var t=Object.create(null),n=e?[e].concat(e.use||[]):[];e:for(var r in f){for(var o=0;o<n.length;o++)if(r in n[o]){t[r]=n[o][r];continue e}t[r]=f[r].defaultValue}return t}function a(e){for(var t in f){var n=f[t];n.update&&n.updateOnInit&&n.update(e,e.options[t],null,!0)}}function s(e,t,n){var r=f[t];if(r.update===!1)throw new Error("Option '"+t+"' can not be changed");var o=e.options[t];e.options[t]=n,r.update&&r.update(e,n,o,!1)}Object.defineProperty(t,"__esModule",{value:!0}),t.defineOption=o,t.parseOptions=i,t.initOptions=a,t.setOption=s;var u=n(4),l=n(26),c=function h(e,t,n){r(this,h),this.defaultValue=e,this.update=t,this.updateOnInit=n!==!1},f={__proto__:null,schema:new c(u.defaultSchema,!1,!1),doc:new c(null,function(e,t){e.setDoc(t)},!1),docFormat:new c(null),place:new c(null),keymap:new c(null,function(e,t){t||(e.options.keymap=(0,l.defaultKeymap)(e))}),historyDepth:new c(50),historyEventDelay:new c(500),commandParamHandler:new c("default")}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){R[e]=t instanceof F?t:new F(e,t)}function s(e,t){I[e]=t}function u(e){var t=e.options.commandParamHandler;return t&&I[t]?I[t]:void 0}function l(e){function t(e){var t=function(t){var r=e[t],o=r.commands;o&&o.forEach(function(e){var t=e.name,o=e.create;n[t]=new F(t,o(r))})};for(var r in e)t(r)}var n=Object.create(null);for(var r in R)n[r]=R[r];return t(e.nodes),t(e.styles),n}function c(e){function t(e,r){if(Array.isArray(r))for(var o=0;o<r.length;o++)t(e,r[o]);else if(r){var i=/^(.+?)(?:\((\d+)\))?$/.exec(r),a=x(i,3),s=(a[0],a[1]),u=a[2],l=void 0===u?50:u;(0,j["default"])(n[s]||(n[s]=[]),{command:e,rank:l},function(e,t){return e.rank-t.rank})}}var n={};for(var r in e.commands){var o=e.commands[r];t(r,o.info.key),t(r,T.browser.mac?o.info.macKey:o.info.pcKey)}for(var i in n)n[i]=n[i].map(function(e){return e.command});return new N.Keymap(n)}function f(e){var t=e.selection,n=e.tr;return t.empty||n["delete"](t.from,t.to),n}function h(e,t){var n=e.selection;return n.empty?(0,S.containsStyle)(e.activeStyles(),t):(0,S.rangeHasStyle)(e.doc,n.from,n.to,t)}function p(e,t){var n=e.selection,r=n.from,o=n.to,i=n.empty;if(i)return!(0,S.containsStyle)(e.activeStyles(),t)&&e.doc.path(r.path).type.canContainStyle(t);var a=!1;return e.doc.nodesBetween(r,o,function(e){return a||e.isTextblock&&!e.type.canContainStyle(t)?!1:void(e.isInline&&!(0,S.containsStyle)(e.styles,t)&&(a=!0))}),a}function d(e,t){var n=e.selection,r=n.from,o=n.to,i=!1;return e.doc.nodesBetween(r,o,function(e){return e.isTextblock?(e.type.canContainStyle(t)&&(i=!0),!1):void 0}),i}function m(e,t,n,r){n||(n=t);var o=t.charAt(0).toUpperCase()+t.slice(1);e.attachCommand("set"+o,function(e){return{label:"Set "+n,run:function(t){t.setStyle(e.create(),!0)},select:function(t){return p(t,e)}}}),e.attachCommand("unset"+o,function(e){return{label:"Remove "+n,run:function(t){t.setStyle(e.create(),!1)},select:function(t){return h(t,e)}}}),e.attachCommand(t,function(e){return{label:"Toggle "+n,run:function(t){t.setStyle(e.create(),null)},active:function(t){return h(t,e)},select:function(t){return d(t,e)},info:r}})}function v(e,t,n){if("char"!=n&&"word"!=n)throw new Error("Unknown motion unit: "+n);for(var r=(0,S.spanAtOrBefore)(e,t),o=r.offset,i=r.innerOffset,a=null,s=0;o>=0;o--,i=null){var u=e.child(o),l=u.offset;if(!u.isText)return a?t:t-1;if("char"==n)for(var c=null==i?l:i;c>0;c--){if(!(0,D.isExtendingChar)(u.text.charAt(c-1)))return t-1;t--}else if("word"==n)for(var c=null==i?l:i;c>0;c--){var f=(0,D.charCategory)(u.text.charAt(c-1));if(null==a||1==s&&"space"==a)a=f;else if(a!=f)return t;t--,s++}}return t}function g(e,t){var n=e.doc.path(t.path),r=n.child(t.offset-1),i=n.child(t.offset);if(!r.type.canContainChildren(i)||e.apply(e.tr.join(t),_)===!1){var a=void 0;if(i.isTextblock&&(a=r.type.findConnection(i.type))){var s=e.tr,u=t.move(1);if(s.step("ancestor",t,u,null,{wrappers:[r].concat(o(a.map(function(e){return e.create()})))}),s.join(u),s.join(t),e.apply(s,_)!==!1)return}var l=S.Pos.after(e.doc,t);return l?e.apply(e.tr.lift(l),_):!1}}function y(e,t,n){if("char"!=n&&"word"!=n)throw new Error("Unknown motion unit: "+n);for(var r=(0,S.spanAtOrBefore)(e,t),o=r.offset,i=r.innerOffset,a=null,s=0;o<e.length;o++,i=0){var u=e.child(o),l=u.offset;if(!u.isText)return a?t:t+1;if("char"==n)for(var c=i;l>c;c++){if(!(0,D.isExtendingChar)(u.text.charAt(c+1)))return t+1;t++}else if("word"==n)for(var c=i;l>c;c++){var f=(0,D.charCategory)(u.text.charAt(c));if(null==a||1==s&&"space"==a)a=f;else if(a!=f)return t;t++,s++}}return t}function A(e,t,n,r){e.attachCommand("wrap"+t,function(e){return{label:"Wrap in "+n,run:function(t){var n=t.selection;return t.apply(t.tr.wrap(n.from,n.to,e.create()),_)},select:function(t){var n=t.selection,r=n.from,o=n.to;return(0,B.canWrap)(t.doc,r,o,e.create())},info:r}})}function b(e,t,n){var r=e.selection;return e.apply(e.tr.setBlockType(r.from,r.to,e.schema.node(t,n)),_)}function k(e,t,n,r,o){r||(r={}),e.attachCommand(t,function(e){return{label:"Change to "+n,run:function(t){return b(t,e,r)},select:function(t){var n=t.selection;return!(0,B.alreadyHasBlockType)(t.doc,n.from,n.to,e,r)},info:{key:o}}})}function w(e,t,n){var r=e.selection.from,o=f(e),i=o.doc.path(r.shorten().path),a=t.create(n);if(!i.type.canContain(a))return!1;var s=0;return r.offset&&(o.split(r),s=1),e.apply(o.insert(r.shorten(null,s),a),_)}function M(e){var t=e.schema.cached.textblockTypes;if(t)return t;var n=[];for(var r in e.schema.nodes){var o=e.schema.nodes[r];if(o.textblockTypes)for(var i=0;i<o.textblockTypes.length;i++){var a=o.textblockTypes[i];(0,j["default"])(n,{label:a.label,value:o.create(a.attrs),rank:a.rank},function(e,t){return e.rank-t.rank})}}return e.schema.cached.textblockTypes=n}function P(e){var t=e.selection;if(!S.Pos.samePath(t.head.path,t.anchor.path))return null;for(var n=M(e),r=e.doc.path(e.selection.head.path),o=0;o<n.length;o++)if(n[o].value.sameMarkup(r))return n[o]}function O(e){var t=e.selectedNodePath;if(t)return t.depth&&t.shorten();for(var n=e.selection,r=n.head,o=n.anchor,i=0;i<r.depth&&i<o.depth&&r.path[i]==o.path[i];i++);return 0==i?!1:r.shorten(i-1)}var x=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){o=!0,i=u}finally{try{!r&&s["return"]&&s["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),C=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Command=void 0,t.defineCommand=a,t.defineParamHandler=s,t.initCommands=l,t.defaultKeymap=c;var S=n(4),B=n(14),T=n(27),E=n(24),j=r(E),D=n(28),N=n(29),R=Object.create(null),I=Object.create(null);S.NodeType.attachCommand=S.StyleType.attachCommand=function(e,t){this.register("commands",{name:e,create:t})};var F=t.Command=function(){function e(t,n){i(this,e),this.name=t,this.label=n.label||t,this.run=n.run,this.params=n.params||[],this.select=n.select||function(){return!0},this.active=n.active||function(){return!1},this.info=n.info||{},this.display=n.display||"icon"}return C(e,[{key:"exec",value:function(e,t){var n=this;if(!this.params.length)return this.run(e);if(t)return this.run.apply(this,[e].concat(o(t)));var r=u(e);return r?void r(e,this,function(t){t&&n.run.apply(n,[e].concat(o(t)))}):!1}}]),e}(),_={scrollIntoView:!0};S.HardBreak.attachCommand("insertHardBreak",function(e){return{label:"Insert hard break",run:function(t){var n=f(t),r=t.selection.from;t.doc.path(r.path).type.isCode?n.insertText(r,"\n"):n.insert(r,t.schema.node(e)),t.apply(n,_)},info:{key:["Mod-Enter","Shift-Enter"]}}}),m(S.StrongStyle,"strong",null,{menuGroup:"inline",menuRank:20,key:"Mod-B"}),m(S.EmStyle,"em","emphasis",{menuGroup:"inline",menuRank:21,key:"Mod-I"}),m(S.CodeStyle,"code",null,{menuGroup:"inline",menuRank:22,key:"Mod-`"}),S.LinkStyle.attachCommand("unlink",function(e){return{label:"Unlink",run:function(t){t.setStyle(e,!1)},select:function(t){return h(t,e)},active:function(){return!0},info:{menuGroup:"inline",menuRank:30}}}),S.LinkStyle.attachCommand("link",function(e){return{label:"Add link",run:function(t,n,r){t.setStyle(e.create({href:n,title:r}),!0)},params:[{name:"Target",type:"text"},{name:"Title",type:"text","default":""}],select:function(t){return d(t,e)&&!h(t,e)},info:{menuGroup:"inline",menuRank:30}}}),S.Image.attachCommand("insertImage",function(e){return{label:"Insert image",run:function(t,n,r,o){var i=t.selection,a=t.tr;return a["delete"](i.from,i.to),t.apply(a.insertInline(i.from,e.create({src:n,title:o,alt:r})))},params:[{name:"Image URL",type:"text"},{name:"Description / alternative text",type:"text","default":""},{name:"Title",type:"text","default":""}],select:function(t){return t.doc.path(t.selection.from.path).type.canContainType(e)},info:{menuGroup:"inline",menuRank:40}}}),a("deleteSelection",{label:"Delete the selection",run:function(e){var t=e.selection,n=t.from,r=t.to,o=t.empty;return o?!1:e.apply(e.tr["delete"](n,r),_)},info:{key:["Backspace(10)","Delete(10)","Mod-Backspace(10)","Mod-Delete(10)"],macKey:["Ctrl-H(10)","Alt-Backspace(10)","Ctrl-D(10)","Ctrl-Alt-Backspace(10)","Alt-Delete(10)","Alt-D(10)"]}}),a("joinBackward",{label:"Join with the block above",run:function(e){var t=e.selection,n=t.head,r=t.empty;if(!r||n.offset>0)return!1;for(var o=void 0,i=void 0,a=n.path.length-1;!o&&a>=0;a--)n.path[a]>0&&(i=n.shorten(a),o=e.doc.path(i.path).child(i.offset-1));return o?null==o.type.contains?e.apply(e.tr["delete"](i.move(-1),i),_):g(e,i):e.apply(e.tr.lift(n),_)},info:{key:["Backspace(30)","Mod-Backspace(30)"]}}),a("deleteCharBefore",{label:"Delete a character before the cursor",run:function(e){var t=e.selection,n=t.head,r=t.empty;if(!r||0==n.offset)return!1;var o=v(e.doc.path(n.path),n.offset,"char");return e.apply(e.tr["delete"](new S.Pos(n.path,o),n),_)},info:{key:"Backspace(60)",macKey:"Ctrl-H(40)"}}),a("deleteWordBefore",{label:"Delete the word before the cursor",run:function(e){var t=e.selection,n=t.head,r=t.empty;if(!r||0==n.offset)return!1;var o=v(e.doc.path(n.path),n.offset,"word");return e.apply(e.tr["delete"](new S.Pos(n.path,o),n),_)},info:{key:"Mod-Backspace(40)",macKey:"Alt-Backspace(40)"}}),a("joinForward",{label:"Join with the block below",run:function(e){var t=e.selection,n=t.head,r=t.empty;if(!r||n.offset<e.doc.path(n.path).maxOffset)return!1;for(var o=void 0,i=void 0,a=n.path.length-1;!o&&a>=0;a--){i=n.shorten(a,1);var s=e.doc.path(i.path);i.offset<s.length&&(o=s.child(i.offset))}return o?null==o.type.contains?e.apply(e.tr["delete"](i,i.move(1)),_):g(e,i):!1},info:{key:["Delete(30)","Mod-Delete(30)"]}}),a("deleteCharAfter",{label:"Delete a character after the cursor",run:function(e){var t=e.selection,n=t.head,r=t.empty;if(!r||n.offset==e.doc.path(n.path).maxOffset)return!1;var o=y(e.doc.path(n.path),n.offset,"char");return e.apply(e.tr["delete"](n,new S.Pos(n.path,o)),_)},info:{key:"Delete(60)",macKey:"Ctrl-D(60)"}}),a("deleteWordAfter",{label:"Delete a character after the cursor",run:function(e){var t=e.selection,n=t.head,r=t.empty;if(!r||n.offset==e.doc.path(n.path).maxOffset)return!1;var o=y(e.doc.path(n.path),n.offset,"word");return e.apply(e.tr["delete"](n,new S.Pos(n.path,o)),_)},info:{key:"Mod-Delete(40)",macKey:["Ctrl-Alt-Backspace(40)","Alt-Delete(40)","Alt-D(40)"]}}),a("join",{label:"Join with above block",run:function(e){var t=(0,B.joinPoint)(e.doc,e.selection.head);return t?e.apply(e.tr.join(t)):!1},select:function(e){return(0,B.joinPoint)(e.doc,e.selection.head)},info:{menuGroup:"block",menuRank:80,key:"Alt-Up"}}),a("lift",{label:"Lift out of enclosing block",run:function(e){var t=e.selection;return e.apply(e.tr.lift(t.from,t.to),_)},select:function(e){var t=e.selection;return(0,B.canLift)(e.doc,t.from,t.to)},info:{menuGroup:"block",menuRank:75,key:"Alt-Left"}}),A(S.BulletList,"BulletList","bullet list",{menuGroup:"block",menuRank:40,key:["Alt-Right '*'","Alt-Right '-'"]}),A(S.OrderedList,"OrderedList","ordered list",{menuGroup:"block",menuRank:41,key:"Alt-Right '1'"}),A(S.BlockQuote,"BlockQuote","block quote",{menuGroup:"block",menuRank:45,key:["Alt-Right '>'","Alt-Right '\"'"]}),a("newlineInCode",{label:"Insert newline",run:function(e){var t=e.selection,n=t.from,r=t.to,o=void 0;return S.Pos.samePath(n.path,r.path)&&(o=e.doc.path(n.path)).type.isCode&&r.offset<o.maxOffset?e.apply(f(e).insertText(n,"\n"),_):!1},info:{key:"Enter(10)"}}),a("liftEmptyBlock",{label:"Move current block up",run:function(e){var t=e.selection,n=t.head,r=t.empty;return!r||n.offset>0?!1:n.path[n.path.length-1]>0&&e.apply(e.tr.split(n.shorten()))!==!1?void 0:e.apply(e.tr.lift(n),_)},info:{key:"Enter(30)"}}),a("splitBlock",{label:"Split the current block",run:function(e){var t=e.selection,n=t.from,r=t.to,o=e.doc.path(r.path),i=r.offset==o.maxOffset?e.schema.defaultTextblockType().create():null;return e.apply(f(e).split(n,1,i),_)},info:{key:"Enter(60)"}}),k(S.Heading,"makeH1","heading 1",{level:1},"Mod-H '1'"),k(S.Heading,"makeH2","heading 2",{level:2},"Mod-H '2'"),k(S.Heading,"makeH3","heading 3",{level:3},"Mod-H '3'"),k(S.Heading,"makeH4","heading 4",{level:4},"Mod-H '4'"),k(S.Heading,"makeH5","heading 5",{level:5},"Mod-H '5'"),k(S.Heading,"makeH6","heading 6",{level:6},"Mod-H '6'"),k(S.Paragraph,"makeParagraph","paragraph",null,"Mod-P"),k(S.CodeBlock,"makeCodeBlock","code block",null,"Mod-\\"),S.HorizontalRule.attachCommand("insertHorizontalRule",function(e){return{label:"Insert horizontal rule",run:function(t){return w(t,e)},info:{key:"Mod-Space"}}}),a("undo",{label:"Undo last change",run:function(e){return e.scrollIntoView(),e.history.undo()},select:function(e){return e.history.canUndo()},info:{menuGroup:"history",menuRank:10,key:"Mod-Z"}}),a("redo",{label:"Redo last undone change",run:function(e){return e.scrollIntoView(),e.history.redo()},select:function(e){return e.history.canRedo()},info:{menuGroup:"history",menuRank:20,key:["Mod-Y","Shift-Mod-Z"]}}),a("textblockType",{label:"Change block type",run:function(e,t){var n=e.selection;return e.apply(e.tr.setBlockType(n.from,n.to,t))},params:[{name:"Type",type:"select",options:M,"default":P,defaultLabel:"Type..."}],display:"select",info:{menuGroup:"block",menuRank:10}}),S.Paragraph.prototype.textblockTypes=[{label:"Normal",rank:10}],S.CodeBlock.prototype.textblockTypes=[{label:"Code",rank:20}],S.Heading.prototype.textblockTypes=[1,2,3,4,5,6].map(function(e){return{label:"Head "+e,attrs:{level:e},rank:30+e}}),a("selectParent",{label:"Select parent node",run:function(e){var t=O(e);return t?void e.setNodeSelection(t):!1},select:function(e){return O(e)},info:{key:"Esc"}})},function(e,t){"use strict";function n(e,t){var n=document.createElement(e);if(t)for(var o in t)"style"==o?n.style.cssText=t[o]:null!=t[o]&&n.setAttribute(o,t[o]);for(var i=arguments.length,a=Array(i>2?i-2:0),s=2;i>s;s++)a[s-2]=arguments[s];for(var u=0;u<a.length;u++)r(a[u],n);return n}function r(e,t){if("string"==typeof e&&(e=document.createTextNode(e)),Array.isArray(e))for(var n=0;n<e.length;n++)r(e[n],t);else t.appendChild(e)}function o(e){l?l(e):setTimeout(e,10)}function i(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function a(e,t){var n=e.className,r=i(t).exec(n);if(r){var o=n.slice(r.index+r[0].length);e.className=n.slice(0,r.index)+(o?r[1]+o:"")}}function s(e,t){var n=e.className;i(t).test(n)||(e.className+=(n?" ":"")+t)}function u(e,t){return 1!=t.nodeType&&(t=t.parentNode),t&&e.contains(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.elt=n,t.requestAnimationFrame=o,t.rmClass=a,t.addClass=s,t.contains=u;var l=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,c=/MSIE \d/.test(navigator.userAgent),f=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);t.browser={mac:/Mac/.test(navigator.platform),ie_upto10:c,ie_11up:f,ie:c||f,gecko:/gecko\/\d/i.test(navigator.userAgent)}},function(e,t){"use strict";function n(e){return/\w/.test(e)||o(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||i.test(e))}function r(e){return/\s/.test(e)?"space":n(e)?"word":"other"}function o(e){return e.charCodeAt(0)>=768&&a.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isWordChar=n,t.charCategory=r,t.isExtendingChar=o;var i=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,a=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){var n=l[e.keyCode],r=n;return null==r||e.altGraphKey?!1:(e.altKey&&"Alt"!=n&&(r="Alt-"+r),e.ctrlKey&&"Ctrl"!=n&&(r="Ctrl-"+r),e.metaKey&&"Cmd"!=n&&(r="Cmd-"+r),!t&&e.shiftKey&&"Shift"!=n&&(r="Shift-"+r),r)}function o(e){var t="string"==typeof e?e:l[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function i(e){for(var t=e.split(/-(?!'?$)/),n=t[t.length-1],r=void 0,o=void 0,i=void 0,a=void 0,s=0;s<t.length-1;s++){var l=t[s];if(/^(cmd|meta|m)$/i.test(l))a=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)$/i.test(l))i=!0;else{if(!/^mod$/i.test(l))throw new Error("Unrecognized modifier name: "+l);u?a=!0:o=!0}}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),a&&(n="Cmd-"+n),i&&(n="Shift-"+n),n}function a(e,t,n,r){var o=t.options.call?t.options.call(e,r):t.bindings[e];if(o===!1)return"nothing";if("..."===o)return"multi";if(null!=o&&n(o))return"handled";var i=t.options.fallthrough;if(i){if(!Array.isArray(i))return a(e,i,n,r);for(var s=0;s<i.length;s++){var u=a(e,i[s],n,r);if(u)return u}}}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.keyName=r,t.isModifierKey=o,t.lookupKey=a;for(var u="undefined"!=typeof navigator?/Mac/.test(navigator.platform):!1,l=t.names={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},c=0;10>c;c++)l[c+48]=l[c+96]=String(c);for(var c=65;90>=c;c++)l[c]=String.fromCharCode(c);for(var c=1;12>=c;c++)l[c+111]=l[c+63235]="F"+c;t.Keymap=function(){function e(t,r){if(n(this,e),this.options=r||{},this.bindings=Object.create(null),t)for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&this.addBinding(o,t[o])}return s(e,[{key:"addBinding",value:function(e,t){for(var n=e.split(" ").map(i),r=0;r<n.length;r++){var o=n.slice(0,r+1).join(" "),a=r==n.length-1?t:"...",s=this.bindings[o];if(s){if(s!=a)throw new Error("Inconsistent bindings for "+o)}else this.bindings[o]=a}}},{key:"removeBinding",value:function(e){for(var t=e.split(" ").map(i),n=t.length-1;n>=0;n--){var r=t.slice(0,n).join(" "),o=this.bindings[r];if("..."==o&&!this.unusedMulti(r))break;o&&delete this.bindings[r]}}},{key:"unusedMulti",value:function(e){for(var t in this.bindings)if(t.length>e&&0==t.indexOf(e)&&" "==t.charAt(e.length))return!1;return!0}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){e.classList.remove("ProseMirror-selectednode")}function i(e,t){t.classList.add("ProseMirror-selectednode")}function a(){return{left:0,right:window.innerWidth,top:0,bottom:window.innerHeight}}function s(e){for(var t=[];;){var n=e.getAttribute("pm-path");if(!n)return t;t.unshift(+n),e=e.parentNode}}function u(e,t,n,r){if(!r&&e.operation&&e.doc!=e.operation.doc)throw new Error("Fetching a position from an outdated DOM structure");for(var o=0,i=void 0;;){if(3==t.nodeType)o+=n;else{if(t.hasAttribute("pm-path")||t==e.content)break;(i=t.getAttribute("pm-span-offset"))&&(o+=+i)}var a=t.parentNode;n=Array.prototype.indexOf.call(a.childNodes,t)+(3!=t.nodeType&&n==t.childNodes.length?1:0),t=a}for(var u=0,l=n-1;l>=0;l--){var c=t.childNodes[l];if(3==c.nodeType)r&&(o+=c.nodeValue.length);else{if(i=c.getAttribute("pm-span")){u=+/^\d+-(\d+)/.exec(i)[1];break}if(i=c.getAttribute("pm-path")){u=+i+1,o=0;break}r&&(o+=c.textContent.length)}}return new C.Pos(s(t),u+o)}function l(e,t,n){if(e.path(t.path).isTextblock)return t;var r=t.cmp(n);return(0>r?C.Pos.before(e,t):C.Pos.after(e,t))||(r>=0?C.Pos.before(e,t):C.Pos.after(e,t))}function c(e,t,n){return null==n&&(n=Array.prototype.indexOf.call(t.parentNode.childNodes,t),t=t.parentNode),u(e,t,n)}function f(e){if(!g(e))return null;var t=getSelection();return new B(u(e,t.anchorNode,t.anchorOffset,!0),u(e,t.focusNode,t.focusOffset,!0))}function h(e,t,n){for(var r=n?e.lastChild:e.firstChild;r;r=n?r.previousSibling:r.nextSibling)if(1==r.nodeType){var o=r.getAttribute("pm-path");if(o){if(+o==t)return r}else{var i=h(r,t);if(i)return i}}}function p(e,t){for(var n=e,r=0;r<t.length;r++)if(n=h(n,t[r]),!n)throw new Error("Failed to resolve path "+t.join("/"));return n}function d(e,t,n){function r(e,o){if(1==e.nodeType){var i=e.getAttribute("pm-span");if(i){var a=/(\d+)-(\d+)/.exec(i),s=O(a,3),u=(s[0],s[1]),l=s[2];if(n?+u==t:+l>=t)return{node:e,parent:e.parentNode,offset:o,innerOffset:t-+u}}else for(var c=e.firstChild,f=0;c;c=c.nextSibling,f++){var h=r(c,f);if(h)return h}}}return r(e)}function m(e,t){for(;;){var n=e.firstChild;if(!n)return{node:e,offset:t};if(1!=n.nodeType)return{node:n,offset:t};if(n.hasAttribute("pm-span-offset")){for(var r=0;;){
var o=n.nextSibling,i=void 0;if(!o||(i=+o.getAttribute("pm-span-offset"))>=t)break;n=o,r=i}t-=r}e=n}}function v(e,t){var n=p(e,t.path),r=d(n,t.offset),o=void 0;return r?r.node.hasAttribute("pm-span-atom")||!(o=m(r.node,r.innerOffset))?{node:r.parent,offset:r.offset+(r.innerOffset?1:0)}:o:{node:n,offset:0}}function g(e){var t=window.getSelection();return t.rangeCount&&(0,S.contains)(e.content,t.anchorNode)}function y(e,t){var n=document.elementFromPoint(t.left,t.top+1);if(!(0,S.contains)(e.content,n))return C.Pos.start(e.doc);var r=void 0;return 1==n.childNodes.length&&3==n.firstChild.nodeType?(n=n.firstChild,r=M(n,t)):r=P(n,t),c(e,n,r)}function A(e,t,n){var r=document.createRange();return r.setEnd(e,n),r.setStart(e,t),r.getBoundingClientRect()}function b(e,t){var n=v(e.content,t),r=n.node,o=n.offset,i=void 0;if(3==r.nodeType&&r.nodeValue)i=A(r,o?o-1:o,o?o:o+1);else if(1==r.nodeType&&r.firstChild){var a=r.childNodes[o?o-1:o];if(i=3==a.nodeType?A(a,0,a.nodeValue.length):a.getBoundingClientRect(),i.left==i.right&&o&&o<r.childNodes.length){var s=r.childNodes[o].getBoundingClientRect();s.left!=s.right&&(i={top:s.top,bottom:s.bottom,right:s.left})}}else i=r.getBoundingClientRect();var u=o?i.right:i.left;return{top:i.top,bottom:i.bottom,left:u,right:u}}function k(e,t){t||(t=e.sel.range.head);for(var n=b(e,t),r=e.content;;r=r.parentNode){var o=r==document.body,i=o?a():r.getBoundingClientRect();if(n.top<i.top?r.scrollTop-=i.top-n.top+T:n.bottom>i.bottom&&(r.scrollTop+=n.bottom-i.bottom+T),n.left<i.left?r.scrollLeft-=i.left-n.left+T:n.right>i.right&&(r.scrollLeft+=n.right-i.right+T),o)break}}function w(e,t){for(var n=e.top,r=e.left,o=1e5,i=1e5,a=0,s=0;s<t.length;s++){var u=t[s];if(u&&(0!=u.top||0!=u.bottom)){var l=n<u.top?u.top-n:n>u.bottom?n-u.bottom:0;if(!(l>o)){o>l&&(o=l,i=1e5);var c=r<u.left?u.left-r:r>u.right?r-u.right:0;i>c&&(i=c,a=Math.abs(r-u.left)<Math.abs(r-u.right)?s:s+1)}}}return a}function M(e,t){for(var n=e.nodeValue.length,r=document.createRange(),o=[],i=0;n>i;i++)r.setEnd(e,i+1),r.setStart(e,i),o.push(r.getBoundingClientRect());return w(t,o)}function P(e,t){for(var n=[],r=e.firstChild;r;r=r.nextSibling)r.getBoundingClientRect?n.push(r.getBoundingClientRect()):n.push(null);return w(t,n)}var O=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){o=!0,i=u}finally{try{!r&&s["return"]&&s["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Range=t.Selection=void 0,t.posFromDOM=c,t.rangeFromDOMLoose=f,t.findByPath=h,t.resolvePath=p,t.hasFocus=g,t.posAtCoords=y,t.coordsAtPos=b,t.scrollIntoView=k;var C=n(4),S=n(27),B=(t.Selection=function(){function e(t){var n=this;r(this,e),this.pm=t;var o=C.Pos.start(t.doc);this.range=new B(o,o),this.node=null,this.pollState=null,this.pollTimeout=null,this.lastAnchorNode=this.lastHeadNode=this.lastAnchorOffset=this.lastHeadOffset=null,this.lastNode=null,t.content.addEventListener("focus",function(){return n.receivedFocus()})}return x(e,[{key:"setAndSignal",value:function(e,t){this.set(e,t),this.pm.signal("selectionChange")}},{key:"set",value:function(e,t){this.range=e,this.node=null,t!==!1&&(this.lastAnchorNode=null)}},{key:"setNode",value:function(e){var t=this.pm.doc.path(e.path),n=e,r=e.move(1);t.isTextblock||(n=C.Pos.after(this.pm.doc,n),r=C.Pos.before(this.pm.doc,r)||n,n||(n=r),n.cmp(r)>0&&(r=n)),this.set(new B(n,r),!1),this.node=e}},{key:"setNodeAndSignal",value:function(e){this.setNode(e),this.pm.signal("selectionChange")}},{key:"selectedNode",value:function(){if(!this.node)return null;var e=this.pm.doc.path(this.node.path);return e.isTextblock?(0,C.spanAtOrBefore)(e,this.node.offset+1):e.child(this.node.offset)}},{key:"map",value:function(e){if(this.node){var t=e.map(this.node,1).pos,n=e.map(this.node,-1).pos;if(0==n.cmp(t.move(1)))return void this.setNodeAndSignal(t)}this.setAndSignal(new B(e.map(this.range.anchor).pos,e.map(this.range.head).pos))}},{key:"pollForUpdate",value:function(){var e=this;if(!this.pm.input.composing){clearTimeout(this.pollTimeout),this.pollState="update";var t=0,n=function r(){e.pm.input.composing||(e.pm.operation?e.pollTimeout=setTimeout(r,20):e.readUpdate()?(e.pollState=null,e.pollToSync()):1==++t&&(e.pollTimeout=setTimeout(r,50)))};this.pollTimeout=setTimeout(n,20)}}},{key:"domChanged",value:function(){var e=getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastHeadNode||e.focusOffset!=this.lastHeadOffset}},{key:"readUpdate",value:function(){if(this.pm.input.composing||!g(this.pm)||!this.domChanged())return!1;var e=getSelection(),t=u(this.pm,e.anchorNode,e.anchorOffset),n=u(this.pm,e.focusNode,e.focusOffset);return this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastHeadNode=e.focusNode,this.lastHeadOffset=e.focusOffset,this.setAndSignal(new B(l(this.pm.doc,t,this.range.anchor),l(this.pm.doc,n,this.range.head))),this.toDOM(),!0}},{key:"pollToSync",value:function(){var e=this;if(!this.pollState){this.pollState="sync";var t=function n(){document.activeElement!=e.pm.content?e.pollState=null:(e.pm.operation||e.pm.input.composing||e.syncDOM(),e.pollTimeout=setTimeout(n,200))};this.pollTimeout=setTimeout(t,200)}}},{key:"syncDOM",value:function(){!this.pm.input.composing&&g(this.pm)&&this.domChanged()&&this.toDOM()}},{key:"toDOM",value:function(e){this.node?this.nodeToDOM(e):this.rangeToDOM(e)}},{key:"nodeToDOM",value:function(e){window.getSelection().removeAllRanges(),e&&this.pm.content.focus();var t=this.node,n=this.selectedNode,r=void 0;r=n.isInline?d(p(this.pm.content,t.path),t.offset,!0).node:p(this.pm.content,t.path.concat(t.offset)),r!=this.lastNode&&(this.clearNode(),i(n,r),this.lastNode=r)}},{key:"clearNode",value:function(){this.lastNode&&(o(this.lastNode),this.lastNode=null)}},{key:"rangeToDOM",value:function(e){this.clearNode();var t=window.getSelection();if(!g(this.pm)){if(!e)return;S.browser.gecko&&this.pm.content.focus()}if(this.domChanged()){var n=document.createRange(),r=this.pm.content,o=v(r,this.range.anchor),i=v(r,this.range.head);if(t.extend)n.setEnd(o.node,o.offset),n.collapse(!1);else{if(this.range.anchor.cmp(this.range.head)>0){var a=o;o=i,i=a}n.setEnd(i.node,i.offset),n.setStart(o.node,o.offset)}t.removeAllRanges(),t.addRange(n),t.extend&&t.extend(i.node,i.offset),this.lastAnchorNode=o.node,this.lastAnchorOffset=o.offset,this.lastHeadNode=i.node,this.lastHeadOffset=i.offset}}},{key:"receivedFocus",value:function(){this.pollState||this.pollToSync()}},{key:"beforeStartOp",value:function(){"update"==this.pollState&&this.readUpdate()?(clearTimeout(this.pollTimeout),this.pollState=null,this.pollToSync()):this.syncDOM()}}]),e}(),t.Range=function(){function e(t,n){r(this,e),this.anchor=t,this.head=n}return x(e,[{key:"cmp",value:function(e){return this.anchor.cmp(e.anchor)||this.head.cmp(e.head)}},{key:"inverted",get:function(){return this.anchor.cmp(this.head)>0}},{key:"from",get:function(){return this.inverted?this.head:this.anchor}},{key:"to",get:function(){return this.inverted?this.anchor:this.head}},{key:"empty",get:function(){return 0==this.anchor.cmp(this.head)}}]),e}()),T=5},function(e,t,n){"use strict";function r(e,t){return{target:"editor",onRender:function(e,t,n){return e.isInline||null==n||t.setAttribute("pm-path",n),f.hasOwnProperty(e.type.name)&&(t.contentEditable=!1),t},renderInlineFlat:function(n,r,i){t.advanceTo(new u.Pos(e,i));for(var a=new u.Pos(e,i+n.offset),s=t.nextChangeBefore(a),l=r,f=void 0,h=0;h<n.styles.length;h++)l=l.firstChild;1!=r.nodeType&&(r=(0,c.elt)("span",null,r),s||(f=r)),f||!s&&!t.current.length||(f=l==r?r=(0,c.elt)("span",null,l):l.parentNode.appendChild((0,c.elt)("span",null,l))),r.setAttribute("pm-span",i+"-"+a.offset),n.isText||r.setAttribute("pm-span-atom","true");for(var p=0;s;){var d=s-i,m=o(f,d);t.current.length&&(m.className=t.current.join(" ")),m.setAttribute("pm-span-offset",p),p+=d,i+=d,t.advanceTo(new u.Pos(e,i)),(s=t.nextChangeBefore(a))||f.setAttribute("pm-span-offset",p)}return t.current.length&&(f.className=t.current.join(" ")),r},document:document,path:e}}function o(e,t){var n=e.firstChild,r=n.nodeValue,o=e.parentNode.insertBefore((0,c.elt)("span",null,r.slice(0,t)),e);return n.nodeValue=r.slice(t),o}function i(e,t){e.content.textContent="",e.content.appendChild((0,l.toDOM)(t,r([],e.ranges.activeRangeTracker())))}function a(e,t,n){for(var r=0;n>r;r++){var o=t;t=t.nextSibling,e.removeChild(o)}return t}function s(e,t,n,o){function i(e,n,o){for(var f=[],h=[],p=[],d=0,m=0;d<o.length&&m<n.width;d++){var v=o.child(d),g=t.get(v);f.push(g);var y=g?-1:n.children.indexOf(v,m);y>-1&&(p[d]=y,h[y]=d,m=y+1)}if(n.isTextblock){var A=0==n.length||n.lastChild.type==n.type.schema.nodes.hard_break,b=e.lastChild,k=b&&1==b.nodeType&&b.hasAttribute("pm-force-br");A&&!k?e.appendChild((0,c.elt)("br",{"pm-force-br":"true"})):!A&&k&&e.removeChild(b)}for(var w=e.firstChild,M=0,P=n.isTextblock,d=0,O=0;d<n.length;d++){var x=n.child(d);P||u.push(d);var C=h[d],S=!0;C>-1?(w=a(e,w,C-M),M=C):!P&&M<o.length&&null==p[M]&&2!=f[M]&&x.sameMarkup(o.child(M))?i(w,x,o.child(M)):(e.insertBefore((0,l.renderNodeToDOM)(x,r(u,s),P?O:d),w),S=!1),S&&(P?w.setAttribute("pm-span",O+"-"+(O+x.offset)):w.setAttribute("pm-path",d),w=w.nextSibling,M++),P?O+=x.offset:u.pop()}a(e,w,o.length-M)}var s=e.ranges.activeRangeTracker(),u=[];i(e.content,n,o)}Object.defineProperty(t,"__esModule",{value:!0}),t.draw=i,t.redraw=s;var u=n(4),l=n(32),c=n(27),f={html_block:!0,html_tag:!0,horizontal_rule:!0}},function(e,t,n){"use strict";function r(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return A=t.document||window.document,l(e.children,t)}function o(e,t){var n=(t&&t.document||window.document).createElement("div");return n.appendChild(r(e,t)),n.innerHTML}function i(e,t,n){var r=c(e,t,n);return t.renderInlineFlat&&e.isInline&&(r=d(e,r,t),r=t.renderInlineFlat(e,r,n)||r),r}function a(e){for(var t=A.createElement(e),n=arguments.length,r=Array(n>1?n-1:0),o=1;n>o;o++)r[o-1]=arguments[o];for(var i=0;i<r.length;i++){var a=r[i];t.appendChild("string"==typeof a?A.createTextNode(a):a)}return t}function s(e,t,n){var r=a(n||e.type.name);return e.isTextblock?t.renderInlineFlat?m(e.children,r,t):h(e.children,r,t):f(e.children,r,t),r}function u(e){return function(t,n){return s(t,n,e)}}function l(e,t){var n=A.createDocumentFragment();return f(e,n,t),n}function c(e,t,n){var r=e.type.serializeDOM(e,t);for(var o in e.type.attrs){var i=e.type.attrs[o];i.serializeDOM&&i.serializeDOM(r,e.attrs[o],t,e)}return t.onRender&&e.isBlock&&(r=t.onRender(e,r,n)||r),r}function f(e,t,n){for(var r=0;r<e.length;r++)n.path&&n.path.push(r),t.appendChild(c(e[r],n,r)),n.path&&n.path.pop()}function h(e,t,n){for(var r=t,o=[],i=0;i<e.length;i++){for(var a=e[i],s=a.styles,u=0;u<Math.min(o.length,s.length)&&s[u].eq(o[u]);++u);for(;u<o.length;)o.pop(),r=r.parentNode;for(;o.length<s.length;){var l=s[o.length];o.push(l),r=r.appendChild(p(l,n))}r.appendChild(c(a,n,i))}}function p(e,t){var n=e.type.serializeDOM(e,t);for(var r in e.type.attrs){var o=e.type.attrs[r];o.serializeDOM&&o.serializeDOM(n,e.attrs[r],t)}return n}function d(e,t,n){for(var r=e.styles,o=r.length-1;o>=0;o--){var i=p(r[o],n);i.appendChild(t),t=i}return t}function m(e,t,n){for(var r=0,o=0;o<e.length;o++){var i=e[o],s=d(i,c(i,n,o),n);s=n.renderInlineFlat(i,s,r)||s,t.appendChild(s),r+=i.offset}e.length&&"hard_break"!=e[e.length-1].type.name?"false"==t.lastChild.contentEditable&&t.appendChild(A.createTextNode("")):t.appendChild(a("br")).setAttribute("pm-force-br","true")}function v(e,t){e.prototype.serializeDOM=t}Object.defineProperty(t,"__esModule",{value:!0}),t.toDOM=r,t.toHTML=o,t.renderNodeToDOM=i;var g=n(4),y=n(33),A=null;(0,y.defineTarget)("dom",r),(0,y.defineTarget)("html",o),v(g.BlockQuote,u("blockquote")),v(g.BulletList,u("ul")),v(g.OrderedList,function(e,t){var n=s(e,t,"ol");return e.attrs.order>1&&n.setAttribute("start",e.attrs.order),n}),v(g.ListItem,u("li")),v(g.HorizontalRule,function(){return a("hr")}),v(g.Paragraph,u("p")),v(g.Heading,function(e,t){return s(e,t,"h"+e.attrs.level)}),v(g.CodeBlock,function(e,t){var n=s(e,t,"code");return null!=e.attrs.params&&(n.className="fence "+e.attrs.params.replace(/(^|\s+)/g,"$&lang-")),a("pre",n)}),v(g.Text,function(e){return A.createTextNode(e.text)}),v(g.Image,function(e){var t=a("img");return t.setAttribute("src",e.attrs.src),e.attrs.title&&t.setAttribute("title",e.attrs.title),e.attrs.alt&&t.setAttribute("alt",e.attrs.alt),t}),v(g.HardBreak,function(){return a("br")}),v(g.EmStyle,function(){return a("em")}),v(g.StrongStyle,function(){return a("strong")}),v(g.CodeStyle,function(){return a("code")}),v(g.LinkStyle,function(e){var t=a("a");return t.setAttribute("href",e.attrs.href),e.attrs.title&&t.setAttribute("title",e.attrs.title),t})},function(e,t){"use strict";function n(e,t,n){var r=i[t];if(!r)throw new Error("Target format "+t+" not defined");return r(e,n)}function r(e){return!!i[e]}function o(e,t){i[e]=t}Object.defineProperty(t,"__esModule",{value:!0}),t.convertTo=n,t.knownTarget=r,t.defineTarget=o;var i=Object.create(null);o("json",function(e){return e.toJSON()})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n){var r=e.input.keySeq;if(r){if((0,d.isModifierKey)(t))return!0;clearTimeout(y),y=setTimeout(function(){e.input.keySeq==r&&(e.input.keySeq=null)},50),t=r+" "+t}for(var o=function s(t){var n=!1;if(Array.isArray(t))for(var r=0;n===!1&&r<t.length;r++)n=s(t[r]);else n="string"==typeof t?e.execCommand(t):t(e);return n!==!1},i=void 0,a=0;!i&&a<e.input.keymaps.length;a++)i=(0,d.lookupKey)(t,e.input.keymaps[a].map,o,e);return i||(i=(0,d.lookupKey)(t,e.options.keymap,o,e)||(0,d.lookupKey)(t,m.dangerousKeys,o,e)),"multi"==i&&(e.input.keySeq=t),("handled"==i||"multi"==i)&&n.preventDefault(),r&&!i&&/\'$/.test(t)?(n.preventDefault(),!0):!!i}function i(e,t,n){if(t.empty&&!n)return!1;var r=e.input.storedStyles||(0,u.spanStylesAt)(e.doc,t.from),o=e.tr;t.empty||o["delete"](t.from,t.to),e.apply(o.insert(t.from,e.schema.text(n,r))),e.signal("textInput",n),e.scrollIntoView()}function a(e){var t=e.input.composing,n=(0,v.textInContext)(t.context,t.endData),r=(0,g.rangeFromDOMLoose)(e);e.ensureOperation(),e.input.composing=null,n!=t.data&&i(e,t.range,n),r&&r.cmp(e.sel.range)&&e.setSelection(r)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Input=void 0,t.dispatchKey=o;var u=n(4),l=n(35),c=n(27),f=n(32),h=n(37),p=n(36),d=n(29),m=n(38),v=n(39),g=n(30),y=null,A={};t.Input=function(){function e(t){var n=this;r(this,e),this.pm=t,this.keySeq=null,this.composing=null,this.shiftKey=this.updatingComposition=!1,this.skipInput=0,this.draggingFrom=!1,this.keymaps=[],this.storedStyles=null,this.dropTarget=t.wrapper.appendChild((0,c.elt)("div",{"class":"ProseMirror-drop-target"}));var o=function(e){var n=A[e];t.content.addEventListener(e,function(e){return n(t,e)})};for(var i in A)o(i);t.on("selectionChange",function(){return n.storedStyles=null})}return s(e,[{key:"maybeAbortComposition",value:function(){if(this.composing&&!this.updatingComposition){if(this.composing.finished)a(this.pm);else{this.composing=null,this.skipInput++;var e=getSelection();if(e.rangeCount){var t=e.getRangeAt(0);e.removeAllRanges(),e.addRange(t)}}return!0}}}]),e}();A.keydown=function(e,t){if(16==t.keyCode&&(e.input.shiftKey=!0),!e.input.composing){var n=(0,d.keyName)(t);n&&o(e,n,t),e.sel.pollForUpdate()}},A.keyup=function(e,t){16==t.keyCode&&(e.input.shiftKey=!1),e.sel.pollForUpdate()},A.keypress=function(e,t){if(!(e.input.composing||!t.charCode||t.ctrlKey&&!t.altKey||c.browser.mac&&t.metaKey)){var n=String.fromCharCode(t.charCode);o(e,"'"+n+"'",t)||(i(e,e.selection,n),t.preventDefault())}},A.mousedown=A.touchdown=function(e){e.sel.pollForUpdate()},A.mousemove=function(e,t){(t.which||t.button)&&e.sel.pollForUpdate()};var b=function w(e,t){r(this,w),this.finished=!1,this.context=(0,v.textContext)(t),this.data=t,this.endData=null;var n=e.selection;if(t){var o=n.head.path,i=e.doc.path(o).textContent,a=i.indexOf(t,n.head.offset-t.length);a>-1&&a<=n.head.offset+t.length&&(n=new g.Range(new u.Pos(o,a),new u.Pos(o,a+t.length)))}this.range=n};A.compositionstart=function(e,t){e.input.maybeAbortComposition()||(e.flush(),e.input.composing=new b(e,t.data))},A.compositionupdate=function(e,t){var n=e.input.composing;n&&n.data!=t.data&&(n.data=t.data,e.input.updatingComposition=!0,i(e,n.range,n.data),e.input.updatingComposition=!1,n.range=new g.Range(n.range.from,n.range.from.move(n.data.length)))},A.compositionend=function(e,t){var n=e.input.composing;n&&(e.input.composing.finished=!0,e.input.composing.endData=t.data,setTimeout(function(){e.input.composing==n&&a(e)},20))},A.input=function(e){return e.input.skipInput?--e.input.skipInput:e.input.composing?void(e.input.composing.finished&&a(e)):((0,v.applyDOMChange)(e),e.sel.pollForUpdate(),void e.scrollIntoView())};var k=null;A.copy=A.cut=function(e,t){var n=e.selection;if(!n.empty){var r=e.selectedDoc;k={doc:e.doc,from:n.from,to:n.to,html:(0,f.toHTML)(r,{target:"copy"}),text:(0,h.toText)(r)},t.clipboardData&&(t.preventDefault(),t.clipboardData.clearData(),t.clipboardData.setData("text/html",k.html),t.clipboardData.setData("text/plain",k.text),"cut"!=t.type||n.empty||e.apply(e.tr["delete"](n.from,n.to)))}},A.paste=function(e,t){if(t.clipboardData){var n=e.selection,r=t.clipboardData.getData("text/plain"),o=t.clipboardData.getData("text/html");if(o||r){t.preventDefault();var i=void 0,a=void 0,s=void 0;if(e.input.shiftKey&&r)!function(){var t=r.split(/[\r\n]+/),o=(0,u.spanStylesAt)(e.doc,n.from);i=e.schema.node("doc",null,t.map(function(t){return e.schema.node("paragraph",null,[e.schema.text(t,o)])}))}();else if(!k||k.html!=o&&k.text!=r)i=o?(0,l.fromHTML)(e.schema,o,{source:"paste"}):(0,p.convertFrom)(e.schema,r,(0,p.knownSource)("markdown")?"markdown":"text");else{var c=k;i=c.doc,a=c.from,s=c.to}e.apply(e.tr.replace(n.from,n.to,i,a||u.Pos.start(i),s||u.Pos.end(i))),e.scrollIntoView()}}},A.dragstart=function(e,t){if(t.dataTransfer){var n=e.selectedDoc;t.dataTransfer.setData("text/html",(0,f.toHTML)(n,{target:"copy"})),t.dataTransfer.setData("text/plain",(0,h.toText)(n)+"??"),e.input.draggingFrom=!0}},A.dragend=function(e){return window.setTimeout(function(){return e.input.dragginFrom=!1},50)},A.dragover=A.dragenter=function(e,t){t.preventDefault();var n=e.posAtCoords({left:t.clientX,top:t.clientY}),r=(0,g.coordsAtPos)(e,n),o=e.wrapper.getBoundingClientRect();r.top-=o.top,r.right-=o.left,r.bottom-=o.top,r.left-=o.left;var i=e.input.dropTarget;i.style.display="block",i.style.left=r.left-1+"px",i.style.top=r.top+"px",i.style.height=r.bottom-r.top+"px"},A.dragleave=function(e){return e.input.dropTarget.style.display=""},A.drop=function(e,t){if(t.dataTransfer){var n=void 0,r=void 0,o=void 0;if((n=t.dataTransfer.getData("text/html"))?o=(0,l.fromHTML)(e.schema,n,{source:"paste"}):(r=t.dataTransfer.getData("text/plain"))&&(o=(0,p.convertFrom)(e.schema,r,(0,p.knownSource)("markdown")?"markdown":"text")),o){t.preventDefault();var i=e.posAtCoords({left:t.clientX,top:t.clientY}),a=e.tr;if(e.input.draggingFrom&&!t.ctrlKey){var s=e.selection;a["delete"](s.from,s.to),i=a.map(i).pos}a.replace(i,i,o,u.Pos.start(o),u.Pos.end(o)),e.apply(a),e.setSelection(new g.Range(i,a.map(i).pos)),e.focus()}e.input.dropTarget.style.display=""}},A.focus=function(e){(0,c.addClass)(e.wrapper,"ProseMirror-focused"),e.signal("focus")},A.blur=function(e){(0,c.rmClass)(e.wrapper,"ProseMirror-focused"),e.signal("blur")}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n){n||(n={});var r=new d(e,n.topNode||e.node("doc"),n),o=n.from?t.childNodes[n.from]:t.firstChild,i=null!=n.to&&t.childNodes[n.to]||null;r.addAll(o,i,!0);for(var a=void 0;r.stack.length;)a=r.leave();return f.Pos.start(a)||(a=a.splice(0,0,[e.defaultTextblockType().create()])),a}function i(e,t,n){var r=(n&&n.document||window.document).createElement("div");return r.innerHTML=t,o(e,r,n)}function a(e){return e.cached.parseDOMNodes||(e.cached.parseDOMNodes=s(e))}function s(e){function t(e){var t=e.parseDOM;t&&t.forEach(function(t){var r=t.tag||"_";(n[r]||(n[r]=[])).push({type:e,rank:null==t.rank?50:t.rank,parse:t.parse})})}var n=Object.create(null);n._=[];for(var r in e.nodes)t(e.nodes[r]);for(var r in e.styles)t(e.styles[r]);for(var o in n)n[o].sort(function(e,t){return e.rank-t.rank});return n}function u(e,t,n,r){t.enter(n,t.parseAttrs(e,n,r)),t.addAll(e.firstChild,null,!0),t.leave()}function l(e,t,n){var r=t.styles;t.styles=(n.instance||n).addToSet(r),t.addAll(e.firstChild,null),t.styles=r}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.fromDOM=o,t.fromHTML=i;var f=n(4),h=n(36);(0,h.defineSource)("dom",o),(0,h.defineSource)("html",i);var p={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},d=function(){function e(t,n,o){r(this,e),this.schema=t,this.stack=[],this.styles=[],this.closing=!1,this.enter(n.type,n.attrs),this.nodeInfo=a(t),this.options=o}return c(e,[{key:"parseAttrs",value:function(e,t,n){for(var r in t.attrs){var o=t.attrs[r];if(o.parseDOM&&(!n||!Object.prototype.hasOwnProperty.call(n,r))){var i=o.parseDOM(e,this.options,o,t);null!=i&&(n||(n={}),n[r]=i)}}return n}},{key:"addDOM",value:function(e){if(3==e.nodeType){var t=e.nodeValue,n=this.top,r=void 0;(/\S/.test(t)||n.type.isTextblock)&&(t=t.replace(/\s+/g," "),/^\s/.test(t)&&(r=n.content[n.content.length-1])&&"text"==r.type.name&&/\s$/.test(r.text)&&(t=t.slice(1)),this.insert(this.schema.text(t,this.styles)))}else if(1!=e.nodeType);else if(!this.parseNodeType(e)){this.addAll(e.firstChild,null);var o=e.nodeName.toLowerCase();p.hasOwnProperty(o)&&this.top.type==this.schema.defaultTextblockType()&&(this.closing=!0)}}},{key:"tryParsers",value:function(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n];if(r.parse(t,this,r.type,null,this.options)!==!1)return!0}}},{key:"parseNodeType",value:function(e){return this.tryParsers(this.nodeInfo[e.nodeName.toLowerCase()],e)||this.tryParsers(this.nodeInfo._,e)}},{key:"addAll",value:function(e,t,n){for(var r=n&&this.stack.slice(),o=e;o!=t;o=o.nextSibling)this.addDOM(o),n&&p.hasOwnProperty(o.nodeName.toLowerCase())&&this.sync(r)}},{key:"doClose",value:function(){if(this.closing&&!(this.stack.length<2)){var e=this.leave();this.enter(e.type,e.attrs),this.closing=!1}}},{key:"insert",value:function(e){if(this.top.type.canContain(e))this.doClose();else for(var t=this.stack.length-1;t>=0;t--){var n=this.stack[t].type.findConnection(e.type);if(n){if(t==this.stack.length-1)this.doClose();else for(;this.stack.length>t+1;)this.leave();for(var r=0;r<n.length;r++)this.enter(n[r]);this.styles.length&&(this.styles=[]);break}}return this.top.content.push(e),e}},{key:"insertFrom",value:function(e,t,n,r,o){return this.insert(t.create(this.parseAttrs(e,t,n),r,o))}},{key:"enter",value:function(e,t){this.styles.length&&(this.styles=[]),this.stack.push({type:e,attrs:t,content:[]})}},{key:"leave",value:function(){var e=this.stack.pop(),t=e.type.create(e.attrs,e.content);return this.stack.length&&this.insert(t),t}},{key:"sync",value:function(e){for(;this.stack.length>e.length;)this.leave();for(;;){var t=this.stack.length-1,n=this.stack[t],r=e[t];if((0,f.compareMarkup)(n.type,r.type,n.attrs,r.attrs))break;this.leave()}for(;e.length>this.stack.length;){var o=e[this.stack.length];this.enter(o.type,o.attrs)}this.styles.length&&(this.styles=[]),this.closing=!1}},{key:"top",get:function(){return this.stack[this.stack.length-1]}}]),e}();f.Paragraph.register("parseDOM",{tag:"p",parse:u}),f.BlockQuote.register("parseDOM",{tag:"blockquote",parse:u});for(var m=function(e){f.Heading.register("parseDOM",{tag:"h"+e,parse:function(t,n,r){return u(t,n,r,{level:e})}})},v=1;6>=v;v++)m(v);f.HorizontalRule.register("parseDOM",{tag:"hr",parse:u}),f.CodeBlock.register("parseDOM",{tag:"pre",parse:function(e,t,n){var r=e.firstChild&&/^code$/i.test(e.firstChild.nodeName)&&e.firstChild.getAttribute("class");if(r&&/fence/.test(r)){for(var o=[],i=/(?:^|\s)lang-(\S+)/g,a=void 0;a=i.test(r);)o.push(a[1]);r=o.join(" ")}else r=null;t.insertFrom(e,n,{params:r},[t.schema.text(e.textContent)])}}),f.BulletList.register("parseDOM",{tag:"ul",parse:u}),f.OrderedList.register("parseDOM",{tag:"ol",parse:function(e,t,n){var r={order:e.getAttribute("start")||1};u(e,t,n,r)}}),f.ListItem.register("parseDOM",{tag:"li",parse:u}),f.HardBreak.register("parseDOM",{tag:"br",parse:function(e,t,n){e.hasAttribute("pm-force-br")||t.insertFrom(e,n,null,null,t.styles)}}),f.Image.register("parseDOM",{tag:"img",parse:function(e,t,n){t.insertFrom(e,n,{src:e.getAttribute("src"),title:e.getAttribute("title")||null,alt:e.getAttribute("alt")||null})}}),f.LinkStyle.register("parseDOM",{tag:"a",parse:function(e,t,n){l(e,t,n.create({href:e.getAttribute("href"),title:e.getAttribute("title")}))}}),f.EmStyle.register("parseDOM",{tag:"i",parse:l}),f.EmStyle.register("parseDOM",{tag:"em",parse:l}),f.StrongStyle.register("parseDOM",{tag:"b",parse:l}),f.StrongStyle.register("parseDOM",{tag:"strong",parse:l}),f.CodeStyle.register("parseDOM",{tag:"code",parse:l})},function(e,t){"use strict";function n(e,t,n,r){var o=i[n];if(!o)throw new Error("Source format "+n+" not defined");return o(e,t,r)}function r(e){return!!i[e]}function o(e,t){i[e]=t}Object.defineProperty(t,"__esModule",{value:!0}),t.convertFrom=n,t.knownSource=r,t.defineSource=o;var i=Object.create(null);o("json",function(e,t){return e.nodeFromJSON(t)})},function(e,t,n){"use strict";function r(e){return e.type.serializeText(e).trim()}Object.defineProperty(t,"__esModule",{value:!0}),t.toText=r;var o=n(4),i=n(33);o.Block.prototype.serializeText=function(e){for(var t="",n=0;n<e.length;n++){var r=e.child(n);t+=r.type.serializeText(r)}return t},o.Textblock.prototype.serializeText=function(e){var t=o.Block.prototype.serializeText(e);return t&&t+"\n\n"},o.Inline.prototype.serializeText=function(){return""},o.HardBreak.prototype.serializeText=function(){return"\n"},o.Text.prototype.serializeText=function(e){return e.text},(0,i.defineTarget)("text",r)},function(e,t,n){"use strict";function r(){}Object.defineProperty(t,"__esModule",{value:!0}),t.dangerousKeys=void 0;var o=n(29);t.dangerousKeys=new o.Keymap({Enter:r,"Mod-Enter":r,"Shift-Enter":r,Backspace:r,Delete:r,"Mod-B":r,"Mod-I":r,"Mod-Backspace":r,"Mod-Delete":r,"Shift-Backspace":r,"Shift-Delete":r,"Shift-Mod-Backspace":r,"Shift-Mod-Delete":r,"Mod-Z":r,"Mod-Y":r,"Shift-Mod-Z":r,"Ctrl-D":r,"Ctrl-H":r,"Ctrl-Alt-Backspace":r,"Alt-D":r,"Alt-Delete":r,"Alt-Backspace":r})},function(e,t,n){"use strict";function r(e,t,n){for(var r=n||0;r<t.path.length;r++){var o=t.path[n];if(o<e.length-1)return!1;e=e.child(o)}return t.offset==e.maxOffset}function o(e,t){if(e.offset>0)return!1;for(var n=t||0;n<e.path.length;n++)if(e.path[t]>0)return!1;return!0}function i(e){for(var t=e.content,n=e.doc,i=e.selection.from,a=e.selection.to,s=0;;s++){var u=n.child(a.path[s]),l=o(i,s+1),c=r(u,a,s+1);if(l||c||i.path[s]!=a.path[s]||u.isTextblock){var f=s==i.depth?i.offset:i.path[s];l&&f>0&&f--;var h=s==a.depth?a.offset:a.path[s]+1;c&&h<n.length-1&&h++;var p=(0,m.fromDOM)(e.schema,t,{topNode:n.copy(),from:f,to:t.childNodes.length-(n.length-h)});p=p.copy(n.slice(0,f).concat(p.children).concat(n.slice(h)));for(var d=s-1;d>=0;d--){var v=e.doc.path(i.path.slice(0,d));p=v.splice(i.path[d],i.path[d]+1,[p])}return p}n=u,t=(0,g.findByPath)(t,i.path[s],!1)}}function a(e){var t=i(e),n=(0,d.findDiffStart)(e.doc,t);if(n){var r=u(e.doc,t,n);return e.apply(e.tr.replace(n.a,r.a,t,n.b,r.b)),e.operation.fullRedraw=!0,!0}return!1}function s(e,t,n){var r=(0,v.samePathDepth)(e,t),o=r==e.depth,i=r==t.depth,a=(i?t.offset:t.path[r])-(o?e.offset:e.path[r]),s=o?n.move(a):n.shorten(r,a);return i?s:s.extend(new d.Pos(t.path.slice(r),t.offset))}function u(e,t,n){var r=(0,d.findDiffEnd)(e,t);return r?r.a.cmp(n.a)<0?{a:n.a,b:s(r.a,n.a,r.b)}:r.b.cmp(n.b)<0?{a:s(r.b,n.b,r.a),b:n.b}:r:r}function l(e){var t=getSelection().getRangeAt(0),n=t.startContainer,r=t.endContainer;if(n==r&&3==n.nodeType){var o=n.nodeValue,i=t.startOffset,a=t.endOffset;return e&&a>=e.length&&o.slice(a-e.length,a)==e&&(i=a-e.length),{inside:n,lead:i,trail:o.length-a}}for(var s=null,u=null,l=n.childNodes[t.startOffset-1]||h(n);l.lastChild;)l=l.lastChild;if(l&&3==l.nodeType){var o=l.nodeValue;s=o.length,e&&o.slice(o.length-e.length)==e&&(s-=e.length)}for(var c=r.childNodes[t.endOffset]||f(r);c.firstChild;)c=c.firstChild;return c&&3==c.nodeType&&(u=c.nodeValue.length),{before:l,sizeBefore:s,after:c,sizeAfter:u}}function c(e,t){if(e.inside){var n=e.inside.nodeValue;return n.slice(e.lead,n.length-e.trail)}var r=e.before,o=e.after,i="";if(!r)return t;3==r.nodeType&&(i=r.nodeValue.slice(e.sizeBefore));var a=p(r,o);if(null==a)return t;if(i+=a,o&&3==o.nodeType){var s=o.nodeValue;i+=s.slice(0,s.length-e.sizeAfter)}return i}function f(e){for(;;){var t=e.nextSibling;if(t){for(;t.firstChild;)t=t.firstChild;return t}if(!(e=e.parentElement))return null}}function h(e){for(;;){var t=e.previousSibling;if(t){for(;t.lastChild;)t=t.lastChild;return t}if(!(e=e.parentElement))return null}}function p(e,t){for(var n="",r=f(e);;){if(r==t)return n;if(!r)return null;3==r.nodeType&&(n+=r.nodeValue),r=r.firstChild||f(r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.applyDOMChange=a,t.textContext=l,t.textInContext=c;var d=n(4),m=n(35),v=n(19),g=n(30)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return"replace"==e.name&&e.from.offset<e.to.offset&&a.Pos.samePath(e.from.path,e.to.path)&&0==e.param.nodes.length}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.History=void 0;var a=n(4),s=n(14),u=function v(e,t,n){r(this,v),this.step=e,this.version=t,this.id=n},l=function(){function e(t){r(this,e),this.branch=t,this.remap=new s.Remapping,this.version=t.version,this.mirrorBuffer=Object.create(null)}return i(e,[{key:"moveToVersion",value:function(e){for(;this.version>e;)this.addNextMap()}},{key:"addNextMap",value:function(){var e=this.branch.mirror[this.version],t=this.branch.maps.length-(this.branch.version-this.version)-1,n=this.remap.addToFront(this.branch.maps[t],this.mirrorBuffer[this.version]);return--this.version,null!=e&&(this.mirrorBuffer[e]=n),n}},{key:"movePastStep",value:function(e){var t=this.addNextMap();e&&this.remap.addToBack(e.map,t)}}]),e}(),c=100,f=150,h=function(){function e(t,n,o){r(this,e),this.branch=n,this.callback=o,this.remap=new l(n),this.doc=t,
this.events=[],this.maps=[],this.version=this.startVersion=n.version,this.i=n.events.length,this.timeout=null,this.aborted=!1}return i(e,[{key:"work",value:function(){var e=this;if(!this.aborted)for(var t=Date.now()+c;;){if(0==this.i)return this.finish();for(var n=this.branch.events[--this.i],r=[],i=n.length-1;i>=0;i--){var a=n[i],l=a.step,h=a.version,p=a.id;this.remap.moveToVersion(h);var d=(0,s.mapStep)(l,this.remap.remap);if(d&&o(l)){for(var m=0,v=l.from;i>0;){var g=n[i-1];if(g.version!=h-1||!o(g.step)||v.cmp(g.step.to))break;m+=g.step.to.offset-g.step.from.offset,v=g.step.from,h--,i--,this.remap.addNextMap()}if(m>0){var y=d.from.move(-m);d=new s.Step("replace",y,d.to,y,{nodes:[],openLeft:0,openRight:0})}}var A=d&&d.apply(this.doc);A&&(this.doc=A.doc,this.maps.push(A.map.invert()),r.push(new u(d,this.version,p)),this.version--),this.remap.movePastStep(A)}if(r.length&&(r.reverse(),this.events.push(r)),Date.now()>t)return void(this.timeout=window.setTimeout(function(){return e.work()},f))}}},{key:"finish",value:function(){this.aborted||(this.events.reverse(),this.maps.reverse(),this.callback(this.maps.concat(this.branch.maps.slice(this.branch.maps.length-(this.branch.version-this.startVersion))),this.events))}},{key:"abort",value:function(){this.aborted=!0,window.clearTimeout(this.timeout)}}]),e}(),p=150,d=function(){function e(t){r(this,e),this.maxDepth=t,this.version=0,this.nextStepID=1,this.maps=[],this.mirror=Object.create(null),this.events=[],this.stepsSinceCompress=0,this.compressing=null,this.compressTimeout=null}return i(e,[{key:"clear",value:function(e){(e||!this.empty())&&(this.maps.length=this.events.length=this.stepsSinceCompress=0,this.mirror=Object.create(null),this.abortCompression())}},{key:"newEvent",value:function(){for(this.abortCompression(),this.events.push([]);this.events.length>this.maxDepth;)this.events.shift()}},{key:"addMap",value:function(e){return this.empty()?void 0:(this.maps.push(e),this.version++,this.stepsSinceCompress++,!0)}},{key:"empty",value:function(){return 0==this.events.length}},{key:"addStep",value:function(e,t,n){this.addMap(t),null==n&&(n=this.nextStepID++),this.events[this.events.length-1].push(new u(e,this.version,n))}},{key:"addTransform",value:function(e,t){this.abortCompression();for(var n=0;n<e.steps.length;n++){var r=e.steps[n].invert(e.docs[n],e.maps[n]);this.addStep(r,e.maps[n],t&&t[n])}}},{key:"popEvent",value:function(e,t){this.abortCompression();var n=this.events.pop();if(!n)return null;for(var r=new l(this),o=t,i=new s.Transform(e),a=[],u=n.length-1;u>=0;u--){var c=n[u],f=c.step;if(o&&c.version==r.version)this.version--,delete this.mirror[this.version],this.maps.pop(),i.step(f),a.push(c.id),--r.version;else{o=!1,r.moveToVersion(c.version),f=(0,s.mapStep)(f,r.remap);var h=f&&i.step(f);h&&(a.push(c.id),this.addMap(h.map)&&(this.mirror[this.version]=c.version)),u>0&&r.movePastStep(h)}}return this.empty()&&this.clear(!0),{transform:i,ids:a}}},{key:"getVersion",value:function(){return{id:this.nextStepID,version:this.version}}},{key:"findVersion",value:function(e){for(var t=this.events.length-1;t>=0;t--)for(var n=this.events[t],r=n.length-1;r>=0;r--){var o=n[r];if(o.id==e.id)return{event:t,step:r};if(o.id<e.id)return{event:t,step:r+1}}}},{key:"rebased",value:function(e,t,n){if(!this.empty()){this.abortCompression();var r=this.version-n.length;e:for(var o=this.events.length-1;o>=0;o--)for(var i=this.events[o],a=i.length-1;a>=0;a--){var s=i[a];if(s.version<=r)break e;var l=n[s.version-r-1];if(-1==l)i.splice(a--,1);else{var c=t.steps[l].invert(t.docs[l],t.maps[l]);i[a]=new u(c,r+e.length+l+1,s.id)}}this.maps.length>n.length?this.maps=this.maps.slice(0,this.maps.length-n.length).concat(e).concat(t.maps):this.maps=t.maps.slice(),this.version=r+e.length+t.maps.length,this.stepsSinceCompress+=e.length+t.steps.length-n.length}}},{key:"abortCompression",value:function(){this.compressing&&(this.compressing.abort(),this.compressing=null)}},{key:"needsCompression",value:function(){return this.stepsSinceCompress>p&&!this.compressing}},{key:"startCompression",value:function(e){var t=this;this.compressing=new h(e,this,function(e,n){t.maps=e,t.events=n,t.mirror=Object.create(null),t.compressing=null,t.stepsSinceCompress=0}),this.compressing.work()}}]),e}(),m=750;t.History=function(){function e(t){var n=this;r(this,e),this.pm=t,this.done=new d(t.options.historyDepth),this.undone=new d(t.options.historyDepth),this.lastAddedAt=0,this.ignoreTransform=!1,this.allowCollapsing=!0,t.on("transform",function(e,t){return n.recordTransform(e,t)})}return i(e,[{key:"recordTransform",value:function(e,t){if(!this.ignoreTransform){if(0==t.addToHistory)for(var n=0;n<e.maps.length;n++){var r=e.maps[n];this.done.addMap(r),this.undone.addMap(r)}else{this.undone.clear();var o=Date.now();o>this.lastAddedAt+this.pm.options.historyEventDelay&&this.done.newEvent(),this.done.addTransform(e),this.lastAddedAt=o}this.maybeScheduleCompression()}}},{key:"undo",value:function(){return this.shift(this.done,this.undone)}},{key:"redo",value:function(){return this.shift(this.undone,this.done)}},{key:"canUndo",value:function(){return this.done.events.length>0}},{key:"canRedo",value:function(){return this.undone.events.length>0}},{key:"shift",value:function(e,t){var n=e.popEvent(this.pm.doc,this.allowCollapsing);if(!n)return!1;var r=n.transform,o=n.ids;return this.ignoreTransform=!0,this.pm.apply(r),this.ignoreTransform=!1,r.steps.length?(t&&(t.newEvent(),t.addTransform(r,o)),this.lastAddedAt=0,!0):this.shift(e,t)}},{key:"getVersion",value:function(){return this.done.getVersion()}},{key:"backToVersion",value:function(e){var t=this.done.findVersion(e);if(!t)return!1;var n=this.done.events[t.event],r=this.done.events.slice(t.event+1).reduce(function(e,t){return e.concat(t)},n.slice(t.step));this.done.events.length=t.event+((n.length=t.step)?1:0),this.done.events.push(r),this.shift(this.done)}},{key:"rebased",value:function(e,t,n){this.done.rebased(e,t,n),this.undone.rebased(e,t,n),this.maybeScheduleCompression()}},{key:"maybeScheduleCompression",value:function(){this.maybeScheduleCompressionForBranch(this.done),this.maybeScheduleCompressionForBranch(this.undone)}},{key:"maybeScheduleCompressionForBranch",value:function(e){var t=this;window.clearTimeout(e.compressTimeout),e.needsCompression()&&(e.compressTimeout=window.setTimeout(function(){e.needsCompression()&&e.startCompression(t.pm.doc)},m))}}]),e}()},function(e,t){"use strict";function n(e){var t=e.prototype;for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])}Object.defineProperty(t,"__esModule",{value:!0}),t.eventMixin=n;var r={on:function(e,t){var n=this._handlers||(this._handlers={}),r=n[e]||(n[e]=[]);r.push(t)},off:function(e,t){var n=this._handlers&&this._handlers[e];if(n)for(var r=0;r<n.length;++r)if(n[r]==t){n.splice(r,1);break}},signal:function(e){for(var t=this._handlers&&this._handlers[e],n=arguments.length,r=Array(n>1?n-1:0),o=1;n>o;o++)r[o-1]=arguments[o];if(t)for(var i=0;i<t.length;++i)t[i].apply(t,r)},signalHandleable:function(e){var t=this._handlers&&this._handlers[e];if(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;n>o;o++)r[o-1]=arguments[o];for(var i=0;i<t.length;++i){var a=t[i].apply(t,r);if(a!==!1)return a}}return!1},hasHandler:function(e){var t=this._handlers&&this._handlers[e];return t&&t.length>0}}},function(e,t,n){"use strict";function r(e,t){for(var n=t.trim().split(/\n{2,}/),r=[],o=0;o<n.length;o++){for(var i=[],a=n[o].split("\n"),s=0;s<a.length;s++)s&&i.push(e.node("hard_break")),a[s]&&i.push(e.text(a[s]));r.push(e.node("paragraph",null,i))}return r.length||r.push(e.node("paragraph")),e.node("doc",null,r)}Object.defineProperty(t,"__esModule",{value:!0}),t.fromText=r;var o=n(36);(0,o.defineSource)("text",r)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.RangeStore=t.MarkedRange=void 0;var i=n(44),a=n(41),s=t.MarkedRange=function(){function e(t,n,o){r(this,e),this.options=o||{},this.from=t,this.to=n}return o(e,[{key:"clear",value:function(){this.signal("removed",this.from),this.from=this.to=null}}]),e}();(0,a.eventMixin)(s);var u=function(){function e(){r(this,e),this.sorted=[]}return o(e,[{key:"find",value:function(e){for(var t=0,n=this.sorted.length;;){if(t+10>n){for(var r=t;n>r;r++)if(this.sorted[r].at.cmp(e)>=0)return r;return n}var o=t+n>>1;this.sorted[o].at.cmp(e)>0?n=o:t=o}}},{key:"insert",value:function(e){this.sorted.splice(this.find(e.at),0,e)}},{key:"remove",value:function(e,t){for(var n=this.find(e),r=0;;r++){var o=n-r-1,i=n+r;if(o>=0&&this.sorted[o].range==t)return void this.sorted.splice(o,1);if(i<this.sorted.length&&this.sorted[i].range==t)return void this.sorted.splice(i,1)}}},{key:"resort",value:function(){for(var e=0;e<this.sorted.length;e++)for(var t=this.sorted[e],n=t.at="open"==t.type?t.range.from:t.range.to,r=e;r>0&&this.sorted[r-1].at.cmp(n)>0;)this.sorted[r]=this.sorted[r-1],this.sorted[--r]=t}}]),e}(),l=(t.RangeStore=function(){function e(t){r(this,e),this.pm=t,this.ranges=[],this.sorted=new u,this.resetDirty()}return o(e,[{key:"resetDirty",value:function(){this.dirty=new i.Map}},{key:"addRange",value:function(e){this.ranges.push(e),this.sorted.insert({type:"open",at:e.from,range:e}),this.sorted.insert({type:"close",at:e.to,range:e}),this.markDisplayDirty(e)}},{key:"removeRange",value:function(e){var t=this.ranges.indexOf(e);t>-1&&(this.ranges.splice(t,1),this.sorted.remove(e.from,e),this.sorted.remove(e.to,e),this.markDisplayDirty(e),e.clear())}},{key:"transform",value:function(e){for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t];n.from=e.map(n.from,n.options.inclusiveLeft?-1:1).pos,n.to=e.map(n.to,n.options.inclusiveRight?1:-1).pos;var r=n.from.cmp(n.to);n.options.clearWhenEmpty!==!1&&r>=0?(this.removeRange(n),t--):r>0&&(n.to=n.from)}this.sorted.resort()}},{key:"markDisplayDirty",value:function(e){this.pm.ensureOperation();for(var t=this.dirty,n=e.from,r=e.to,o=0,i=this.pm.doc;;o++){var a=o==n.depth,s=o==r.depth;if(a||s||n.path[o]!=r.path[o]){var u=a?n.offset:n.path[o],l=s?r.offset:r.path[o]+1;if(i.isTextblock)for(var c=0,f=0;l>c;f++){var h=i.child(f);c+=h.offset,c>u&&t.set(h,2)}else for(var f=u;l>f;f++)t.set(i.child(f),2);break}var h=i.child(n.path[o]);t.has(h)||t.set(h,1),i=h}}},{key:"activeRangeTracker",value:function(){return new l(this.sorted.sorted)}}]),e}(),function(){function e(t){r(this,e),this.sorted=t,this.pos=0,this.current=[]}return o(e,[{key:"advanceTo",value:function(e){for(var t=void 0;this.pos<this.sorted.length&&(t=this.sorted[this.pos]).at.cmp(e)<=0;){var n=t.range.options.className;n&&("open"==t.type?this.current.push(n):this.current.splice(this.current.indexOf(n),1),this.pos++)}}},{key:"nextChangeBefore",value:function(e){for(;;){if(this.pos==this.sorted.length)return null;var t=this.sorted[this.pos];if(t.range.options.className)return t.at.cmp(e)>=0?null:t.at.offset;this.pos++}}}]),e}())},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});t.Map=window.Map||function(){function e(){n(this,e),this.content=[]}return r(e,[{key:"set",value:function(e,t){var n=this.find(e);n>-1?this.content[n+1]=t:this.content.push(e,t)}},{key:"get",value:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]}},{key:"has",value:function(e){return this.find(e)>-1}},{key:"find",value:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t}},{key:"size",get:function(){return this.content.length/2}}]),e}()},function(e,t,n){"use strict";function r(e,t,n){var r=arguments.length<=3||void 0===arguments[3]?null:arguments[3],o=arguments.length<=4||void 0===arguments[4]?null:arguments[4],a=t.shorten(),s=a.offset>0&&e.doc.path(a.path).child(a.offset-1),u=s&&s.type.name==n&&(!o||o(s)),l=e.tr.wrap(t,t,e.schema.node(n,r)),c=l.map(t).pos;l["delete"](new i.Pos(c.path,0),c),u&&l.join(a),e.apply(l)}function o(e,t,n,r){e.apply(e.tr.setBlockType(t,t,e.schema.node(n,r))["delete"](new i.Pos(t.path,0),t))}Object.defineProperty(t,"__esModule",{value:!0}),t.rules=void 0;var i=n(4),a=n(46),s=n(47);(0,a.defineOption)("autoInput",!1,function(e,t,n){t&&!n?(0,s.addInputRules)(e,u):!t&&n&&(0,s.removeInputRules)(e,u)});var u=t.rules=[new s.Rule("-",/--$/,"—"),new s.Rule('"',/\s(")$/,"“"),new s.Rule('"',/"$/,"”"),new s.Rule("'",/\s(')$/,"‘"),new s.Rule("'",/'$/,"’"),new s.Rule(" ",/^\s*> $/,function(e,t,n){r(e,n,"blockquote")}),new s.Rule(" ",/^(\d+)\. $/,function(e,t,n){var o=+t[1];r(e,n,"ordered_list",{order:o||null,tight:!0},function(e){return e.length+(e.attrs.order||1)==o})}),new s.Rule(" ",/^\s*([-+*]) $/,function(e,t,n){var o=t[1];r(e,n,"bullet_list",{bullet:o,tight:!0},function(e){return e.attrs.bullet==o})}),new s.Rule("`",/^```$/,function(e,t,n){o(e,n,"code_block",{params:""})}),new s.Rule(" ",/^(#{1,6}) $/,function(e,t,n){o(e,n,"heading",{level:t[1].length})})]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);Object.defineProperty(t,"ProseMirror",{enumerable:!0,get:function(){return r.ProseMirror}});var o=n(25);Object.defineProperty(t,"defineOption",{enumerable:!0,get:function(){return o.defineOption}});var i=n(30);Object.defineProperty(t,"Range",{enumerable:!0,get:function(){return i.Range}});var a=n(41);Object.defineProperty(t,"eventMixin",{enumerable:!0,get:function(){return a.eventMixin}});var s=n(29);Object.defineProperty(t,"Keymap",{enumerable:!0,get:function(){return s.Keymap}});var u=n(43);Object.defineProperty(t,"MarkedRange",{enumerable:!0,get:function(){return u.MarkedRange}});var l=n(26);Object.defineProperty(t,"defineCommand",{enumerable:!0,get:function(){return l.defineCommand}}),Object.defineProperty(t,"defineParamHandler",{enumerable:!0,get:function(){return l.defineParamHandler}}),Object.defineProperty(t,"Command",{enumerable:!0,get:function(){return l.Command}})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){e.mod.interpretInput||(e.mod.interpretInput=new c(e)),e.mod.interpretInput.addRules(t)}function i(e,t){var n=e.mod.interpretInput;n&&(n.removeRules(t),0==n.rules.length&&(n.unregister(),e.mod.interpretInput=null))}function a(e,t){for(var n=e.path(t.path),r=n.type.isCode,o="",i=0,a=0;i<t.offset;){var s=n.child(a++),u=s.offset;if(o+=i+u>t.offset?s.text.slice(0,t.offset-i):s.text,i+u>=t.offset){s.styles.some(function(e){return e.type.isCode})&&(r=!0);break}i+=u}return{textBefore:o,isCode:r}}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Rule=void 0,t.addInputRules=o,t.removeInputRules=i;var u=n(4),l=n(46),c=(t.Rule=function f(e,t,n){r(this,f),this.lastChar=e,this.match=t,this.handler=n},function(){function e(t){var n=this;r(this,e),this.pm=t,this.rules=[],this.cancelVersion=null,t.on("selectionChange",this.onSelChange=function(){return n.cancelVersion=null}),t.on("textInput",this.onTextInput=this.onTextInput.bind(this)),t.addKeymap(new l.Keymap({Backspace:function(e){return n.backspace(e)}},{name:"inputRules"}),20)}return s(e,[{key:"unregister",value:function(){this.pm.off("selectionChange",this.onSelChange),this.pm.off("textInput",this.onTextInput),this.pm.removeKeymap("inputRules")}},{key:"addRules",value:function(e){this.rules=this.rules.concat(e)}},{key:"removeRules",value:function(e){for(var t=0;t<e.length;t++){var n=this.rules.indexOf(e[t]);n>-1&&this.rules.splice(n,1)}}},{key:"onTextInput",value:function(e){for(var t=this.pm.selection.head,n=void 0,r=void 0,o=e[e.length-1],i=0;i<this.rules.length;i++){var s=this.rules[i],l=void 0;if(!s.lastChar||s.lastChar==o){if(null==n){var c=a(this.pm.doc,t);if(n=c.textBefore,r=c.isCode)return}if(l=s.match.exec(n)){var f=this.pm.history.getVersion();if("string"==typeof s.handler){var h=t.offset-(l[1]||l[0]).length,p=new u.Pos(t.path,h),d=(0,u.spanStylesAt)(this.pm.doc,t);this.pm.apply(this.pm.tr["delete"](p,t).insert(p,this.pm.schema.text(s.handler,d)))}else s.handler(this.pm,l,t);return void(this.cancelVersion=f)}}}}},{key:"backspace",value:function(){return this.cancelVersion?(this.pm.history.backToVersion(this.cancelVersion),void(this.cancelVersion=null)):!1}}]),e}())},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){for(var e=window.getSelection().getRangeAt(0).getClientRects(),t=e[0],n=t.left,r=t.right,o=t.top,i=1;n==r&&e.length>i;){var a=e[i++];n=a.left,r=a.right,o=a.top}for(;i<e.length;i++)e[i].top<e[0].bottom-1&&(i==e.length-1||Math.abs(e[i+1].left-e[i].left)>1)&&(n=Math.min(n,e[i].left),r=Math.max(r,e[i].right),o=Math.min(o,e[i].top));return{top:o,left:(n+r)/2}}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(46),u=n(4),l=n(27),c=n(49),f=n(50),h=n(51),p=n(3),d=r(p),m="ProseMirror-inlinemenu";(0,s.defineOption)("inlineMenu",!1,function(e,t){e.mod.inlineMenu&&e.mod.inlineMenu.detach(),e.mod.inlineMenu=t?new v(e,t):null});var v=function(){function e(t,n){var r=this;o(this,e),this.pm=t,this.items=n&&n.items||(0,h.commandGroups)(t,"inline"),this.showLinks=n?n.showLinks!==!1:!0,this.debounced=new c.Debounced(t,100,function(){return r.update()}),t.on("selectionChange",this.updateFunc=function(){return r.debounced.trigger()}),t.on("change",this.updateFunc),t.on("blur",this.updateFunc),this.tooltip=new f.Tooltip(t,"above"),this.menu=new h.Menu(t,new h.TooltipDisplay(this.tooltip,this.updateFunc)),(0,h.forceFontLoad)(t)}return a(e,[{key:"detach",value:function(){this.debounced.clear(),this.tooltip.detach(),this.pm.off("selectionChange",this.updateFunc),this.pm.off("change",this.updateFunc),this.pm.off("blur",this.updateFunc)}},{key:"update",value:function(){if(!this.menu.active){var e=this.pm.selection,t=void 0;this.pm.hasFocus()?e.empty?this.showLinks&&(t=this.linkUnderCursor())?this.showLink(t,this.pm.coordsAtPos(e.head)):this.tooltip.close():this.menu.show(this.items,i()):this.tooltip.close()}}},{key:"linkUnderCursor",value:function(){var e=(0,u.spanStylesAt)(this.pm.doc,this.pm.selection.head);return e.reduce(function(e,t){return e||"link"==t.type&&t},null)}},{key:"showLink",value:function(e,t){var n=(0,l.elt)("div",{"class":m+"-linktext"},(0,l.elt)("a",{href:e.href,title:e.title},e.href));this.tooltip.open(n,t)}}]),e}();(0,d["default"])("\n\n.ProseMirror-inlinemenu-linktext a {\n  color: white;\n  text-decoration: none;\n  padding: 0 5px;\n}\n\n.ProseMirror-inlinemenu-linktext a:hover {\n  text-decoration: underline;\n}\n\n")},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});t.Debounced=function(){function e(t,r,o){n(this,e),this.pm=t,this.delay=r,this.scheduled=null,this.f=o,this.pending=null}return r(e,[{key:"trigger",value:function(){var e=this;window.clearTimeout(this.scheduled),this.scheduled=window.setTimeout(function(){return e.fire()},this.delay)}},{key:"fire",value:function(){var e=this;this.pending||(this.pm.operation?this.pm.on("flush",this.pending=function(){e.pm.off("flush",e.pending),e.pending=null,e.f()}):this.f())}},{key:"clear",value:function(){window.clearTimeout(this.scheduled)}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Tooltip=void 0;var a=n(27),s=n(3),u=r(s),l="ProseMirror-tooltip";t.Tooltip=function(){function e(t,n){var r=this;o(this,e),this.pm=t,this.dir=n||"above",this.pointer=t.wrapper.appendChild((0,a.elt)("div",{"class":l+"-pointer-"+this.dir+" "+l+"-pointer"})),this.pointerWidth=this.pointerHeight=null,this.dom=t.wrapper.appendChild((0,a.elt)("div",{"class":l})),this.dom.addEventListener("transitionend",function(){"0"==r.dom.style.opacity&&(r.dom.style.display=r.pointer.style.display="")}),this.isOpen=!1,this.lastLeft=this.lastRight=null}return i(e,[{key:"detach",value:function(){this.dom.parentNode.removeChild(this.dom),this.pointer.parentNode.removeChild(this.pointer)}},{key:"getSize",value:function(e){var t=this.pm.wrapper.appendChild((0,a.elt)("div",{"class":l,style:"display: block; position: absolute"},e)),n={width:t.offsetWidth,height:t.offsetHeight};return t.parentNode.removeChild(t),n}},{key:"open",value:function(e,t){for(var n=this.lastLeft=t?t.left:this.lastLeft,r=this.lastTop=t?t.top:this.lastTop,o=this.getSize(e),i=this.pm.wrapper.getBoundingClientRect(),a=this.dom.firstChild,s=void 0;a;a=s)s=a.nextSibling,a!=this.pointer&&this.dom.removeChild(a);this.dom.appendChild(e),this.dom.style.display=this.pointer.style.display="block",null==this.pointerWidth&&(this.pointerWidth=this.pointer.offsetWidth-1,this.pointerHeight=this.pointer.offsetHeight-1),this.dom.style.width=o.width+"px",this.dom.style.height=o.height+"px";var u=5;if("above"==this.dir||"below"==this.dir){var l=Math.max(0,Math.min(n-o.width/2,window.innerWidth-o.width));if(this.dom.style.left=l-i.left+"px",this.pointer.style.left=n-i.left-this.pointerWidth/2+"px","above"==this.dir){var c=r-i.top-u-this.pointerHeight-o.height;this.dom.style.top=c+"px",this.pointer.style.top=c+o.height+"px"}else{var c=r-i.top+u;this.pointer.style.top=c+"px",this.dom.style.top=c+this.pointerHeight+"px"}}else if("left"==this.dir||"right"==this.dir)if(this.dom.style.top=r-i.top-o.height/2+"px",this.pointer.style.top=r-this.pointerHeight/2-i.top+"px","left"==this.dir){var f=n-i.left-u-this.pointerWidth;this.dom.style.left=f-o.width+"px",this.pointer.style.left=f+"px"}else{var f=n-i.left+u;this.dom.style.left=f+this.pointerWidth+"px",this.pointer.style.left=f+"px"}else if("center"==this.dir){var h=Math.max(i.top,0),p=Math.min(i.bottom,window.innerHeight),d=(p-h-o.height)/2;this.dom.style.left=(i.width-o.width)/2+"px",this.dom.style.top=h-i.top+d+"px"}getComputedStyle(this.dom).opacity,getComputedStyle(this.pointer).opacity,this.dom.style.opacity=this.pointer.style.opacity=1,this.isOpen=!0}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.dom.style.opacity=this.pointer.style.opacity=0)}}]),e}();(0,u["default"])('\n\n.ProseMirror-tooltip {\n  position: absolute;\n  display: none;\n  box-sizing: border-box;\n  -moz-box-sizing: border- box;\n  overflow: hidden;\n\n  -webkit-transition: width 0.4s ease-out, height 0.4s ease-out, left 0.4s ease-out, top 0.4s ease-out, opacity 0.2s;\n  -moz-transition: width 0.4s ease-out, height 0.4s ease-out, left 0.4s ease-out, top 0.4s ease-out, opacity 0.2s;\n  transition: width 0.4s ease-out, height 0.4s ease-out, left 0.4s ease-out, top 0.4s ease-out, opacity 0.2s;\n  opacity: 0;\n\n  border-radius: 5px;\n  padding: 3px 7px;\n  margin: 0;\n  background: #444;\n  border-color: #777;\n  color: white;\n\n  z-index: 5;\n}\n\n.ProseMirror-tooltip-pointer {\n  content: "";\n  position: absolute;\n  display: none;\n  width: 0; height: 0;\n\n  -webkit-transition: left 0.4s ease-out, top 0.4s ease-out, opacity 0.2s;\n  -moz-transition: left 0.4s ease-out, top 0.4s ease-out, opacity 0.2s;\n  transition: left 0.4s ease-out, top 0.4s ease-out, opacity 0.2s;\n  opacity: 0;\n\n  z-index: 5;\n}\n\n.ProseMirror-tooltip-pointer-above {\n  border-left: 6px solid transparent;\n  border-right: 6px solid transparent;\n  border-top: 6px solid #444;\n}\n\n.ProseMirror-tooltip-pointer-below {\n  border-left: 6px solid transparent;\n  border-right: 6px solid transparent;\n  border-bottom: 6px solid #444;\n}\n\n.ProseMirror-tooltip-pointer-right {\n  border-top: 6px solid transparent;\n  border-bottom: 6px solid transparent;\n  border-right: 6px solid #444;\n}\n\n.ProseMirror-tooltip-pointer-left {\n  border-top: 6px solid transparent;\n  border-bottom: 6px solid transparent;\n  border-left: 6px solid #444;\n}\n\n.ProseMirror-tooltip input[type="text"],\n.ProseMirror-tooltip textarea {\n  background: #666;\n  color: white;\n  border: none;\n  outline: none;\n}\n\n.ProseMirror-tooltip input[type="text"] {\n  padding: 0 4px;\n}\n\n')},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){var n="ProseMirror-menuicon";e.active(t.pm)&&(n+=" ProseMirror-menuicon-active");var r=(0,y.elt)("div",{"class":n,title:e.label},(0,y.elt)("span",{"class":"ProseMirror-menuicon ProseMirror-icon-"+e.name}));return r.addEventListener("mousedown",function(n){n.preventDefault(),n.stopPropagation(),e.params.length?1==e.params.length&&"select"==e.params[0].type?s(t.pm,e,r):t.enter(h(e)):(e.exec(t.pm),t.reset())}),r}function a(e,t){var n=e.params[0],r=n["default"]?n["default"].call?n["default"](t.pm):n["default"]:null,o=(0,y.elt)("div",{"class":"ProseMirror-select ProseMirror-select-command-"+e.name,title:e.label},r?r.display?r.display(r):r.label:n.defaultLabel||"Select...");return o.addEventListener("mousedown",function(n){n.preventDefault(),n.stopPropagation(),s(t.pm,e,o)}),o}function s(e,t,n){function r(){l||(l=!0,document.body.removeEventListener("mousedown",r),document.body.removeEventListener("keydown",r),e.wrapper.removeChild(a))}var o=t.params[0],i=o.options.call?o.options(e):o.options,a=(0,y.elt)("div",{"class":"ProseMirror-select-menu"},i.map(function(n){var o=(0,y.elt)("div",null,n.display?n.display(n):n.label);return o.addEventListener("mousedown",function(o){o.preventDefault(),t.exec(e,[n.value]),r()}),o})),s=n.getBoundingClientRect(),u=e.wrapper.getBoundingClientRect();a.style.left=s.left-u.left-2+"px",a.style.top=s.top-u.top-2+"px";var l=!1;document.body.addEventListener("mousedown",r),document.body.addEventListener("keydown",r),e.wrapper.appendChild(a)}function u(e,t){if("icon"==e.display)return i(e,t);if("select"==e.display)return a(e,t);if(e.display)return e.display(t);throw new Error("Command "+e.name+" can not be shown in a menu")}function l(e,t){var n=t.params.map(function(t,n){var r=void 0,o="field_"+n;if("text"==t.type)r=(0,y.elt)("input",{name:o,type:"text",placeholder:t.name,autocomplete:"off"});else{if("select"!=t.type)throw new Error("Unsupported parameter type: "+t.type);r=(0,y.elt)("select",{name:o},(t.options.call?t.options(e):t.options).map(function(e){return(0,y.elt)("option",{value:e.value,selected:e==t["default"]},e.label)}))}return(0,y.elt)("div",null,r)});return(0,y.elt)("form",null,n)}function c(e,t,n){var r=!1,o=e.params.map(function(e,o){var i=t.elements["field_"+o].value;return i?i:null!=e["default"]?e["default"].call?e["default"](n):e["default"]:void(r=!0)});return r?null:o}function f(e,t,n){var r=l(e,t),o=!1,i=function(e){o||(o=!0,n(e))},a=function(){i(c(t,r,e))};return r.addEventListener("submit",function(e){e.preventDefault(),a()}),r.addEventListener("keydown",function(e){27==e.keyCode?i(null):13!=e.keyCode||e.ctrlKey||e.metaKey||e.shiftKey||(e.preventDefault(),a())}),setTimeout(function(){var e=r.querySelector("input, textarea");e&&e.focus()},20),r}function h(e){return{display:function(t){return f(t.pm,e,function(n){t.pm.focus(),n?(e.exec(t.pm,n),t.reset()):t.leave()})}}}function p(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];return n.map(function(t){var n=[];for(var r in e.commands){var o=e.commands[r];o.info.menuGroup&&o.info.menuGroup==t&&(0,M["default"])(n,o,function(e,t){return(e.info.menuRank||50)-(t.info.menuRank||50)})}return n})}function d(e){if(!O){O=!0;var t=e.wrapper.appendChild((0,y.elt)("div",{"class":"ProseMirror-menuicon ProseMirror-icon-strong",style:"visibility: hidden; position: absolute"}));window.setTimeout(function(){return e.wrapper.removeChild(t)},20)}}function m(e,t,n){var r=new g.Tooltip(e,"center");r.open(f(e,t,function(t){e.focus(),r.close(),n(t)}))}var v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.TooltipDisplay=t.Menu=void 0,t.showSelectMenu=s,t.readParams=h,t.commandGroups=p,t.forceFontLoad=d;var g=n(50),y=n(27),A=n(3),b=r(A),k=n(46),w=n(24),M=r(w),P=(t.Menu=function(){function e(t,n){o(this,e),this.display=n,this.stack=[],this.pm=t}return v(e,[{key:"show",value:function(e,t){this.stack.length=0,this.enter(e,t)}},{key:"reset",value:function(){this.stack.length=0,this.display.reset()}},{key:"enter",value:function(e,t){var n=this,r=[],o=function a(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)a(e[t]);r.push(P)}else(!e.select||e.select(n.pm))&&r.push(e)};o(e);for(var i=0;i<r.length;i++)r[i]!=P||0!=i&&i!=r.length-1&&r[i+1]!=P||r.splice(i--,1);return r.length?(this.stack.push(r),void this.draw(t)):this.display.clear()}},{key:"draw",value:function(e){var t=this,n=this.stack[this.stack.length-1],r=(0,y.elt)("div",{"class":"ProseMirror-menu"},n.map(function(e){return u(e,t)}));this.stack.length>1?this.display.enter(r,function(){return t.leave()},e):this.display.show(r,e)}},{key:"leave",value:function(){this.stack.pop(),this.stack.length?this.draw():this.display.reset()}},{key:"active",get:function(){return this.stack.length>1}}]),e}(),t.TooltipDisplay=function(){function e(t,n){o(this,e),this.tooltip=t,this.resetFunc=n}return v(e,[{key:"clear",value:function(){this.tooltip.close()}},{key:"reset",value:function(){this.resetFunc?this.resetFunc():this.clear()}},{key:"show",value:function(e,t){this.tooltip.open(e,t)}},{key:"enter",value:function(e,t,n){var r=(0,y.elt)("div",{"class":"ProseMirror-tooltip-back",title:"Back"});r.addEventListener("mousedown",function(e){e.preventDefault(),e.stopPropagation(),t()}),this.show((0,y.elt)("div",{"class":"ProseMirror-tooltip-back-wrapper"},e,r),n)}}]),e}(),{display:function(){return(0,y.elt)("div",{"class":"ProseMirror-menuseparator"})}}),O=!1;(0,k.defineParamHandler)("default",m),(0,k.defineParamHandler)("tooltip",m),(0,b["default"])('\n\n.ProseMirror-menu {\n  margin: 0 -4px;\n  line-height: 1;\n  white-space: pre;\n}\n.ProseMirror-tooltip .ProseMirror-menu {\n  width: -webkit-fit-content;\n  width: fit-content;\n}\n\n.ProseMirror-tooltip-back-wrapper {\n  padding-left: 12px;\n}\n.ProseMirror-tooltip-back {\n  position: absolute;\n  top: 5px; left: 5px;\n  cursor: pointer;\n}\n.ProseMirror-tooltip-back:after {\n  content: "«";\n}\n\n.ProseMirror-menuicon {\n  display: inline-block;\n  padding: 1px 4px;\n  margin: 0 2px;\n  cursor: pointer;\n  text-rendering: auto;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.ProseMirror-menuicon-active {\n  background: #666;\n  border-radius: 4px;\n}\n\n.ProseMirror-menuseparator {\n  display: inline-block;\n}\n.ProseMirror-menuseparator:after {\n  content: "︙";\n  opacity: 0.5;\n  padding: 0 4px;\n  vertical-align: middle;\n}\n\n.ProseMirror-select, .ProseMirror-select-menu {\n  border: 1px solid #777;\n  border-radius: 3px;\n  font-size: 90%;\n}\n\n.ProseMirror-select {\n  padding: 1px 12px 1px 4px;\n  display: inline-block;\n  vertical-align: middle;\n  position: relative;\n  cursor: pointer;\n  margin: 0 4px;\n}\n\n.ProseMirror-select-command-textblockType {\n  min-width: 3.2em;\n}\n\n.ProseMirror-select:after {\n  content: "▿";\n  color: #777;\n  position: absolute;\n  right: 4px;\n}\n\n.ProseMirror-select-menu {\n  position: absolute;\n  background: #444;\n  color: white;\n  padding: 2px 2px;\n  z-index: 5;\n}\n.ProseMirror-select-menu div {\n  cursor: pointer;\n  padding: 0 1em 0 2px;\n}\n.ProseMirror-select-menu div:hover {\n  background: #777;\n}\n\n');
},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){for(var t=e.parentNode;t;t=t.parentNode)if(t.scrollHeight>t.clientHeight)return t}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(46),u=n(27),l=n(49),c=n(51),f=n(3),h=r(f);n(53),(0,s.defineOption)("menuBar",!1,function(e,t){e.mod.menuBar&&e.mod.menuBar.detach(),e.mod.menuBar=t?new d(e,t):null});var p=function(){function e(t,n){o(this,e),this.container=t,this.resetFunc=n}return a(e,[{key:"clear",value:function(){this.container.textContent=""}},{key:"reset",value:function(){this.resetFunc()}},{key:"show",value:function(e){this.clear(),this.container.appendChild(e)}},{key:"enter",value:function(e,t){var n=this.container.firstChild;n&&(n.style.position="absolute",n.style.opacity="0.5");var r=(0,u.elt)("div",{"class":"ProseMirror-menubar-back"});r.addEventListener("mousedown",function(e){e.preventDefault(),e.stopPropagation(),t()});var o=(0,u.elt)("div",{"class":"ProseMirror-menubar-sliding"},r,e);this.container.appendChild(o),o.getBoundingClientRect(),o.style.left="0",o.addEventListener("transitionend",function(){n&&n.parentNode&&n.parentNode.removeChild(n)})}}]),e}(),d=function(){function e(t,n){var r=this;o(this,e),this.pm=t,this.menuElt=(0,u.elt)("div",{"class":"ProseMirror-menubar-inner"}),this.wrapper=(0,u.elt)("div",{"class":"ProseMirror-menubar"},(0,u.elt)("div",{"class":"ProseMirror-menu",style:"visibility: hidden"},(0,u.elt)("div",{"class":"ProseMirror-menuicon"},(0,u.elt)("span",{"class":"ProseMirror-menuicon ProseMirror-icon-strong"}))),this.menuElt),t.wrapper.insertBefore(this.wrapper,t.wrapper.firstChild),this.menu=new c.Menu(t,new p(this.menuElt,function(){return r.resetMenu()})),this.debounced=new l.Debounced(t,100,function(){return r.update()}),t.on("selectionChange",this.updateFunc=function(){return r.debounced.trigger()}),t.on("change",this.updateFunc),t.on("activeStyleChange",this.updateFunc),this.menuItems=n&&n.items||(0,c.commandGroups)(t,"inline","block","history"),this.update(),this.floating=!1,n&&n["float"]&&(this.updateFloat(),this.scrollFunc=function(){document.body.contains(r.pm.wrapper)?r.updateFloat():window.removeEventListener("scroll",r.scrollFunc)},window.addEventListener("scroll",this.scrollFunc))}return a(e,[{key:"detach",value:function(){this.debounced.clear(),this.wrapper.parentNode.removeChild(this.wrapper),this.pm.off("selectionChange",this.updateFunc),this.pm.off("change",this.updateFunc),this.pm.off("activeStyleChange",this.updateFunc),this.scrollFunc&&window.removeEventListener("scroll",this.scrollFunc)}},{key:"update",value:function(){this.menu.active||this.resetMenu(),this.floating&&this.scrollCursorIfNeeded()}},{key:"resetMenu",value:function(){this.menu.show(this.menuItems)}},{key:"updateFloat",value:function(){var e=this.pm.wrapper.getBoundingClientRect();if(this.floating)if(e.top>=0||e.bottom<this.menuElt.offsetHeight+10)this.floating=!1,this.menuElt.style.position=this.menuElt.style.left=this.menuElt.style.width="",this.menuElt.style.display="";else{var t=(this.pm.wrapper.offsetWidth-this.pm.wrapper.clientWidth)/2;this.menuElt.style.left=e.left+t+"px",this.menuElt.style.display=e.top>window.innerHeight?"none":""}else if(e.top<0&&e.bottom>=this.menuElt.offsetHeight+10){this.floating=!0;var n=this.menuElt.getBoundingClientRect();this.menuElt.style.left=n.left+"px",this.menuElt.style.width=n.width+"px",this.menuElt.style.position="fixed"}}},{key:"scrollCursorIfNeeded",value:function(){var e=this.pm.coordsAtPos(this.pm.selection.head),t=this.menuElt.getBoundingClientRect();if(e.top<t.bottom&&e.bottom>t.top){var n=i(this.pm.wrapper);n&&(n.scrollTop-=t.bottom-e.top)}}}]),e}();(0,h["default"])('\n.ProseMirror-menubar {\n  padding: 1px 4px;\n  position: relative;\n  margin-bottom: 3px;\n  border-top-left-radius: inherit;\n  border-top-right-radius: inherit;\n}\n\n.ProseMirror-menubar-inner {\n  color: #666;\n  padding: 1px 4px;\n  top: 0; left: 0; right: 0;\n  position: absolute;\n  border-bottom: 1px solid silver;\n  background: white;\n  z-index: 10;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  overflow: hidden;\n  border-top-left-radius: inherit;\n  border-top-right-radius: inherit;\n}\n\n.ProseMirror-menubar .ProseMirror-menuicon-active {\n  background: #eee;\n}\n\n.ProseMirror-menubar input[type="text"],\n.ProseMirror-menubar textarea {\n  background: #eee;\n  color: black;\n  border: none;\n  outline: none;\n  width: 100%;\n  box-sizing: -moz-border-box;\n  box-sizing: border-box;\n}\n\n.ProseMirror-menubar input[type="text"] {\n  padding: 0 4px;\n}\n\n.ProseMirror-menubar form {\n  position: relative;\n  padding: 2px 4px;\n}\n\n.ProseMirror-menubar .ProseMirror-blocktype {\n  border: 1px solid #ccc;\n  min-width: 4em;\n}\n.ProseMirror-menubar .ProseMirror-blocktype:after {\n  color: #ccc;\n}\n\n.ProseMirror-menubar-sliding {\n  -webkit-transition: left 0.2s ease-out;\n  -moz-transition: left 0.2s ease-out;\n  transition: left 0.2s ease-out;\n  position: relative;\n  left: 100%;\n  width: 100%;\n  box-sizing: -moz-border-box;\n  box-sizing: border-box;\n  padding-left: 16px;\n  background: white;\n}\n\n.ProseMirror-menubar-back {\n  position: absolute;\n  height: 100%;\n  margin-top: -1px;\n  padding-bottom: 2px;\n  width: 10px;\n  left: 0;\n  border-right: 1px solid silver;\n  cursor: pointer;\n}\n.ProseMirror-menubar-back:after {\n  content: "«";\n}\n\n')},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=n(3),i=r(o);(0,i["default"])('\n\n.ProseMirror-icon-lift:after {\n  font-family: ProseMirror-icons;\n  content: "";\n}\n.ProseMirror-icon-join:after {\n  font-family: ProseMirror-icons;\n  content: "";\n}\n.ProseMirror-icon-insertImage:after {\n  font-family: ProseMirror-icons;\n  content: "";\n}\n.ProseMirror-icon-strong:after {\n  font-family: ProseMirror-icons;\n  content: "";\n}\n.ProseMirror-icon-em:after {\n  font-family: ProseMirror-icons;\n  content: "";\n}\n.ProseMirror-icon-link:after, .ProseMirror-icon-unlink:after {\n  font-family: ProseMirror-icons;\n  content: "";\n}\n.ProseMirror-icon-code:after {\n  font-family: ProseMirror-icons;\n  font-size: 110%;\n  content: "";\n}\n.ProseMirror-icon-wrapOrderedList:after {\n  font-family: ProseMirror-icons;\n  font-size: 110%;\n  content: "";\n}\n.ProseMirror-icon-wrapBulletList:after {\n  font-family: ProseMirror-icons;\n  font-size: 110%;\n  content: "";\n}\n.ProseMirror-icon-wrapBlockQuote:after {\n  font-family: ProseMirror-icons;\n  font-size: 110%;\n  content: "";\n}\n.ProseMirror-icon-insertHorizontalRule:after {\n  font-family: ProseMirror-icons;\n  content: "";\n}\n.ProseMirror-icon-undo:after {\n  font-family: ProseMirror-icons;\n  content: "";\n}\n.ProseMirror-icon-redo:after {\n  font-family: ProseMirror-icons;\n  content: "";\n}\n\n@font-face {\n  font-family: ProseMirror-icons;\n  src: url(data:application/x-font-woff;base64,d09GRgABAAAAAA2QAAsAAAAADUQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAABCAAAAGAAAABgDxIG02NtYXAAAAFoAAAAfAAAAHy2vLZyZ2FzcAAAAeQAAAAIAAAACAAAABBnbHlmAAAB7AAACRgAAAkYOsDSDGhlYWQAAAsEAAAANgAAADYHM7UpaGhlYQAACzwAAAAkAAAAJAgLBBtobXR4AAALYAAAAEQAAABEM24B5GxvY2EAAAukAAAAJAAAACQNyBAebWF4cAAAC8gAAAAgAAAAIAAdAJBuYW1lAAAL6AAAAYYAAAGGmUoJ+3Bvc3QAAA1wAAAAIAAAACAAAwAAAAMDYwGQAAUAAAKZAswAAACPApkCzAAAAesAMwEJAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAQAAA6kYDwP/AAEADwABAAAAAAQAAAAAAAAAAAAAAIAAAAAAAAwAAAAMAAAAcAAEAAwAAABwAAwABAAAAHAAEAGAAAAAUABAAAwAEAAEAIOYE5gjmCuYM6WjqRv/9//8AAAAAACDmAOYG5grmDOln6kb//f//AAH/4xoEGgMaAhoBFqcVygADAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAH//wAPAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAVQGAA6sB1QASAAATITIXFhUUBwYjISInJjU0NzYzgAMAEgwNDQwS/QASDA0NDBIB1QwNERINDAwNEhENDAACAAAAgAOAAwAABgANAAABBxcHFwkBIQkBNyc3JwJgYODgYAEg/uD+wP7gASBg4OBgAwBg4OBgAUABQP7A/sBg4OBgAAIAAADAAoACwAANABsAABMRIREjMDYzNTAOAhUlNTAOAhURIREjMDYzAAEAgCBgUGBQAoBQYFABAIAgYAHA/wABAICACDBoYICACDBoYP8AAQCAAAYAAACAAwADAAAEAAkADgATABgAHQAAEzM1IxURMzUjFREzNSMVASE1IRURITUhFREhNSEVAICAgICAgAEAAgD+AAIA/gACAP4AAYCAgAEAgID+AICAAQCAgAEAgID+AICAAAAFAAAAfwMAAwAABAAJAA4AFgAvAAABITUhFREhNSEVERUhNSEDMxEjBxU3FRc0JiMiBgcXPgEzMhYVFAYHFTM1Bz4BNTcBQAHA/kABwP5AAcD+QPFOJFUrbiE/GSwOARAgExMNMjzAWyUyAQGAgID/AICAAoCAgP8AAQAXMgK5zhszCAhCBwgPDRM0KTJDAhY4IwEABAAAAAAESQNuABAAFwAsAEEAAAEUBwYjIicmNTQ3NjMyFxYVBREhNTcXASUhIgcGFREUFxYzITI3NjURNCcmIxcRFAcGIyEiJyY1ETQ3NjMhMhcWFQFuICAuLiAgICAuLiAgAkn827dcASQBJfxtBwUGBgUHA5MHBgUFBgdbGxsl/G0lGxsbGyUDkyUbGwJuLiAgICAuLSAgICAt3P8AbrdcASWlBgUI/UkHBQYGBQcCtwgFBhP9SSUbGxsbJQK3JhsbGxsmAAADAAAAAAMlA24AHgA9AI0AACUWMzI1NCcmJyYnJicmJyYjIgcUFRQVFAcGFxQXFhcDFjMyNzY3Njc2NTQnJicmJyYjIgcUFxYVFBUUFRQVATc2NzY3Njc2NzY3NjU0PQEQJyYnJicmJyYnJiMnNjc2MzIXMjMyFxYXFhcWFxYVFAcGBwYHBgcGBxYXFhUUBwYHBgcGBwYjIicmIyIHBgcBPSom1xcQFBMTExsbFRUhKhABAQECAwQIGCYvIyMcHA8OEBEdHCEhJh0tAgL+ywEJKCgUBAMEAQIBAgwCCwoPDw0ODg8DAjiKi0sNGhoMKCYmJCMaGxAQCgkNDRgYEhEfWDs7FBQiIS4tMDA1GTIyGjxzcxFSE8BBJhkREQoJBQUBAQYePTweBCIiFhUaGwsBqgQHCBISISEwKB4eEREICAgcOjodDx4fDxoN/gQ2AgcHCAcJCAsKCAgODQYmAjEYBQQDAwMBAQIBMAEFBgEHCBARGBgkIyseGRkQEBEQCQoNFDk4VjktLh0dFBMICAECBgYBAAMACQAJA64DrgArAFcAgAAAATQvASYjIgcWFxYXFhcWFxYVFAcGIyInJicmJyYnJicGFRQfARYzMj8BNjUBNC8BJiMiDwEGFRQfARYzMjcmJyYnJicmJyY1NDc2MzIXFhcWFxYXFhc2NQEUDwEGIyIvASY1NDcnBiMiLwEmNTQ/ATYzMh8BFhUUBxc2MzIfARYVA0AQdxAXGBECCQkDAwYFAgIQEBcIBwcIBwQDCQkCEhB1EBcXEFQQ/m4QdRAXFxBUEBB3DxgYEQIJCQMEBQUCAhAQFgkHBwgHBAMJCQETAgAxVC9FRS92MDMzMUVFMHcwMVQvRUUvdi8yMjJFRTB3MAEAFxB3EBMBCQkDBAcIBwcJFhAQAgIFBQQDCQkCEhgXEHYQD1QQFgGTFxB2EA9UEBYXEHcPEQIJCQMEBwgHBwgXEBACAgUGAwMJCQISGP5tRS9TMDF2L0VGMTMzMHcwRUQwUzAxdjBERjIyMjB2MEUAAAEAAAAAAkkDbgBOAAA/ATY3Njc2NzY3Njc2PQEmJyYnJic3FhcWFxYzMjc2NzY3BgcGBwYHBgcGBwYHBgcGBwYHBgcGBwYHBhUXFhcGByIHBiMiJyYjJiMiBwYHAAoDKysVEAcBIyMeHg4REhYWCwsSMjIkIyEcHR0oKBADCBEpKRUEBAMCAgIDAQ8jIgoBBwYFBQQEAQpgAgcHDAwHECEhEE8nHTU0EQExAQsLChQmBKGhlpUUDwcDAwIBAjsBAwMBAQEBAwMBFxwGCgsJCg4NCgkREAhUm5wwBRwcFxgYGAkKAhAZHwEBBgUCBgUBAAUAAABJBAADbgATACgAPQBSAGcAABMRFAcGIyIvASY1ND8BNjMyFxYVARUUBwYjISInJj0BNDc2MyEyFxYVNRUUBwYjISInJj0BNDc2MyEyFxYVNRUUBwYjISInJj0BNDc2MyEyFxYVNRUUBwYjISInJj0BNDc2MyEyFxYV2wUFCAgFpQUFpQUICAUFAyUFBgf8JAcGBQUGBwPcBwYFBQYH/ZIHBgUFBgcCbgcGBQUGB/2SBwYFBQYHAm4HBgUFBgf8JAcGBQUGBwPcBwYFAoD+twgFBQWkBQgIBqQFBQYH/kluBwUGBgUHbggFBQUFCNxuCAUFBQUIbgcFBgYFB9tuBwYFBQYHbgcGBQUGB9ttCAUGBgUIbQgFBgYFCAAAAAEAQP/AAvoDwAAOAAAFPgEuAQcVCQEVNh4BAgcC+ismOKuo/oABgMnjRk9pQE22mmUE/gGAAYD4BZzs/u1yAAABAQb/wAPAA8AADgAAATUJATUmDgEWFyYCPgEXAkABgP6AqKs4JitpT0bjyQLI+P6A/oD+BGWatk1yARPsnAUACwBAAAADoAMAAAYACwAQABUAGgAfACQAKQAuADMAOAAAAREzETMnBwEzFSM1OwEVIzU7ARUjNQUzFSM1FzMVIzU7ARUjNSczFSM1BTMVIzURFSM1MzchESERAsBAoMDA/iBgYIBgYIBAQP8AQEBgYGCAYGDgQEABAEBAwMBA/sABQAHA/oABgMDAAUBAQEBAYGDgYGAgQEBAQKBgYCBgYP6AwMBA/sABQAAAAAEAAAAAAABpWQ1jXw889QALBAAAAAAA0eY4VgAAAADR5jhWAAD/wARJA8AAAAAIAAIAAAAAAAAAAQAAA8D/wAAABEkAAAAABEkAAQAAAAAAAAAAAAAAAAAAABEEAAAAAAAAAAAAAAACAAAABAAAVQOAAAACgAAAAwAAAAMAAAAESQAAAyUAAAO3AAkCSQAABAAAAAQAAEAEAAEGBAAAQAAAAAAACgAUAB4APgBgAIoAvAEGAWoCNALuA2YD9gQWBDYEjAABAAAAEQCOAAsAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAADgCuAAEAAAAAAAEABwAAAAEAAAAAAAIABwBgAAEAAAAAAAMABwA2AAEAAAAAAAQABwB1AAEAAAAAAAUACwAVAAEAAAAAAAYABwBLAAEAAAAAAAoAGgCKAAMAAQQJAAEADgAHAAMAAQQJAAIADgBnAAMAAQQJAAMADgA9AAMAAQQJAAQADgB8AAMAAQQJAAUAFgAgAAMAAQQJAAYADgBSAAMAAQQJAAoANACkaWNvbW9vbgBpAGMAbwBtAG8AbwBuVmVyc2lvbiAxLjAAVgBlAHIAcwBpAG8AbgAgADEALgAwaWNvbW9vbgBpAGMAbwBtAG8AbwBuaWNvbW9vbgBpAGMAbwBtAG8AbwBuUmVndWxhcgBSAGUAZwB1AGwAYQByaWNvbW9vbgBpAGMAbwBtAG8AbwBuRm9udCBnZW5lcmF0ZWQgYnkgSWNvTW9vbi4ARgBvAG4AdAAgAGcAZQBuAGUAcgBhAHQAZQBkACAAYgB5ACAASQBjAG8ATQBvAG8AbgAuAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==) format(\'woff\');\n  font-weight: normal;\n  font-style: normal;\n}\n\n')},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(46),s=n(27),u=n(30),l=n(49),c=n(50),f=n(51),h=n(3),p=r(h);n(53);var d="ProseMirror-buttonmenu";(0,a.defineOption)("buttonMenu",!1,function(e,t){e.mod.menu&&e.mod.menu.detach(),e.mod.menu=t?new m(e,t):null});var m=function(){function e(t,n){var r=this;o(this,e),this.pm=t,this.tooltip=new c.Tooltip(t,"left"),this.menu=new f.Menu(t,new f.TooltipDisplay(this.tooltip)),this.hamburger=t.wrapper.appendChild((0,s.elt)("div",{"class":d+"-button"},(0,s.elt)("div"),(0,s.elt)("div"),(0,s.elt)("div"))),this.hamburger.addEventListener("mousedown",function(e){e.preventDefault(),e.stopPropagation(),r.tooltip.isOpen?r.tooltip.close():r.openMenu()}),this.debounced=new l.Debounced(t,100,function(){return r.alignButton()}),t.on("selectionChange",this.updateFunc=function(){return r.updated()}),t.on("change",this.updateFunc),t.on("blur",this.updateFunc),this.blockItems=(0,f.commandGroups)(t,"block"),this.allItems=(0,f.commandGroups)(t,"inline","block"),this.pm.content.addEventListener("keydown",this.closeFunc=function(){return r.tooltip.close()}),this.pm.content.addEventListener("mousedown",this.closeFunc),(0,f.forceFontLoad)(t)}return i(e,[{key:"detach",value:function(){this.debounced.clear(),this.hamburger.parentNode.removeChild(this.hamburger),this.tooltip.detach(),this.pm.off("selectionChange",this.updateFunc),this.pm.off("change",this.updateFunc),this.pm.off("blur",this.updateFunc),this.pm.content.removeEventListener("keydown",this.closeFunc),this.pm.content.removeEventListener("mousedown",this.closeFunc)}},{key:"updated",value:function(){this.menu.active||(this.tooltip.close(),this.debounced.trigger())}},{key:"openMenu",value:function(){var e=this.hamburger.getBoundingClientRect(),t={left:e.left,top:(e.top+e.bottom)/2},n=this.pm.selection.empty||!this.pm.getOption("inlineMenu");this.menu.show(n?this.allItems:this.blockItems,t)}},{key:"alignButton",value:function(){var e=(0,u.resolvePath)(this.pm.content,this.pm.selection.from.path),t=e.getBoundingClientRect(),n=t.top,r=this.pm.wrapper.getBoundingClientRect();this.hamburger.style.top=Math.max(n-this.hamburger.offsetHeight-2-r.top,7)+"px"}}]),e}();(0,p["default"])("\n\n.ProseMirror-buttonmenu-button {\n  display: none;\n  position: absolute;\n  top: 7px;\n  right: 7px;\n  width: 15px;\n  height: 13px;\n  cursor: pointer;\n\n  -webkit-transition: top 0.3s ease-out;\n  -moz-transition: top 0.3s ease-out;\n  transition: top 0.3s ease-out;\n}\n\n.ProseMirror-focused .ProseMirror-buttonmenu-button {\n  display: block;\n}\n\n.ProseMirror-buttonmenu-button div {\n  height: 3px;\n  margin-bottom: 2px;\n  border-radius: 4px;\n  background: #888;\n}\n\n.ProseMirror-buttonmenu-button:hover div {\n  background: #333;\n}\n\n")},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.rebaseSteps=void 0;var i=n(46),a=n(56);t.rebaseSteps=a.rebaseSteps,(0,i.defineOption)("collab",!1,function(e,t){e.mod.collab&&(e.mod.collab.detach(),e.mod.collab=null),t&&(e.mod.collab=new s(e,t))});var s=function(){function e(t,n){var o=this;r(this,e),this.pm=t,this.options=n,this.version=n.version||0,this.versionDoc=t.doc,this.unconfirmedSteps=[],this.unconfirmedMaps=[],t.on("transform",this.onTransform=function(e){for(var t=0;t<e.steps.length;t++)o.unconfirmedSteps.push(e.steps[t]),o.unconfirmedMaps.push(e.maps[t]);o.signal("mustSend")}),t.on("beforeSetDoc",this.onSetDoc=function(){throw new Error("setDoc is not supported on a collaborative editor")}),t.history.allowCollapsing=!1}return o(e,[{key:"detach",value:function(){this.pm.off("transform",this.onTransform),this.pm.off("beforeSetDoc",this.onSetDoc),this.pm.history.allowCollapsing=!0}},{key:"hasSendableSteps",value:function(){return this.unconfirmedSteps.length>0}},{key:"sendableSteps",value:function(){return{version:this.version,doc:this.pm.doc,steps:this.unconfirmedSteps.slice()}}},{key:"confirmSteps",value:function(e){this.unconfirmedSteps.splice(0,e.steps.length),this.unconfirmedMaps.splice(0,e.steps.length),this.version+=e.steps.length,this.versionDoc=e.doc}},{key:"receive",value:function(e){var t=this.versionDoc,n=e.map(function(e){var n=e.apply(t);return t=n.doc,n.map});this.version+=e.length,this.versionDoc=t;var r=(0,a.rebaseSteps)(t,n,this.unconfirmedSteps,this.unconfirmedMaps);return this.unconfirmedSteps=r.transform.steps.slice(),this.unconfirmedMaps=r.transform.maps.slice(),this.pm.updateDoc(r.doc,r.mapping),this.pm.history.rebased(n,r.transform,r.positions),n}}]),e}();(0,i.eventMixin)(s)},function(e,t,n){"use strict";function r(e,t,n,r){for(var i=new o.Remapping([],t.slice()),a=new o.Transform(e),s=[],u=0;u<n.length;u++){var l=(0,o.mapStep)(n[u],i),c=l&&a.step(l),f=i.addToFront(r[u].invert());c?(i.addToBack(c.map,f),s.push(a.steps.length-1)):s.push(-1)}return{doc:a.doc,transform:a,mapping:i,positions:s}}Object.defineProperty(t,"__esModule",{value:!0}),t.rebaseSteps=r;var o=n(14)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=n(58),a=r(i),s=function(){return a["default"].v4()},u=new o.Attribute({compute:s,mustRecompute:!0,inheritable:!0});u.parseDOM=function(e,t){return"paste"!=t.source&&e.getAttribute("data-grid-id")||s()},u.serializeDOM=function(e,t){return e.setAttribute("data-grid-id",t)};var l=function(e,t){return t.type.prototype.isTextblock||t.type.prototype.isBlock},c=new o.Schema(o.defaultSchema.spec.addAttribute(l,"id",u));t["default"]=c},function(e,t,n){function r(e,t,n){var r=t&&n||0,o=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){16>o&&(t[r+o++]=l[e])});16>o;)t[r+o++]=0;return t}function o(e,t){var n=t||0,r=u;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}function i(e,t,n){var r=t&&n||0,i=t||[];e=e||{};var a=void 0!==e.clockseq?e.clockseq:p,s=void 0!==e.msecs?e.msecs:(new Date).getTime(),u=void 0!==e.nsecs?e.nsecs:m+1,l=s-d+(u-m)/1e4;if(0>l&&void 0===e.clockseq&&(a=a+1&16383),(0>l||s>d)&&void 0===e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=s,m=u,p=a,s+=122192928e5;var c=(1e4*(268435455&s)+u)%4294967296;i[r++]=c>>>24&255,i[r++]=c>>>16&255,i[r++]=c>>>8&255,i[r++]=255&c;var f=s/4294967296*1e4&268435455;i[r++]=f>>>8&255,i[r++]=255&f,i[r++]=f>>>24&15|16,i[r++]=f>>>16&255,i[r++]=a>>>8|128,i[r++]=255&a;for(var v=e.node||h,g=0;6>g;g++)i[r+g]=v[g];return t?t:o(i)}function a(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var i=e.random||(e.rng||s)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var a=0;16>a;a++)t[r+a]=i[a];return t||o(i)}for(var s=n(59),u=[],l={},c=0;256>c;c++)u[c]=(c+256).toString(16).substr(1),l[u[c]]=c;var f=s(),h=[1|f[0],f[1],f[2],f[3],f[4],f[5]],p=16383&(f[6]<<8|f[7]),d=0,m=0,v=a;v.v1=i,v.v4=a,v.parse=r,v.unparse=o,e.exports=v},function(e,t){(function(t){var n;if(t.crypto&&crypto.getRandomValues){var r=new Uint8Array(16);n=function(){return crypto.getRandomValues(r),r}}if(!n){var o=new Array(16);n=function(){for(var e,t=0;16>t;t++)0===(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}e.exports=n}).call(t,function(){return this}())},function(e,t){"use strict";function n(e,t){return-1!==e.indexOf(t)}function r(e){return n(s,e)}function o(e){return n(u,e)}function i(e){var t=e.id,n=e.type,i=(e.html,void 0);if(o(n)){var a=document.createElement("div");a.innerHTML=e.html,i=a.firstChild}else r(n)&&(i=document.createElement("p"),i.innerHTML="[["+n+" block placeholder]]",i.contenteditable="false",i.spellcheck="false");return i.setAttribute("data-grid-id",t),i}function a(e){return e.map(i)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=a(e),n=document.createElement("div");return t.forEach(function(e){n.appendChild(e)}),n};var s=["image","video","audio","article","location","share","interactive"],u=["text","p","code","quote","blockquote","list","ol","ul","h1","h2","h3","h4","h5","h6"]},function(e,t,n){"use strict";function r(e){return JSON.parse(JSON.stringify(e))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){var n=r(t);n.content.forEach(function(e){i[e.id]=e});for(var a=(0,o.toDOM)(e),s=[],u=a.children.length,l=0;u>l;l++){var c=a.children[l],f=c.getAttribute("data-grid-id")||uuid.v4(),h=i[f];h||(h={id:f}),c.removeAttribute("data-grid-id"),h.html=c.outerHTML,s[l]=h}return n.content=s,n};var o=(n(14),n(32)),i={}}]);